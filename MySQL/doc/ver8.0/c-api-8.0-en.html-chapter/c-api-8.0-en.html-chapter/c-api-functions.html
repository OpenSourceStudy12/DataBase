<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 7 C API Function Descriptions</title><link rel="stylesheet" type="text/css" href="mvl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="MySQL 8.0 C API Developer Guide"><link rel="up" href="index.html" title="MySQL 8.0 C API Developer Guide"><link rel="prev" href="c-api-function-overview.html" title="Chapter 6 C API Function Overview"><link rel="next" href="c-api-prepared-statements.html" title="Chapter 8 C API Prepared Statements"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 7 C API Function Descriptions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="c-api-function-overview.html">Previous</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="c-api-prepared-statements.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="c-api-functions"></a>Chapter 7 C API Function Descriptions</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="c-api-functions.html#mysql-affected-rows">7.1 mysql_affected_rows()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-autocommit">7.2 mysql_autocommit()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-bind-param">7.3 mysql_bind_param()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-change-user">7.4 mysql_change_user()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-character-set-name">7.5 mysql_character_set_name()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-close">7.6 mysql_close()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-commit">7.7 mysql_commit()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-connect">7.8 mysql_connect()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-create-db">7.9 mysql_create_db()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-data-seek">7.10 mysql_data_seek()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-debug">7.11 mysql_debug()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-drop-db">7.12 mysql_drop_db()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-dump-debug-info">7.13 mysql_dump_debug_info()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-eof">7.14 mysql_eof()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-errno">7.15 mysql_errno()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-error">7.16 mysql_error()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-escape-string">7.17 mysql_escape_string()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-fetch-field">7.18 mysql_fetch_field()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-fetch-field-direct">7.19 mysql_fetch_field_direct()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-fetch-fields">7.20 mysql_fetch_fields()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-fetch-lengths">7.21 mysql_fetch_lengths()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-fetch-row">7.22 mysql_fetch_row()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-field-count">7.23 mysql_field_count()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-field-seek">7.24 mysql_field_seek()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-field-tell">7.25 mysql_field_tell()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-free-result">7.26 mysql_free_result()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-character-set-info">7.27 mysql_get_character_set_info()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-client-info">7.28 mysql_get_client_info()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-client-version">7.29 mysql_get_client_version()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-host-info">7.30 mysql_get_host_info()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-option">7.31 mysql_get_option()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-proto-info">7.32 mysql_get_proto_info()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-server-info">7.33 mysql_get_server_info()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-server-version">7.34 mysql_get_server_version()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-get-ssl-cipher">7.35 mysql_get_ssl_cipher()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-hex-string">7.36 mysql_hex_string()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-info">7.37 mysql_info()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-init">7.38 mysql_init()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-insert-id">7.39 mysql_insert_id()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-kill">7.40 mysql_kill()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-library-end">7.41 mysql_library_end()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-library-init">7.42 mysql_library_init()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-list-dbs">7.43 mysql_list_dbs()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-list-fields">7.44 mysql_list_fields()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-list-processes">7.45 mysql_list_processes()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-list-tables">7.46 mysql_list_tables()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-more-results">7.47 mysql_more_results()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-next-result">7.48 mysql_next_result()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-num-fields">7.49 mysql_num_fields()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-num-rows">7.50 mysql_num_rows()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-options">7.51 mysql_options()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-options4">7.52 mysql_options4()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-ping">7.53 mysql_ping()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-query">7.54 mysql_query()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-real-connect">7.55 mysql_real_connect()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-real-connect-dns-srv">7.56 mysql_real_connect_dns_srv()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-real-escape-string">7.57 mysql_real_escape_string()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-real-escape-string-quote">7.58 mysql_real_escape_string_quote()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-real-query">7.59 mysql_real_query()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-refresh">7.60 mysql_refresh()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-reload">7.61 mysql_reload()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-reset-connection">7.62 mysql_reset_connection()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-reset-server-public-key">7.63 mysql_reset_server_public_key()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-result-metadata">7.64 mysql_result_metadata()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-rollback">7.65 mysql_rollback()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-row-seek">7.66 mysql_row_seek()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-row-tell">7.67 mysql_row_tell()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-select-db">7.68 mysql_select_db()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-server-end">7.69 mysql_server_end()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-server-init">7.70 mysql_server_init()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-session-track-get-first">7.71 mysql_session_track_get_first()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-session-track-get-next">7.72 mysql_session_track_get_next()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-set-character-set">7.73 mysql_set_character_set()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-set-local-infile-default">7.74 mysql_set_local_infile_default()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-set-local-infile-handler">7.75 mysql_set_local_infile_handler()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-set-server-option">7.76 mysql_set_server_option()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-shutdown">7.77 mysql_shutdown()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-sqlstate">7.78 mysql_sqlstate()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-ssl-set">7.79 mysql_ssl_set()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-stat">7.80 mysql_stat()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-store-result">7.81 mysql_store_result()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-thread-id">7.82 mysql_thread_id()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-use-result">7.83 mysql_use_result()</a></span></dt><dt><span class="section"><a href="c-api-functions.html#mysql-warning-count">7.84 mysql_warning_count()</a></span></dt></dl></div><p>
      This section describes C API functions other than those used for
      prepared statements, the asynchronous interface, or the
      replication stream interface. For information about those, see
      <a class="xref" href="c-api-prepared-statement-functions.html" title="Chapter 11 C API Prepared Statement Function Descriptions">Chapter 11, <i>C API Prepared Statement Function Descriptions</i></a>,
      <a class="xref" href="c-api-asynchronous-functions.html" title="Chapter 15 C API Asynchronous Function Descriptions">Chapter 15, <i>C API Asynchronous Function Descriptions</i></a>, and
      <a class="xref" href="c-api-binary-log-functions.html" title="Chapter 21 C API Binary Log Function Descriptions">Chapter 21, <i>C API Binary Log Function Descriptions</i></a>.
    </p><p>
      In the descriptions here, a parameter or return value of
      <code class="literal">NULL</code> means <code class="literal">NULL</code> in the sense
      of the C programming language, not a MySQL <code class="literal">NULL</code>
      value.
    </p><p>
      Functions that return a value generally return a pointer or an
      integer. Unless specified otherwise, functions returning a pointer
      return a non-<code class="literal">NULL</code> value to indicate success or
      a <code class="literal">NULL</code> value to indicate an error, and
      functions returning an integer return zero to indicate success or
      nonzero to indicate an error. Note that <span class="quote">“<span class="quote">nonzero</span>”</span>
      means just that. Unless the function description says otherwise,
      do not test against a value other than zero:
    </p><pre class="programlisting">if (result)                   /* correct */
    ... error ...

if (result &lt; 0)               /* incorrect */
    ... error ...

if (result == -1)             /* incorrect */
    ... error ...
</pre><p>
      When a function returns an error, the
      <span class="bold"><strong>Errors</strong></span> subsection of the function
      description lists the possible types of errors. You can find out
      which of these occurred by calling
      <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a>. A string
      representation of the error may be obtained by calling
      <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a>.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-affected-rows"></a>7.1 mysql_affected_rows()</h2></div></div></div><a class="indexterm" name="idm46079471776768"></a><pre class="programlisting">uint64_t
mysql_affected_rows(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-affected-rows-description"></a>Description</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> may be
          called immediately after executing a statement with
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a>. It returns
          the number of rows changed, deleted, or inserted by the last
          statement if it was an <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_top"><code class="literal">UPDATE</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/delete.html" target="_top"><code class="literal">DELETE</code></a>, or
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a>. For
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a> statements,
          <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> works
          like <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>.
        </p><p>
          For <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_top"><code class="literal">UPDATE</code></a> statements, the
          affected-rows value by default is the number of rows actually
          changed. If you specify the
          <code class="literal">CLIENT_FOUND_ROWS</code> flag to
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> when
          connecting to <span class="command"><strong>mysqld</strong></span>, the affected-rows
          value is the number of rows <span class="quote">“<span class="quote">found</span>”</span>; that is,
          matched by the <code class="literal">WHERE</code> clause.
        </p><p>
          For <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/replace.html" target="_top"><code class="literal">REPLACE</code></a> statements, the
          affected-rows value is 2 if the new row replaced an old row,
          because in this case, one row was inserted after the duplicate
          was deleted.
        </p><p>
          For
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html" target="_top"><code class="literal">INSERT
          ... ON DUPLICATE KEY UPDATE</code></a> statements, the
          affected-rows value per row is 1 if the row is inserted as a
          new row, 2 if an existing row is updated, and 0 if an existing
          row is set to its current values. If you specify the
          <code class="literal">CLIENT_FOUND_ROWS</code> flag, the affected-rows
          value is 1 (not 0) if an existing row is set to its current
          values.
        </p><p>
          Following a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a> statement for
          a stored procedure,
          <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns
          the value that it would return for the last statement executed
          within the procedure, or <code class="literal">0</code> if that
          statement would return <code class="literal">-1</code>. Within the
          procedure, you can use
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_row-count" target="_top"><code class="literal">ROW_COUNT()</code></a> at the SQL level to
          obtain the affected-rows value for individual statements.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns
          a meaningful value for a wide range of statements. For
          details, see the description for
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_row-count" target="_top"><code class="literal">ROW_COUNT()</code></a> in
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html" target="_top">Information Functions</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-affected-rows-return-values"></a>Return Values</h3></div></div></div><p>
          An integer greater than zero indicates the number of rows
          affected or retrieved. Zero indicates that no records were
          updated for an <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_top"><code class="literal">UPDATE</code></a>
          statement, no rows matched the <code class="literal">WHERE</code> clause
          in the query or that no query has yet been executed. -1
          indicates that the query returned an error or that, for a
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a> query,
          <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> was
          called prior to calling
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>.
        </p><p>
          Because <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>
          returns an unsigned value, you can check for -1 by comparing
          the return value to <code class="literal">(uint64_t)-1</code> (or to
          <code class="literal">(uint64_t)~0</code>, which is equivalent).
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-affected-rows-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-affected-rows-example"></a>Example</h3></div></div></div><pre class="programlisting">char *stmt = "UPDATE products SET cost=cost*1.25
              WHERE group=10";
mysql_query(&amp;mysql,stmt);
printf("%ld products updated",
       (long) mysql_affected_rows(&amp;mysql));
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-autocommit"></a>7.2 mysql_autocommit()</h2></div></div></div><a class="indexterm" name="idm46079471732736"></a><pre class="programlisting">bool
mysql_autocommit(MYSQL *mysql,
                 bool mode)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-autocommit-description"></a>Description</h3></div></div></div><p>
          Sets autocommit mode on if <code class="literal">mode</code> is 1, off
          if <code class="literal">mode</code> is 0.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-autocommit-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-autocommit-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-bind-param"></a>7.3 mysql_bind_param()</h2></div></div></div><a class="indexterm" name="idm46079471724272"></a><a class="indexterm" name="idm46079471723264"></a><pre class="programlisting">bool
mysql_bind_param(MYSQL *mysql,
                 unsigned n_params,
                 MYSQL_BIND *bind,
                 const char **name)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-bind-param-description"></a>Description</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-bind-param" title="7.3 mysql_bind_param()"><code class="literal">mysql_bind_param()</code></a>, available
          as of MySQL 8.0.23, enables defining attributes that apply to
          the next query sent to the server. For discussion of the
          purpose and use of query attributes, see
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/query-attributes.html" target="_top">Query Attributes</a>.
        </p><p>
          Attributes defined with
          <a class="link" href="c-api-functions.html#mysql-bind-param" title="7.3 mysql_bind_param()"><code class="literal">mysql_bind_param()</code></a> apply to
          nonprepared statements executed in blocking fashion with
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, or in
          nonblocking fashion with
          <a class="link" href="c-api-asynchronous-functions.html#mysql-real-query-nonblocking" title="15.5 mysql_real_query_nonblocking()"><code class="literal">mysql_real_query_nonblocking()</code></a>.
          Attributes do not apply to prepared statements executed with
          <a class="link" href="c-api-prepared-statement-functions.html#mysql-stmt-execute" title="11.10 mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>.
        </p><p>
          If multiple <a class="link" href="c-api-functions.html#mysql-bind-param" title="7.3 mysql_bind_param()"><code class="literal">mysql_bind_param()</code></a>
          calls occur prior to query execution, only the last call
          applies.
        </p><p>
          Attributes defined with
          <a class="link" href="c-api-functions.html#mysql-bind-param" title="7.3 mysql_bind_param()"><code class="literal">mysql_bind_param()</code></a> apply only
          to the next query executed and are cleared thereafter. The
          <a class="link" href="c-api-functions.html#mysql-reset-connection" title="7.62 mysql_reset_connection()"><code class="literal">mysql_reset_connection()</code></a> and
          <a class="link" href="c-api-functions.html#mysql-change-user" title="7.4 mysql_change_user()"><code class="literal">mysql_change_user()</code></a> functions
          also clear any currently defined attributes.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-bind-param" title="7.3 mysql_bind_param()"><code class="literal">mysql_bind_param()</code></a> is backward
          compatible. For connections to older servers that do not
          support query attributes, no attributes are sent.
        </p><p>
          Arguments:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">mysql</code>: The connection handler returned
              from <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">n_params</code>: The number of attributes
              defined by the <code class="literal">bind</code> and
              <code class="literal">name</code> arguments.
            </p></li><li class="listitem"><p>
              <code class="literal">bind</code>: The address of an array of
              <code class="literal">MYSQL_BIND</code> structures. The array should
              contain <code class="literal">n_params</code> elements, one for each
              attribute.
            </p></li><li class="listitem"><p>
              <code class="literal">name</code>: The address of an array of
              character pointers, each pointing to a null-terminated
              string defining an attribute name. The array should
              contain <code class="literal">n_params</code> elements, one for each
              attribute. Query attribute names are transmitted using the
              character set indicated by the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_character_set_client" target="_top"><code class="literal">character_set_client</code></a>
              system variable.
            </p></li></ul></div><p>
          Each attribute has a name, a value, and a data type. The
          <code class="literal">name</code> argument defines attribute names, and
          the <code class="literal">bind</code> argument defines their values and
          types. For a description of the members of the
          <code class="literal">MYSQL_BIND</code> data structure used for the
          <code class="literal">bind</code> argument, see
          <a class="xref" href="c-api-prepared-statement-data-structures.html" title="Chapter 9 C API Prepared Statement Data Structures">Chapter 9, <i>C API Prepared Statement Data Structures</i></a>.
        </p><p>
          Each attribute type most be one of the
          <code class="literal">MYSQL_TYPE_<em class="replaceable"><code>xxx</code></em></code>
          types listed in
          <a class="xref" href="c-api-prepared-statement-data-structures.html#c-api-prepared-statement-type-codes-input" title="Table 9.1 Permissible Input Data Types for MYSQL_BIND Structures">Table 9.1, “Permissible Input Data Types for MYSQL_BIND Structures”</a>,
          except that <code class="literal">MYSQL_TYPE_BLOB</code> and
          <code class="literal">MYSQL_TYPE_TEXT</code> are not supported. If an
          unsupported type is specified for an attribute, a
          <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unsupported_param_type" target="_top"><code class="literal">CR_UNSUPPORTED_PARAM_TYPE</code></a>
          error occurs.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-bind-param-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-bind-param-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unsupported_param_type" target="_top"><code class="literal">CR_UNSUPPORTED_PARAM_TYPE</code></a>
            </p><p>
              The attribute data type is not supported.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-bind-param-example"></a>Example</h3></div></div></div><p>
          This example uses <code class="literal">mysql_bind_param()</code> to
          define string and integer query attributes, then retrieves and
          displays their values by name using the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/query-attribute-udfs.html#udf_mysql-query-attribute-string" target="_top"><code class="literal">mysql_query_attribute_string()</code></a>
          user-defined function:
        </p><pre class="programlisting">MYSQL_BIND bind[2];
const char *name[2] = { "name1", "name2" };
char *char_data = "char value";
int int_data = 3;
unsigned long length[2] = { 10, sizeof(int) };
int status;

/* clear and initialize attribute butffers */
memset(bind, 0, sizeof (bind));

bind[0].buffer_type = MYSQL_TYPE_STRING;
bind[0].buffer = char_data;
bind[0].length = &amp;length[0];
bind[0].is_null = 0;

bind[1].buffer_type = MYSQL_TYPE_LONG;
bind[1].buffer = (char *) &amp;int_data;
bind[1].length = &amp;length[1];
bind[1].is_null = 0;

/* bind attributes */
status = mysql_bind_param(&amp;mysql, 2, bind, name);
test_error(&amp;mysql, status);
const char *query =
"SELECT mysql_query_attribute_string('name1'),"
"       mysql_query_attribute_string('name2')";
status = mysql_real_query(&amp;mysql, query, strlen(query));
test_error(&amp;mysql, status);
MYSQL_RES *result = mysql_store_result(&amp;mysql);
MYSQL_ROW row = mysql_fetch_row(result);
unsigned long *lengths = mysql_fetch_lengths(result);
for(int i = 0; i &lt; 2; i++)
{
    printf("attribute %d: [%.*s]\n", i+1, (int) lengths[i],
           row[i] ? row[i] : "NULL");
}
mysql_free_result(result);
</pre><p>
          When executed, the code produces this result:
        </p><pre class="programlisting">attribute 1: [char value]
attribute 2: [3]
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-change-user"></a>7.4 mysql_change_user()</h2></div></div></div><a class="indexterm" name="idm46079471672016"></a><pre class="programlisting">bool
mysql_change_user(MYSQL *mysql,
                  const char *user,
                  const char *password,
                  const char *db)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-change-user-description"></a>Description</h3></div></div></div><p>
          Changes the user and causes the database specified by
          <code class="literal">db</code> to become the default (current) database
          on the connection specified by <code class="literal">mysql</code>. In
          subsequent queries, this database is the default for table
          references that include no explicit database specifier.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-change-user" title="7.4 mysql_change_user()"><code class="literal">mysql_change_user()</code></a> fails if
          the connected user cannot be authenticated or does not have
          permission to use the database. In this case, the user and
          database are not changed.
        </p><p>
          Pass a <code class="literal">db</code> parameter of
          <code class="literal">NULL</code> if you do not want to have a default
          database.
        </p><p>
          This function resets the session state as if one had done a
          new connect and reauthenticated. (See
          <a class="xref" href="c-api-auto-reconnect.html" title="Chapter 28 C API Automatic Reconnection Control">Chapter 28, <i>C API Automatic Reconnection Control</i></a>.) It always performs a
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/commit.html" target="_top"><code class="literal">ROLLBACK</code></a> of
          any active transactions, closes and drops all temporary
          tables, and unlocks all locked tables. It resets session
          system variables to the values of the corresponding global
          system variables, releases prepared statements, closes
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/handler.html" target="_top"><code class="literal">HANDLER</code></a> variables, and releases
          locks acquired with <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/locking-functions.html#function_get-lock" target="_top"><code class="literal">GET_LOCK()</code></a>.
          Clears any current query attributes defined as a result of
          calling <a class="link" href="c-api-functions.html#mysql-bind-param" title="7.3 mysql_bind_param()"><code class="literal">mysql_bind_param()</code></a>.
          These effects occur even if the user did not change.
        </p><p>
          To reset the connection state in a more lightweight manner
          without changing the user, use
          <a class="link" href="c-api-functions.html#mysql-reset-connection" title="7.62 mysql_reset_connection()"><code class="literal">mysql_reset_connection()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-change-user-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-change-user-errors"></a>Errors</h3></div></div></div><p>
          The same that you can get from
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, plus:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_unknown_com_error" target="_top"><code class="literal">ER_UNKNOWN_COM_ERROR</code></a>
            </p><p>
              The MySQL server does not implement this command (probably
              an old server).
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_access_denied_error" target="_top"><code class="literal">ER_ACCESS_DENIED_ERROR</code></a>
            </p><p>
              The user or password was wrong.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_bad_db_error" target="_top"><code class="literal">ER_BAD_DB_ERROR</code></a>
            </p><p>
              The database did not exist.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_dbaccess_denied_error" target="_top"><code class="literal">ER_DBACCESS_DENIED_ERROR</code></a>
            </p><p>
              The user did not have access rights to the database.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_wrong_db_name" target="_top"><code class="literal">ER_WRONG_DB_NAME</code></a>
            </p><p>
              The database name was too long.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-change-user-example"></a>Example</h3></div></div></div><pre class="programlisting">if (mysql_change_user(&amp;mysql, "user", "<em class="replaceable"><code>password</code></em>", "new_database"))
{
   fprintf(stderr, "Failed to change user.  Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-character-set-name"></a>7.5 mysql_character_set_name()</h2></div></div></div><a class="indexterm" name="idm46079471627072"></a><pre class="programlisting">const char *
mysql_character_set_name(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-character-set-name-description"></a>Description</h3></div></div></div><p>
          Returns the default character set name for the current
          connection.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-character-set-name-return-values"></a>Return Values</h3></div></div></div><p>
          The default character set name
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-character-set-name-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-close"></a>7.6 mysql_close()</h2></div></div></div><a class="indexterm" name="idm46079471619904"></a><pre class="programlisting">void
mysql_close(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-close-description"></a>Description</h3></div></div></div><p>
          Closes a previously opened connection.
          <a class="link" href="c-api-functions.html#mysql-close" title="7.6 mysql_close()"><code class="literal">mysql_close()</code></a> also deallocates
          the connection handler pointed to by <code class="literal">mysql</code>
          if the handler was allocated automatically by
          <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-connect" title="7.8 mysql_connect()"><code class="literal">mysql_connect()</code></a>. Do not use
          the handler after it has been closed.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-close-return-values"></a>Return Values</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-close-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-commit"></a>7.7 mysql_commit()</h2></div></div></div><a class="indexterm" name="idm46079471608928"></a><pre class="programlisting">bool
mysql_commit(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-commit-description"></a>Description</h3></div></div></div><p>
          Commits the current transaction.
        </p><p>
          The action of this function is subject to the value of the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_completion_type" target="_top"><code class="literal">completion_type</code></a> system
          variable. In particular, if the value of
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_completion_type" target="_top"><code class="literal">completion_type</code></a> is
          <code class="literal">RELEASE</code> (or 2), the server performs a
          release after terminating a transaction and closes the client
          connection. Call <a class="link" href="c-api-functions.html#mysql-close" title="7.6 mysql_close()"><code class="literal">mysql_close()</code></a>
          from the client program to close the connection from the
          client side.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-commit-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-commit-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-connect"></a>7.8 mysql_connect()</h2></div></div></div><a class="indexterm" name="idm46079471597152"></a><pre class="programlisting">MYSQL *
mysql_connect(MYSQL *mysql,
              const char *host,
              const char *user,
              const char *passwd)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-connect-description"></a>Description</h3></div></div></div><p>
          This function is deprecated. Use
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> instead.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-create-db"></a>7.9 mysql_create_db()</h2></div></div></div><a class="indexterm" name="idm46079471591120"></a><pre class="programlisting">int
mysql_create_db(MYSQL *mysql,
                const char *db)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-create-db-description"></a>Description</h3></div></div></div><p>
          Creates the database named by the <code class="literal">db</code>
          parameter.
        </p><p>
          This function is deprecated. Use
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/create-database.html" target="_top"><code class="literal">CREATE DATABASE</code></a> statement
          instead.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-create-db-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-create-db-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-create-db-example"></a>Example</h3></div></div></div><pre class="programlisting">if(mysql_create_db(&amp;mysql, "my_database"))
{
   fprintf(stderr, "Failed to create new database.  Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-data-seek"></a>7.10 mysql_data_seek()</h2></div></div></div><a class="indexterm" name="idm46079471568720"></a><pre class="programlisting">void
mysql_data_seek(MYSQL_RES *result,
                uint64_t offset)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-data-seek-description"></a>Description</h3></div></div></div><p>
          Seeks to an arbitrary row in a query result set. The
          <code class="literal">offset</code> value is a row number. Specify a
          value in the range from <code class="literal">0</code> to
          <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows(result)-1</code></a>.
        </p><p>
          This function requires that the result set structure contains
          the entire result of the query, so
          <a class="link" href="c-api-functions.html#mysql-data-seek" title="7.10 mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a> may be used
          only in conjunction with
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, not with
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-data-seek-return-values"></a>Return Values</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-data-seek-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-debug"></a>7.11 mysql_debug()</h2></div></div></div><a class="indexterm" name="idm46079471555568"></a><pre class="programlisting">void
mysql_debug(const char *debug)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-debug-description"></a>Description</h3></div></div></div><p>
          Does a <code class="literal">DBUG_PUSH</code> with the given string.
          <a class="link" href="c-api-functions.html#mysql-debug" title="7.11 mysql_debug()"><code class="literal">mysql_debug()</code></a> uses the Fred
          Fish debug library. To use this function, you must compile the
          client library to support debugging. See
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/dbug-package.html" target="_top">The DBUG Package</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-debug-return-values"></a>Return Values</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-debug-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-debug-example"></a>Example</h3></div></div></div><p>
          The call shown here causes the client library to generate a
          trace file in <code class="filename">/tmp/client.trace</code> on the
          client machine:
        </p><pre class="programlisting">mysql_debug("d:t:O,/tmp/client.trace");
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-drop-db"></a>7.12 mysql_drop_db()</h2></div></div></div><a class="indexterm" name="idm46079471543040"></a><pre class="programlisting">int
mysql_drop_db(MYSQL *mysql,
              const char *db)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-drop-db-description"></a>Description</h3></div></div></div><p>
          Drops the database named by the <code class="literal">db</code>
          parameter.
        </p><p>
          This function is deprecated. Use
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/drop-database.html" target="_top"><code class="literal">DROP DATABASE</code></a> statement
          instead.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-drop-db-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-drop-db-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-drop-db-example"></a>Example</h3></div></div></div><pre class="programlisting">if(mysql_drop_db(&amp;mysql, "my_database"))
  fprintf(stderr, "Failed to drop the database: Error: %s\n",
          mysql_error(&amp;mysql));
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-dump-debug-info"></a>7.13 mysql_dump_debug_info()</h2></div></div></div><a class="indexterm" name="idm46079471520656"></a><pre class="programlisting">int
mysql_dump_debug_info(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-dump-debug-info-description"></a>Description</h3></div></div></div><p>
          Instructs the server to write debugging information to the
          error log. The connected user must have the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_super" target="_top"><code class="literal">SUPER</code></a> privilege.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-dump-debug-info-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-dump-debug-info-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-eof"></a>7.14 mysql_eof()</h2></div></div></div><a class="indexterm" name="idm46079471502240"></a><pre class="programlisting">bool
mysql_eof(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-eof-description"></a>Description</h3></div></div></div><p>
          This function is deprecated.
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a> may be used
          instead.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a> determines whether
          the last row of a result set has been read.
        </p><p>
          If you acquire a result set from a successful call to
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, the
          client receives the entire set in one operation. In this case,
          a <code class="literal">NULL</code> return from
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> always means
          the end of the result set has been reached and it is
          unnecessary to call
          <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a>. When used with
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a> always returns
          true.
        </p><p>
          On the other hand, if you use
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> to initiate
          a result set retrieval, the rows of the set are obtained from
          the server one by one as you call
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> repeatedly.
          Because an error may occur on the connection during this
          process, a <code class="literal">NULL</code> return value from
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> does not
          necessarily mean the end of the result set was reached
          normally. In this case, you can use
          <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a> to determine what
          happened. <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a> returns
          a nonzero value if the end of the result set was reached and
          zero if an error occurred.
        </p><p>
          Historically, <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a>
          predates the standard MySQL error functions
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> and
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a>. Because those
          error functions provide the same information, their use is
          preferred over <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a>,
          which is deprecated. (In fact, they provide more information,
          because <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a> returns
          only a boolean value whereas the error functions indicate a
          reason for the error when one occurs.)
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-eof-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if the end of the result set has
          been reached.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-eof-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-eof-example"></a>Example</h3></div></div></div><p>
          The following example shows how you might use
          <a class="link" href="c-api-functions.html#mysql-eof" title="7.14 mysql_eof()"><code class="literal">mysql_eof()</code></a>:
        </p><pre class="programlisting">mysql_query(&amp;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&amp;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(!mysql_eof(result))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
}
</pre><p>
          However, you can achieve the same effect with the standard
          MySQL error functions:
        </p><pre class="programlisting">mysql_query(&amp;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&amp;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(mysql_errno(&amp;mysql))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-errno"></a>7.15 mysql_errno()</h2></div></div></div><a class="indexterm" name="idm46079471466288"></a><pre class="programlisting">unsigned int
mysql_errno(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-errno-description"></a>Description</h3></div></div></div><p>
          For the connection specified by <code class="literal">mysql</code>,
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> returns the
          error code for the most recently invoked API function that can
          succeed or fail. A return value of zero means that no error
          occurred. Client error message numbers are listed in the MySQL
          <code class="filename">errmsg.h</code> header file. Server error
          message numbers are listed in
          <code class="filename">mysqld_error.h</code>. Errors also are listed at
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/error-handling.html" target="_top">Error Messages and Common Problems</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            Some functions such as
            <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> do not set
            <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> if they
            succeed. A rule of thumb is that all functions that have to
            ask the server for information reset
            <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> if they
            succeed.
          </p></div><p>
          MySQL-specific error numbers returned by
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> differ from
          SQLSTATE values returned by
          <a class="link" href="c-api-functions.html#mysql-sqlstate" title="7.78 mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a>. For example,
          the <span class="command"><strong>mysql</strong></span> client program displays errors
          using the following format, where <code class="literal">1146</code> is
          the <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> value and
          <code class="literal">'42S02'</code> is the corresponding
          <a class="link" href="c-api-functions.html#mysql-sqlstate" title="7.78 mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> value:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>SELECT * FROM no_such_table;</code></strong>
ERROR 1146 (42S02): Table 'test.no_such_table' doesn't exist
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-errno-return-values"></a>Return Values</h3></div></div></div><p>
          An error code value for the last
          <code class="literal">mysql_<em class="replaceable"><code>xxx</code></em>()</code>
          call, if it failed. zero means no error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-errno-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-error"></a>7.16 mysql_error()</h2></div></div></div><a class="indexterm" name="idm46079471442272"></a><pre class="programlisting">const char *
mysql_error(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-error-description"></a>Description</h3></div></div></div><p>
          For the connection specified by <code class="literal">mysql</code>,
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a> returns a
          null-terminated string containing the error message for the
          most recently invoked API function that failed. If a function
          did not fail, the return value of
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a> may be the
          previous error or an empty string to indicate no error.
        </p><p>
          A rule of thumb is that all functions that have to ask the
          server for information reset
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a> if they succeed.
        </p><p>
          For functions that reset
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a>, either of these
          two tests can be used to check for an error:
        </p><pre class="programlisting">if(*mysql_error(&amp;mysql))
{
  // an error occurred
}

if(mysql_error(&amp;mysql)[0])
{
  // an error occurred
}
</pre><p>
          The language of the client error messages may be changed by
          recompiling the MySQL client library. You can choose error
          messages in several different languages. See
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/error-message-language.html" target="_top">Setting the Error Message Language</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-error-return-values"></a>Return Values</h3></div></div></div><p>
          A null-terminated character string that describes the error.
          An empty string if no error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-error-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-escape-string"></a>7.17 mysql_escape_string()</h2></div></div></div><a class="indexterm" name="idm46079471426800"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          Do not use this function.
          <a class="link" href="c-api-functions.html#mysql-escape-string" title="7.17 mysql_escape_string()"><code class="literal">mysql_escape_string()</code></a> does not
          have arguments that enable it to respect the current character
          set or the quoting context. Use
          <a class="link" href="c-api-functions.html#mysql-real-escape-string-quote" title="7.58 mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
          instead.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-fetch-field"></a>7.18 mysql_fetch_field()</h2></div></div></div><a class="indexterm" name="idm46079471421888"></a><pre class="programlisting">MYSQL_FIELD *
mysql_fetch_field(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-field-description"></a>Description</h3></div></div></div><p>
          Returns the definition of one column of a result set as a
          <code class="literal">MYSQL_FIELD</code> structure. Call this function
          repeatedly to retrieve information about all columns in the
          result set.
          <a class="link" href="c-api-functions.html#mysql-fetch-field" title="7.18 mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> returns
          <code class="literal">NULL</code> when no more fields are left.
        </p><p>
          For metadata-optional connections, this function returns
          <code class="literal">NULL</code> when the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_resultset_metadata" target="_top"><code class="literal">resultset_metadata</code></a> system
          variable is set to <code class="literal">NONE</code>. To check whether a
          result set has metadata, use the
          <a class="link" href="c-api-functions.html#mysql-result-metadata" title="7.64 mysql_result_metadata()"><code class="literal">mysql_result_metadata()</code></a>
          function. For details about managing result set metadata
          transfer, see <a class="xref" href="c-api-optional-metadata.html" title="Chapter 27 C API Optional Result Set Metadata">Chapter 27, <i>C API Optional Result Set Metadata</i></a>.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-fetch-field" title="7.18 mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> is reset
          to return information about the first field each time you
          execute a new <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a> query. The
          field returned by
          <a class="link" href="c-api-functions.html#mysql-fetch-field" title="7.18 mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> is also
          affected by calls to
          <a class="link" href="c-api-functions.html#mysql-field-seek" title="7.24 mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>.
        </p><p>
          If you've called <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a>
          to perform a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a> on a table
          but have not called
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, MySQL
          returns the default blob length (8KB) if you call
          <a class="link" href="c-api-functions.html#mysql-fetch-field" title="7.18 mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> to ask for
          the length of a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/blob.html" target="_top"><code class="literal">BLOB</code></a> field.
          (The 8KB size is chosen because MySQL does not know the
          maximum length for the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/blob.html" target="_top"><code class="literal">BLOB</code></a>.
          This should be made configurable sometime.) Once you've
          retrieved the result set,
          <code class="literal">field-&gt;max_length</code> contains the length of
          the largest value for this column in the specific query.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-field-return-values"></a>Return Values</h3></div></div></div><p>
          The <code class="literal">MYSQL_FIELD</code> structure for the current
          column. <code class="literal">NULL</code> if no columns are left or the
          result set has no metadata.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-field-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-field-example"></a>Example</h3></div></div></div><pre class="programlisting">MYSQL_FIELD *field;

while((field = mysql_fetch_field(result)))
{
    printf("field name %s\n", field-&gt;name);
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-fetch-field-direct"></a>7.19 mysql_fetch_field_direct()</h2></div></div></div><a class="indexterm" name="idm46079471392496"></a><pre class="programlisting">MYSQL_FIELD *
mysql_fetch_field_direct(MYSQL_RES *result,
                         unsigned int fieldnr)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-field-direct-description"></a>Description</h3></div></div></div><p>
          Given a field number <code class="literal">fieldnr</code> for a column
          within a result set, returns that column's field definition as
          a <code class="literal">MYSQL_FIELD</code> structure. Use this function
          to retrieve the definition for an arbitrary column. Specify a
          value for <code class="literal">fieldnr</code> in the range from 0 to
          <a class="link" href="c-api-functions.html#mysql-num-fields" title="7.49 mysql_num_fields()"><code class="literal">mysql_num_fields(result)-1</code></a>.
        </p><p>
          For metadata-optional connections, this function returns
          <code class="literal">NULL</code> when the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_resultset_metadata" target="_top"><code class="literal">resultset_metadata</code></a> system
          variable is set to <code class="literal">NONE</code>. To check whether a
          result set has metadata, use the
          <a class="link" href="c-api-functions.html#mysql-result-metadata" title="7.64 mysql_result_metadata()"><code class="literal">mysql_result_metadata()</code></a>
          function. For details about managing result set metadata
          transfer, see <a class="xref" href="c-api-optional-metadata.html" title="Chapter 27 C API Optional Result Set Metadata">Chapter 27, <i>C API Optional Result Set Metadata</i></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-field-direct-return-values"></a>Return Values</h3></div></div></div><p>
          The <code class="literal">MYSQL_FIELD</code> structure for the specified
          column. <code class="literal">NULL</code> if the result set has no
          metadata.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-field-direct-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-field-direct-example"></a>Example</h3></div></div></div><pre class="programlisting">unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *field;

num_fields = mysql_num_fields(result);
for(i = 0; i &lt; num_fields; i++)
{
    field = mysql_fetch_field_direct(result, i);
    printf("Field %u is %s\n", i, field-&gt;name);
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-fetch-fields"></a>7.20 mysql_fetch_fields()</h2></div></div></div><a class="indexterm" name="idm46079471374048"></a><pre class="programlisting">MYSQL_FIELD *
mysql_fetch_fields(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-fields-description"></a>Description</h3></div></div></div><p>
          Returns an array of all <code class="literal">MYSQL_FIELD</code>
          structures for a result set. Each structure provides the field
          definition for one column of the result set.
        </p><p>
          For metadata-optional connections, this function returns
          <code class="literal">NULL</code> when the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_resultset_metadata" target="_top"><code class="literal">resultset_metadata</code></a> system
          variable is set to <code class="literal">NONE</code>. To check whether a
          result set has metadata, use the
          <a class="link" href="c-api-functions.html#mysql-result-metadata" title="7.64 mysql_result_metadata()"><code class="literal">mysql_result_metadata()</code></a>
          function. For details about managing result set metadata
          transfer, see <a class="xref" href="c-api-optional-metadata.html" title="Chapter 27 C API Optional Result Set Metadata">Chapter 27, <i>C API Optional Result Set Metadata</i></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-fields-return-values"></a>Return Values</h3></div></div></div><p>
          An array of <code class="literal">MYSQL_FIELD</code> structures for all
          columns of a result set. <code class="literal">NULL</code> if the result
          set has no metadata.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-fields-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-fields-example"></a>Example</h3></div></div></div><pre class="programlisting">unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *fields;

num_fields = mysql_num_fields(result);
fields = mysql_fetch_fields(result);
for(i = 0; i &lt; num_fields; i++)
{
   printf("Field %u is %s\n", i, fields[i].name);
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-fetch-lengths"></a>7.21 mysql_fetch_lengths()</h2></div></div></div><a class="indexterm" name="idm46079471358240"></a><pre class="programlisting">unsigned long *
mysql_fetch_lengths(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-lengths-description"></a>Description</h3></div></div></div><p>
          Returns the lengths of the columns of the current row within a
          result set. If you plan to copy field values, this length
          information is also useful for optimization, because you can
          avoid calling <code class="literal">strlen()</code>. In addition, if the
          result set contains binary data, you
          <span class="bold"><strong>must</strong></span> use this function to
          determine the size of the data, because
          <code class="literal">strlen()</code> returns incorrect results for any
          field containing null characters.
        </p><p>
          The length for empty columns and for columns containing
          <code class="literal">NULL</code> values is zero. To see how to
          distinguish these two cases, see the description for
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-lengths-return-values"></a>Return Values</h3></div></div></div><p>
          An array of unsigned long integers representing the size of
          each column (not including any terminating null bytes).
          <code class="literal">NULL</code> if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-lengths-errors"></a>Errors</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-fetch-lengths" title="7.21 mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a> is valid
          only for the current row of the result set. It returns
          <code class="literal">NULL</code> if you call it before calling
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> or after
          retrieving all rows in the result.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-lengths-example"></a>Example</h3></div></div></div><pre class="programlisting">MYSQL_ROW row;
unsigned long *lengths;
unsigned int num_fields;
unsigned int i;

row = mysql_fetch_row(result);
if (row)
{
    num_fields = mysql_num_fields(result);
    lengths = mysql_fetch_lengths(result);
    for(i = 0; i &lt; num_fields; i++)
    {
         printf("Column %u is %lu bytes in length.\n",
                i, lengths[i]);
    }
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-fetch-row"></a>7.22 mysql_fetch_row()</h2></div></div></div><a class="indexterm" name="idm46079471340640"></a><pre class="programlisting">MYSQL_ROW
mysql_fetch_row(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-row-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> is a
            synchronous function. Its asynchronous counterpart is
            <a class="link" href="c-api-asynchronous-functions.html#mysql-fetch-row-nonblocking" title="15.1 mysql_fetch_row_nonblocking()"><code class="literal">mysql_fetch_row_nonblocking()</code></a>,
            for use by applications that require asynchronous
            communication with the server. See
            <a class="xref" href="c-api-asynchronous-interface.html" title="Chapter 12 C API Asynchronous Interface">Chapter 12, <i>C API Asynchronous Interface</i></a>.
          </p></div><p>
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> retrieves
          the next row of a result set:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              When used after
              <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
              <a class="link" href="c-api-asynchronous-functions.html#mysql-store-result-nonblocking" title="15.6 mysql_store_result_nonblocking()"><code class="literal">mysql_store_result_nonblocking()</code></a>,
              <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> returns
              <code class="literal">NULL</code> if there are no more rows to
              retrieve.
            </p></li><li class="listitem"><p>
              When used after
              <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
              <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> returns
              <code class="literal">NULL</code> if there are no more rows to
              retrieve or an error occurred.
            </p></li></ul></div><p>
          The number of values in the row is given by
          <a class="link" href="c-api-functions.html#mysql-num-fields" title="7.49 mysql_num_fields()"><code class="literal">mysql_num_fields(result)</code></a>. If
          <code class="literal">row</code> holds the return value from a call to
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>, pointers to
          the values are accessed as <code class="literal">row[0]</code> to
          <code class="literal">row[mysql_num_fields(result)-1]</code>.
          <code class="literal">NULL</code> values in the row are indicated by
          <code class="literal">NULL</code> pointers.
        </p><p>
          The lengths of the field values in the row may be obtained by
          calling <a class="link" href="c-api-functions.html#mysql-fetch-lengths" title="7.21 mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a>.
          Empty fields and fields containing <code class="literal">NULL</code>
          both have length 0; you can distinguish these by checking the
          pointer for the field value. If the pointer is
          <code class="literal">NULL</code>, the field is <code class="literal">NULL</code>;
          otherwise, the field is empty.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-row-return-values"></a>Return Values</h3></div></div></div><p>
          A <code class="literal">MYSQL_ROW</code> structure for the next row, or
          <code class="literal">NULL</code>. The meaning of a
          <code class="literal">NULL</code> return depends on which function was
          called preceding
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              When used after
              <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
              <a class="link" href="c-api-asynchronous-functions.html#mysql-store-result-nonblocking" title="15.6 mysql_store_result_nonblocking()"><code class="literal">mysql_store_result_nonblocking()</code></a>,
              <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> returns
              <code class="literal">NULL</code> if there are no more rows to
              retrieve.
            </p></li><li class="listitem"><p>
              When used after
              <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
              <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> returns
              <code class="literal">NULL</code> if there are no more rows to
              retrieve or an error occurred. To determine whether an
              error occurred, check whether
              <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a> returns a
              nonempty string or
              <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> returns
              nonzero.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-row-errors"></a>Errors</h3></div></div></div><p>
          Errors are not reset between calls to
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-fetch-row-example"></a>Example</h3></div></div></div><pre class="programlisting">MYSQL_ROW row;
unsigned int num_fields;
unsigned int i;

num_fields = mysql_num_fields(result);
while ((row = mysql_fetch_row(result)))
{
   unsigned long *lengths;
   lengths = mysql_fetch_lengths(result);
   for(i = 0; i &lt; num_fields; i++)
   {
       printf("[%.*s] ", (int) lengths[i],
              row[i] ? row[i] : "NULL");
   }
   printf("\n");
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-field-count"></a>7.23 mysql_field_count()</h2></div></div></div><a class="indexterm" name="idm46079471288800"></a><pre class="programlisting">unsigned int
mysql_field_count(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-count-description"></a>Description</h3></div></div></div><p>
          Returns the number of columns for the most recent query on the
          connection.
        </p><p>
          The normal use of this function is when
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returned
          <code class="literal">NULL</code> (and thus you have no result set
          pointer). In this case, you can call
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to
          determine whether
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> should
          have produced a nonempty result. This enables the client
          program to take proper action without knowing whether the
          query was a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a> (or
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a>-like) statement. The
          example shown here illustrates how this may be done.
        </p><p>
          See <a class="xref" href="c-api-common-issues.html#null-mysql-store-result" title="29.1 Why mysql_store_result() Sometimes Returns NULL After mysql_query() Returns Success">Section 29.1, “Why mysql_store_result() Sometimes Returns NULL After mysql_query()
        Returns Success”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-count-return-values"></a>Return Values</h3></div></div></div><p>
          An unsigned integer representing the number of columns in a
          result set.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-count-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-count-example"></a>Example</h3></div></div></div><pre class="programlisting">MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&amp;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&amp;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if(mysql_field_count(&amp;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&amp;mysql);
        }
        else // mysql_store_result() should have returned data
        {
            fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
        }
    }
}
</pre><p>
          An alternative is to replace the
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count(&amp;mysql)</code></a>
          call with
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno(&amp;mysql)</code></a>. In
          this case, you are checking directly for an error from
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> rather
          than inferring from the value of
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count()</code></a> whether
          the statement was a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a>.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-field-seek"></a>7.24 mysql_field_seek()</h2></div></div></div><a class="indexterm" name="idm46079471261296"></a><pre class="programlisting">MYSQL_FIELD_OFFSET
mysql_field_seek(MYSQL_RES *result,
                 MYSQL_FIELD_OFFSET offset)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-seek-description"></a>Description</h3></div></div></div><p>
          Sets the field cursor to the given offset. The next call to
          <a class="link" href="c-api-functions.html#mysql-fetch-field" title="7.18 mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> retrieves
          the field definition of the column associated with that
          offset.
        </p><p>
          To seek to the beginning of a row, pass an
          <code class="literal">offset</code> value of zero.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-seek-return-values"></a>Return Values</h3></div></div></div><p>
          The previous value of the field cursor.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-seek-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-field-tell"></a>7.25 mysql_field_tell()</h2></div></div></div><a class="indexterm" name="idm46079471250480"></a><pre class="programlisting">MYSQL_FIELD_OFFSET
mysql_field_tell(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-tell-description"></a>Description</h3></div></div></div><p>
          Returns the position of the field cursor used for the last
          <a class="link" href="c-api-functions.html#mysql-fetch-field" title="7.18 mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>. This
          value can be used as an argument to
          <a class="link" href="c-api-functions.html#mysql-field-seek" title="7.24 mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-tell-return-values"></a>Return Values</h3></div></div></div><p>
          The current offset of the field cursor.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-field-tell-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-free-result"></a>7.26 mysql_free_result()</h2></div></div></div><a class="indexterm" name="idm46079471239552"></a><pre class="programlisting">void
mysql_free_result(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-free-result-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a> is a
            synchronous function. Its asynchronous counterpart is
            <a class="link" href="c-api-asynchronous-functions.html#mysql-free-result-nonblocking" title="15.2 mysql_free_result_nonblocking()"><code class="literal">mysql_free_result_nonblocking()</code></a>,
            for use by applications that require asynchronous
            communication with the server. See
            <a class="xref" href="c-api-asynchronous-interface.html" title="Chapter 12 C API Asynchronous Interface">Chapter 12, <i>C API Asynchronous Interface</i></a>.
          </p></div><p>
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a> frees the
          memory allocated for a result set by
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-list-dbs" title="7.43 mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a>, and so
          forth. When you are done with a result set, you must free the
          memory it uses by calling
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
        </p><p>
          Do not attempt to access a result set after freeing it.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-free-result-return-values"></a>Return Values</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-free-result-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-character-set-info"></a>7.27 mysql_get_character_set_info()</h2></div></div></div><a class="indexterm" name="idm46079471220288"></a><pre class="programlisting">void
mysql_get_character_set_info(MYSQL *mysql,
                             MY_CHARSET_INFO *cs)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-character-set-info-description"></a>Description</h3></div></div></div><p>
          This function provides information about the default client
          character set. The default character set may be changed with
          the <a class="link" href="c-api-functions.html#mysql-set-character-set" title="7.73 mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
          function.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-character-set-info-example"></a>Example</h3></div></div></div><p>
          This example shows the fields that are available in the
          <code class="literal">MY_CHARSET_INFO</code> structure:
        </p><pre class="programlisting">if (!mysql_set_character_set(&amp;mysql, "utf8"))
{
    MY_CHARSET_INFO cs;
    mysql_get_character_set_info(&amp;mysql, &amp;cs);
    printf("character set information:\n");
    printf("character set+collation number: %d\n", cs.number);
    printf("character set name: %s\n", cs.name);
    printf("collation name: %s\n", cs.csname);
    printf("comment: %s\n", cs.comment);
    printf("directory: %s\n", cs.dir);
    printf("multi byte character min. length: %d\n", cs.mbminlen);
    printf("multi byte character max. length: %d\n", cs.mbmaxlen);
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-client-info"></a>7.28 mysql_get_client_info()</h2></div></div></div><a class="indexterm" name="idm46079471208976"></a><pre class="programlisting">const char *
mysql_get_client_info(void)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-client-info-description"></a>Description</h3></div></div></div><p>
          Returns a string that represents the MySQL client library
          version (for example, <code class="literal">"8.0.24"</code>).
        </p><p>
          The function value is the version of MySQL that provides the
          client library. For more information, see
          <a class="xref" href="c-api-building-running-clients.html#c-api-server-client-versions" title="4.5 C API Server Version and Client Library Version">Section 4.5, “C API Server Version and Client Library Version”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-client-info-return-values"></a>Return Values</h3></div></div></div><p>
          A character string that represents the MySQL client library
          version.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-client-info-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-client-version"></a>7.29 mysql_get_client_version()</h2></div></div></div><a class="indexterm" name="idm46079471198496"></a><pre class="programlisting">unsigned long
mysql_get_client_version(void)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-client-version-description"></a>Description</h3></div></div></div><p>
          Returns an integer that represents the MySQL client library
          version. The value has the format
          <em class="replaceable"><code>XYYZZ</code></em> where
          <em class="replaceable"><code>X</code></em> is the major version,
          <em class="replaceable"><code>YY</code></em> is the release level (or minor
          version), and <em class="replaceable"><code>ZZ</code></em> is the sub-version
          within the release level:
        </p><pre class="programlisting">major_version*10000 + release_level*100 + sub_version
</pre><p>
          For example, <code class="literal">"8.0.24"</code> is
          returned as <code class="literal">80024</code>.
        </p><p>
          The function value is the version of MySQL that provides the
          client library. For more information, see
          <a class="xref" href="c-api-building-running-clients.html#c-api-server-client-versions" title="4.5 C API Server Version and Client Library Version">Section 4.5, “C API Server Version and Client Library Version”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-client-version-return-values"></a>Return Values</h3></div></div></div><p>
          An integer that represents the MySQL client library version.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-client-version-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-host-info"></a>7.30 mysql_get_host_info()</h2></div></div></div><a class="indexterm" name="idm46079471183952"></a><pre class="programlisting">const char *
mysql_get_host_info(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-host-info-description"></a>Description</h3></div></div></div><p>
          Returns a string describing the type of connection in use,
          including the server host name.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-host-info-return-values"></a>Return Values</h3></div></div></div><p>
          A character string representing the server host name and the
          connection type.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-host-info-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-option"></a>7.31 mysql_get_option()</h2></div></div></div><a class="indexterm" name="idm46079471175472"></a><pre class="programlisting">int
mysql_get_option(MYSQL *mysql,
                 enum mysql_option option,
                 const void *arg)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-option-description"></a>Description</h3></div></div></div><p>
          Returns the current value of an option settable using
          <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a>. The value
          should be treated as read only.
        </p><p>
          The <code class="literal">option</code> argument is the option for which
          you want its value. The <code class="literal">arg</code> argument is a
          pointer to a variable in which to store the option value.
          <code class="literal">arg</code> must be a pointer to a variable of the
          type appropriate for the <code class="literal">option</code> argument.
          The following table shows which variable type to use for each
          <code class="literal">option</code> value.
        </p><p>
          For <code class="literal">MYSQL_OPT_MAX_ALLOWED_PACKET</code>, it is
          possible to set a session or global maximum buffer size,
          depending on whether the <code class="literal">mysql</code> argument to
          <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> is
          non-<code class="literal">NULL</code> or <code class="literal">NULL</code>,
          <a class="link" href="c-api-functions.html#mysql-get-option" title="7.31 mysql_get_option()"><code class="literal">mysql_get_option()</code></a> similarly
          returns the session or global value depending on its
          <code class="literal">mysql</code> argument.
        </p><div class="informaltable"><table summary="Options for mysql_get_option()."><col width="20%"><col width="80%"><thead><tr>
              <th><code class="literal">arg</code> Type</th>
              <th>Applicable <code class="literal">option</code> Values</th>
            </tr></thead><tbody><tr>
              <td><code class="literal">unsigned int</code></td>
              <td><code class="literal">MYSQL_OPT_CONNECT_TIMEOUT</code>,
                <code class="literal">MYSQL_OPT_PROTOCOL</code>,
                <code class="literal">MYSQL_OPT_READ_TIMEOUT</code>,
                <code class="literal">MYSQL_OPT_RETRY_COUNT</code>,
                <code class="literal">MYSQL_OPT_SSL_FIPS_MODE</code>,
                <code class="literal">MYSQL_OPT_SSL_MODE</code>,
                <code class="literal">MYSQL_OPT_WRITE_TIMEOUT</code>,
                <code class="literal">MYSQL_OPT_ZSTD_COMPRESSION_LEVEL</code></td>
            </tr><tr>
              <td><code class="literal">unsigned long</code></td>
              <td><code class="literal">MYSQL_OPT_MAX_ALLOWED_PACKET</code>,
                <code class="literal">MYSQL_OPT_NET_BUFFER_LENGTH</code></td>
            </tr><tr>
              <td><code class="literal">bool</code></td>
              <td><code class="literal">MYSQL_ENABLE_CLEARTEXT_PLUGIN</code>,
                <code class="literal">MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS</code>,
                <code class="literal">MYSQL_OPT_GET_SERVER_PUBLIC_KEY</code>,
                <code class="literal">MYSQL_OPT_LOCAL_INFILE</code>,
                <code class="literal">MYSQL_OPT_OPTIONAL_RESULTSET_METADATA</code>,
                <code class="literal">MYSQL_OPT_RECONNECT</code>,
                <code class="literal">MYSQL_REPORT_DATA_TRUNCATION</code></td>
            </tr><tr>
              <td><code class="literal">const char *</code></td>
              <td><code class="literal">MYSQL_DEFAULT_AUTH</code>,
                <code class="literal">MYSQL_OPT_BIND</code>,
                <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code>,
                <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code>,
                <code class="literal">MYSQL_OPT_SSL_CA</code>,
                <code class="literal">MYSQL_OPT_SSL_CAPATH</code>,
                <code class="literal">MYSQL_OPT_SSL_CERT</code>,
                <code class="literal">MYSQL_OPT_SSL_CIPHER</code>,
                <code class="literal">MYSQL_OPT_SSL_CRL</code>,
                <code class="literal">MYSQL_OPT_SSL_CRLPATH</code>,
                <code class="literal">MYSQL_OPT_SSL_KEY</code>,
                <code class="literal">MYSQL_OPT_TLS_CIPHERSUITES</code>,
                <code class="literal">MYSQL_OPT_TLS_VERSION</code>,
                <code class="literal">MYSQL_PLUGIN_DIR</code>,
                <code class="literal">MYSQL_READ_DEFAULT_FILE</code>,
                <code class="literal">MYSQL_READ_DEFAULT_GROUP</code>,
                <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code>,
                <code class="literal">MYSQL_SET_CHARSET_DIR</code>,
                <code class="literal">MYSQL_SET_CHARSET_NAME</code>,
                <code class="literal">MYSQL_SHARED_MEMORY_BASE_NAME</code></td>
            </tr><tr>
              <td>argument not used</td>
              <td><code class="literal">MYSQL_OPT_COMPRESS</code></td>
            </tr><tr>
              <td>cannot be queried (error is returned)</td>
              <td><code class="literal">MYSQL_INIT_COMMAND</code>,
                <code class="literal">MYSQL_OPT_CONNECT_ATTR_DELETE</code>,
                <code class="literal">MYSQL_OPT_CONNECT_ATTR_RESET</code>,
                <code class="literal">MYSQL_OPT_NAMED_PIPE</code></td>
            </tr></tbody></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-option-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred; this occurs
          for <code class="literal">option</code> values that cannot be queried.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-option-example"></a>Example</h3></div></div></div><p>
          The following call tests the
          <code class="literal">MYSQL_OPT_RECONNECT</code> option. After the call
          returns successfully, the value of
          <code class="literal">reconnect</code> is true or false to indicate
          whether automatic reconnection is enabled.
        </p><pre class="programlisting">bool reconnect;

if (mysql_get_option(mysql, MYSQL_OPT_RECONNECT, &amp;reconnect))
  fprintf(stderr, "mysql_get_option() failed\n");
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-proto-info"></a>7.32 mysql_get_proto_info()</h2></div></div></div><a class="indexterm" name="idm46079471101712"></a><pre class="programlisting">unsigned int
mysql_get_proto_info(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-proto-info-description"></a>Description</h3></div></div></div><p>
          Returns the protocol version used by current connection.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-proto-info-return-values"></a>Return Values</h3></div></div></div><p>
          An unsigned integer representing the protocol version used by
          the current connection.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-proto-info-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-server-info"></a>7.33 mysql_get_server_info()</h2></div></div></div><a class="indexterm" name="idm46079471093376"></a><pre class="programlisting">const char *
mysql_get_server_info(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-server-info-description"></a>Description</h3></div></div></div><p>
          Returns a string that represents the MySQL server version (for
          example, <code class="literal">"8.0.24"</code>).
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-server-info-return-values"></a>Return Values</h3></div></div></div><p>
          A character string that represents the MySQL server version.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-server-info-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-server-version"></a>7.34 mysql_get_server_version()</h2></div></div></div><a class="indexterm" name="idm46079471084288"></a><pre class="programlisting">unsigned long
mysql_get_server_version(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-server-version-description"></a>Description</h3></div></div></div><p>
          Returns an integer that represents the MySQL server version.
          The value has the format <em class="replaceable"><code>XYYZZ</code></em>
          where <em class="replaceable"><code>X</code></em> is the major version,
          <em class="replaceable"><code>YY</code></em> is the release level (or minor
          version), and <em class="replaceable"><code>ZZ</code></em> is the sub-version
          within the release level:
        </p><pre class="programlisting">major_version*10000 + release_level*100 + sub_version
</pre><p>
          For example, <code class="literal">"8.0.24"</code> is
          returned as <code class="literal">80024</code>.
        </p><p>
          This function is useful in client programs for determining
          whether some version-specific server capability exists.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-server-version-return-values"></a>Return Values</h3></div></div></div><p>
          An integer that represents the MySQL server version.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-server-version-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-get-ssl-cipher"></a>7.35 mysql_get_ssl_cipher()</h2></div></div></div><a class="indexterm" name="idm46079471070576"></a><pre class="programlisting">const char *
mysql_get_ssl_cipher(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-ssl-cipher-description"></a>Description</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-get-ssl-cipher" title="7.35 mysql_get_ssl_cipher()"><code class="literal">mysql_get_ssl_cipher()</code></a> returns
          the encryption cipher used for the given connection to the
          server. <code class="literal">mysql</code> is the connection handler
          returned from <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-get-ssl-cipher-return-values"></a>Return Values</h3></div></div></div><p>
          A string naming the encryption cipher used for the connection,
          or <code class="literal">NULL</code> if the connection is not encrypted.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-hex-string"></a>7.36 mysql_hex_string()</h2></div></div></div><a class="indexterm" name="idm46079471059968"></a><pre class="programlisting">unsigned long
mysql_hex_string(char *to,
                 const char *from,
                 unsigned long length)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-hex-string-description"></a>Description</h3></div></div></div><p>
          This function creates a legal SQL string for use in an SQL
          statement. See <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-literals.html" target="_top">String Literals</a>.
        </p><p>
          The string in the <code class="literal">from</code> argument is encoded
          in hexadecimal format, with each character encoded as two
          hexadecimal digits. The result is placed in the
          <code class="literal">to</code> argument, followed by a terminating null
          byte.
        </p><p>
          The string pointed to by <code class="literal">from</code> must be
          <code class="literal">length</code> bytes long. You must allocate the
          <code class="literal">to</code> buffer to be at least
          <code class="literal">length*2+1</code> bytes long. When
          <a class="link" href="c-api-functions.html#mysql-hex-string" title="7.36 mysql_hex_string()"><code class="literal">mysql_hex_string()</code></a> returns,
          the contents of <code class="literal">to</code> is a null-terminated
          string. The return value is the length of the encoded string,
          not including the terminating null byte.
        </p><p>
          The return value can be placed into an SQL statement using
          either <code class="literal">X'<em class="replaceable"><code>value</code></em>'</code>
          or <code class="literal">0x<em class="replaceable"><code>value</code></em></code>
          format. However, the return value does not include the
          <code class="literal">X'...'</code> or <code class="literal">0x</code>. The caller
          must supply whichever of those is desired.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-hex-string-example"></a>Example</h3></div></div></div><pre class="programlisting">char query[1000],*end;

end = strmov(query,"INSERT INTO test_table values(");
end = strmov(end,"X'");
end += mysql_hex_string(end,"What is this",12);
end = strmov(end,"',X'");
end += mysql_hex_string(end,"binary data: \0\r\n",16);
end = strmov(end,"')");

if (mysql_real_query(&amp;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre><p>
          The <code class="literal">strmov()</code> function used in the example
          is included in the <code class="literal">libmysqlclient</code> library
          and works like <code class="literal">strcpy()</code> but returns a
          pointer to the terminating null of the first parameter.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-hex-string-return-values"></a>Return Values</h3></div></div></div><p>
          The length of the encoded string that is placed into
          <code class="literal">to</code>, not including the terminating null
          character.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-hex-string-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-info"></a>7.37 mysql_info()</h2></div></div></div><a class="indexterm" name="idm46079471032896"></a><pre class="programlisting">const char *
mysql_info(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-info-description"></a>Description</h3></div></div></div><p>
          Retrieves a string providing information about the most
          recently executed statement, but only for the statements
          listed here. For other statements,
          <a class="link" href="c-api-functions.html#mysql-info" title="7.37 mysql_info()"><code class="literal">mysql_info()</code></a> returns
          <code class="literal">NULL</code>. The format of the string varies
          depending on the type of statement, as described here. The
          numbers are illustrative only; the string contains values
          appropriate for the statement.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert-select.html" target="_top"><code class="literal">INSERT INTO
              ... SELECT ...</code></a>
            </p><p>
              String format: <code class="literal">Records: 100 Duplicates: 0
              Warnings: 0</code>
            </p></li><li class="listitem"><p>
              <code class="literal">INSERT INTO ... VALUES
              (...),(...),(...)...</code>
            </p><p>
              String format: <code class="literal">Records: 3 Duplicates: 0 Warnings:
              0</code>
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA</code></a>
            </p><p>
              String format: <code class="literal">Records: 1 Deleted: 0 Skipped: 0
              Warnings: 0</code>
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/alter-table.html" target="_top"><code class="literal">ALTER TABLE</code></a>
            </p><p>
              String format: <code class="literal">Records: 3 Duplicates: 0 Warnings:
              0</code>
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_top"><code class="literal">UPDATE</code></a>
            </p><p>
              String format: <code class="literal">Rows matched: 40 Changed: 40
              Warnings: 0</code>
            </p></li></ul></div><p>
          <a class="link" href="c-api-functions.html#mysql-info" title="7.37 mysql_info()"><code class="literal">mysql_info()</code></a> returns a
          non-<code class="literal">NULL</code> value for
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT ...
          VALUES</code></a> only for the multiple-row form of the
          statement (that is, only if multiple value lists are
          specified).
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-info-return-values"></a>Return Values</h3></div></div></div><p>
          A character string representing additional information about
          the most recently executed statement. <code class="literal">NULL</code>
          if no information is available for the statement.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-info-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-init"></a>7.38 mysql_init()</h2></div></div></div><a class="indexterm" name="idm46079471002560"></a><pre class="programlisting">MYSQL *
mysql_init(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-init-description"></a>Description</h3></div></div></div><p>
          Allocates or initializes a <code class="literal">MYSQL</code> object
          suitable for
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. If
          <code class="literal">mysql</code> is a <code class="literal">NULL</code> pointer,
          the function allocates, initializes, and returns a new object.
          Otherwise, the object is initialized and the address of the
          object is returned. If
          <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a> allocates a new
          object, it is freed when
          <a class="link" href="c-api-functions.html#mysql-close" title="7.6 mysql_close()"><code class="literal">mysql_close()</code></a> is called to
          close the connection.
        </p><p>
          In a nonmultithreaded environment,
          <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a> invokes
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
          automatically as necessary. However,
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a> is not
          thread-safe in a multithreaded environment, and thus neither
          is <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a>. Before
          calling <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a>, either
          call <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
          prior to spawning any threads, or use a mutex to protect the
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a> call.
          This should be done prior to any other client library call.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-init-return-values"></a>Return Values</h3></div></div></div><p>
          An initialized <code class="literal">MYSQL*</code> handler.
          <code class="literal">NULL</code> if there was insufficient memory to
          allocate a new object.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-init-errors"></a>Errors</h3></div></div></div><p>
          In case of insufficient memory, <code class="literal">NULL</code> is
          returned.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-insert-id"></a>7.39 mysql_insert_id()</h2></div></div></div><a class="indexterm" name="idm46079470976496"></a><pre class="programlisting">uint64_t
mysql_insert_id(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-insert-id-description"></a>Description</h3></div></div></div><p>
          Returns the value generated for an
          <code class="literal">AUTO_INCREMENT</code> column by the previous
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a> or
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_top"><code class="literal">UPDATE</code></a> statement. Use this
          function after you have performed an
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a> statement into a table
          that contains an <code class="literal">AUTO_INCREMENT</code> field, or
          have used <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a> or
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_top"><code class="literal">UPDATE</code></a> to set a column value
          with
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>.
        </p><p>
          The return value of
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is always
          zero unless explicitly updated under one of the following
          conditions:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a> statements that
              store a value into an <code class="literal">AUTO_INCREMENT</code>
              column. This is true whether the value is automatically
              generated by storing the special values
              <code class="literal">NULL</code> or <code class="literal">0</code> into the
              column, or is an explicit nonspecial value.
            </p></li><li class="listitem"><p>
              In the case of a multiple-row
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a> statement,
              <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
              the first automatically generated
              <code class="literal">AUTO_INCREMENT</code> value that was
              successfully inserted.
            </p><p>
              If no rows are successfully inserted,
              <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
              0.
            </p></li><li class="listitem"><p>
              If an
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert-select.html" target="_top"><code class="literal">INSERT ...
              SELECT</code></a> statement is executed, and no
              automatically generated value is successfully inserted,
              <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
              the ID of the last inserted row.
            </p></li><li class="listitem"><p>
              If an
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert-select.html" target="_top"><code class="literal">INSERT ...
              SELECT</code></a> statement uses
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>,
              <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
              <em class="replaceable"><code>expr</code></em>.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a> statements that
              generate an <code class="literal">AUTO_INCREMENT</code> value by
              inserting
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
              into any column or by updating any column to
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>.
            </p></li><li class="listitem"><p>
              If the previous statement returned an error, the value of
              <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is
              undefined.
            </p></li></ul></div><p>
          The return value of
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> can be
          simplified to the following sequence:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              If there is an <code class="literal">AUTO_INCREMENT</code> column,
              and an automatically generated value was successfully
              inserted, return the first such value.
            </p></li><li class="listitem"><p>
              If
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
              occurred in the statement, return
              <em class="replaceable"><code>expr</code></em>, even if there was an
              <code class="literal">AUTO_INCREMENT</code> column in the affected
              table.
            </p></li><li class="listitem"><p>
              The return value varies depending on the statement used.
              When called after an <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a>
              statement:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  If there is an <code class="literal">AUTO_INCREMENT</code>
                  column in the table, and there were some explicit
                  values for this column that were successfully inserted
                  into the table, return the last of the explicit
                  values.
                </p></li></ul></div><p>
              When called after an
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html" target="_top"><code class="literal">INSERT
              ... ON DUPLICATE KEY UPDATE</code></a> statement:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  If there is an <code class="literal">AUTO_INCREMENT</code>
                  column in the table and there were some explicit
                  successfully inserted values or some updated values,
                  return the last of the inserted or updated values.
                </p></li></ul></div></li></ol></div><p>
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
          <code class="literal">0</code> if the previous statement does not use an
          <code class="literal">AUTO_INCREMENT</code> value. If you must save the
          value for later, be sure to call
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> immediately
          after the statement that generates the value.
        </p><p>
          The value of <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>
          is affected only by statements issued within the current
          client connection. It is not affected by statements issued by
          other clients.
        </p><p>
          The <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID()</code></a> SQL
          function will contain the value of the first automatically
          generated value that was successfully inserted.
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID()</code></a> is not reset
          between statements because the value of that function is
          maintained in the server. Another difference from
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is that
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID()</code></a> is not updated
          if you set an <code class="literal">AUTO_INCREMENT</code> column to a
          specific nonspecial value. See
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html" target="_top">Information Functions</a>.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
          <code class="literal">0</code> following a
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a> statement for a stored
          procedure that generates an <code class="literal">AUTO_INCREMENT</code>
          value because in this case
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> applies to
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a> and not the statement
          within the procedure. Within the procedure, you can use
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID()</code></a> at the SQL
          level to obtain the <code class="literal">AUTO_INCREMENT</code> value.
        </p><p>
          The reason for the differences between
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID()</code></a> and
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is that
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID()</code></a> is made easy
          to use in scripts while
          <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> tries to
          provide more exact information about what happens to the
          <code class="literal">AUTO_INCREMENT</code> column.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            The OK packet used in the client/server protocol holds
            information such as is used for session state tracking. When
            clients read the OK packet to know whether there is a
            session state change, this resets values such as the last
            insert ID and the number of affected rows. Such changes
            cause <a class="link" href="c-api-functions.html#mysql-insert-id" title="7.39 mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> to
            return 0 after execution of commands including but not
            necessarily limited to <code class="literal">COM_PING</code>,
            <code class="literal">COM_REFRESH</code>, and
            <code class="literal">COM_INIT_DB</code>.
          </p></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-insert-id-return-values"></a>Return Values</h3></div></div></div><p>
          Described in the preceding discussion.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-insert-id-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_auto_increment_conflict" target="_top"><code class="literal">ER_AUTO_INCREMENT_CONFLICT</code></a>
            </p><p>
              A user-specified <code class="literal">AUTO_INCREMENT</code> value
              in a multi <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a> statement
              falls within the range between the current
              <code class="literal">AUTO_INCREMENT</code> value and the sum of the
              current and number of rows affected values.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-kill"></a>7.40 mysql_kill()</h2></div></div></div><a class="indexterm" name="idm46079470876720"></a><pre class="programlisting">int
mysql_kill(MYSQL *mysql,
           unsigned long pid)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-kill-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <code class="literal">mysql_kill()</code> is deprecated and will be
            removed in a future version of MySQL. Instead, use
            <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to execute a
            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/kill.html" target="_top"><code class="literal">KILL</code></a> statement.
          </p></div><p>
          Asks the server to kill the thread specified by
          <code class="literal">pid</code>.
        </p><p>
          This function is deprecated. Use
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/kill.html" target="_top"><code class="literal">KILL</code></a> statement instead.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-kill" title="7.40 mysql_kill()"><code class="literal">mysql_kill()</code></a> cannot handle
          values larger than 32 bits, but to guard against killing the
          wrong thread returns an error in these cases:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              If given an ID larger than 32 bits,
              <a class="link" href="c-api-functions.html#mysql-kill" title="7.40 mysql_kill()"><code class="literal">mysql_kill()</code></a> returns a
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_invalid_conn_handle" target="_top"><code class="literal">CR_INVALID_CONN_HANDLE</code></a>
              error.
            </p></li><li class="listitem"><p>
              After the server's internal thread ID counter reaches a
              value larger than 32 bits, it returns an
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_data_out_of_range" target="_top"><code class="literal">ER_DATA_OUT_OF_RANGE</code></a> error
              for any <a class="link" href="c-api-functions.html#mysql-kill" title="7.40 mysql_kill()"><code class="literal">mysql_kill()</code></a>
              invocation and
              <a class="link" href="c-api-functions.html#mysql-kill" title="7.40 mysql_kill()"><code class="literal">mysql_kill()</code></a> fails.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-kill-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-kill-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_invalid_conn_handle" target="_top"><code class="literal">CR_INVALID_CONN_HANDLE</code></a>
            </p><p>
              The <code class="literal">pid</code> was larger than 32 bits.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_data_out_of_range" target="_top"><code class="literal">ER_DATA_OUT_OF_RANGE</code></a>
            </p><p>
              The server's internal thread ID counter has reached a
              value larger than 32 bits, at which point it rejects all
              <a class="link" href="c-api-functions.html#mysql-kill" title="7.40 mysql_kill()"><code class="literal">mysql_kill()</code></a> invocations.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-library-end"></a>7.41 mysql_library_end()</h2></div></div></div><a class="indexterm" name="idm46079470834352"></a><pre class="programlisting">void
mysql_library_end(void)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-library-end-description"></a>Description</h3></div></div></div><p>
          This function finalizes the MySQL client library. Call it when
          you are done using the library (for example, after
          disconnecting from the server).
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            To avoid memory leaks after the application is done using
            the library (for example, after closing the connection to
            the server), be sure to call
            <a class="link" href="c-api-functions.html#mysql-library-end" title="7.41 mysql_library_end()"><code class="literal">mysql_library_end()</code></a>
            explicitly. This enables memory managment to be performed to
            clean up and free resources used by the library.
          </p></div><p>
          For usage information, see
          <a class="xref" href="c-api-function-overview.html" title="Chapter 6 C API Function Overview">Chapter 6, <i>C API Function Overview</i></a>, and
          <a class="xref" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()">Section 7.42, “mysql_library_init()”</a>.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-library-init"></a>7.42 mysql_library_init()</h2></div></div></div><a class="indexterm" name="idm46079470825072"></a><pre class="programlisting">int
mysql_library_init(int argc,
                   char **argv,
                   char **groups)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-library-init-description"></a>Description</h3></div></div></div><p>
          Call this function to initialize the MySQL client library
          before you call any other MySQL function.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            To avoid memory leaks after the application is done using
            the library (for example, after closing the connection to
            the server), be sure to call
            <a class="link" href="c-api-functions.html#mysql-library-end" title="7.41 mysql_library_end()"><code class="literal">mysql_library_end()</code></a>
            explicitly. This enables memory managment to be performed to
            clean up and free resources used by the library. See
            <a class="xref" href="c-api-functions.html#mysql-library-end" title="7.41 mysql_library_end()">Section 7.41, “mysql_library_end()”</a>.
          </p></div><p>
          In a nonmultithreaded environment, the call to
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a> may be
          omitted, because <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a>
          will invoke it automatically as necessary. However,
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a> is not
          thread-safe in a multithreaded environment, and thus neither
          is <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a>, which calls
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a>. You must
          either call
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a> prior to
          spawning any threads, or else use a mutex to protect the call,
          whether you invoke
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a> or
          indirectly through
          <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a>. Do this prior to
          any other client library call.
        </p><p>
          The <code class="literal">argc</code>, <code class="literal">argv</code>, and
          <code class="literal">groups</code> arguments are unused. In older MySQL
          versions, they were used for applications linked against the
          embedded server, which is no longer supported. The call now
          should be written as
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init(0, NULL,
          NULL)</code></a>.
        </p><pre class="programlisting">#include &lt;mysql.h&gt;
#include &lt;stdlib.h&gt;

int main(void) {
  if (mysql_library_init(0, NULL, NULL)) {
    fprintf(stderr, "could not initialize MySQL client library\n");
    exit(1);
  }

  /* Use any MySQL API functions here */

  mysql_library_end();

  return EXIT_SUCCESS;
}
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-library-init-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-list-dbs"></a>7.43 mysql_list_dbs()</h2></div></div></div><a class="indexterm" name="idm46079470799008"></a><pre class="programlisting">MYSQL_RES *
mysql_list_dbs(MYSQL *mysql,
               const char *wild)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-dbs-description"></a>Description</h3></div></div></div><p>
          Returns a result set consisting of database names on the
          server that match the simple regular expression specified by
          the <code class="literal">wild</code> parameter. <code class="literal">wild</code>
          may contain the wildcard characters <code class="literal">%</code> or
          <code class="literal">_</code>, or may be a <code class="literal">NULL</code>
          pointer to match all databases. Calling
          <a class="link" href="c-api-functions.html#mysql-list-dbs" title="7.43 mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a> is similar to
          executing the query <code class="literal">SHOW DATABASES [LIKE
          <em class="replaceable"><code>wild</code></em>]</code>.
        </p><p>
          You must free the result set with
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-dbs-return-values"></a>Return Values</h3></div></div></div><p>
          A <code class="literal">MYSQL_RES</code> result set for success.
          <code class="literal">NULL</code> if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-dbs-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_out_of_memory" target="_top"><code class="literal">CR_OUT_OF_MEMORY</code></a>
            </p><p>
              Out of memory.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-list-fields"></a>7.44 mysql_list_fields()</h2></div></div></div><a class="indexterm" name="idm46079470769440"></a><pre class="programlisting">MYSQL_RES *
mysql_list_fields(MYSQL *mysql,
                  const char *table,
                  const char *wild)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-fields-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <code class="literal">mysql_list_fields()</code> is deprecated and
            will be removed in a future version of MySQL. Instead, use
            <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to execute a
            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/show-columns.html" target="_top"><code class="literal">SHOW COLUMNS</code></a> statement.
          </p></div><p>
          Returns an empty result set for which the metadata provides
          information about the columns in the given table that match
          the simple regular expression specified by the
          <code class="literal">wild</code> parameter. <code class="literal">wild</code> may
          contain the wildcard characters <code class="literal">%</code> or
          <code class="literal">_</code>, or may be a <code class="literal">NULL</code>
          pointer to match all fields. Calling
          <a class="link" href="c-api-functions.html#mysql-list-fields" title="7.44 mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a> is similar
          to executing the query <code class="literal">SHOW COLUMNS FROM
          <em class="replaceable"><code>tbl_name</code></em> [LIKE
          <em class="replaceable"><code>wild</code></em>]</code>.
        </p><p>
          It is preferable to use <code class="literal">SHOW COLUMNS FROM
          <em class="replaceable"><code>tbl_name</code></em></code> instead of
          <a class="link" href="c-api-functions.html#mysql-list-fields" title="7.44 mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a>.
        </p><p>
          You must free the result set with
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-fields-return-values"></a>Return Values</h3></div></div></div><p>
          A <code class="literal">MYSQL_RES</code> result set for success.
          <code class="literal">NULL</code> if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-fields-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-fields-example"></a>Example</h3></div></div></div><pre class="programlisting">int i;
MYSQL_RES *tbl_cols = mysql_list_fields(mysql, "mytbl", "f%");

unsigned int field_cnt = mysql_num_fields(tbl_cols);
printf("Number of columns: %d\n", field_cnt);

for (i=0; i &lt; field_cnt; ++i)
{
  /* col describes i-th column of the table */
  MYSQL_FIELD *col = mysql_fetch_field_direct(tbl_cols, i);
  printf ("Column %d: %s\n", i, col-&gt;name);
}
mysql_free_result(tbl_cols);
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-list-processes"></a>7.45 mysql_list_processes()</h2></div></div></div><a class="indexterm" name="idm46079470732064"></a><pre class="programlisting">MYSQL_RES *
mysql_list_processes(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-processes-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <code class="literal">mysql_list_processes()</code> is deprecated and
            will be removed in a future version of MySQL. Instead, use
            <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to execute a
            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/show-processlist.html" target="_top"><code class="literal">SHOW PROCESSLIST</code></a> statement.
          </p></div><p>
          Returns a result set describing the current server threads.
          This is the same kind of information as that reported by
          <span class="command"><strong>mysqladmin processlist</strong></span> or a
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/show-processlist.html" target="_top"><code class="literal">SHOW PROCESSLIST</code></a> query.
        </p><p>
          You must free the result set with
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-processes-return-values"></a>Return Values</h3></div></div></div><p>
          A <code class="literal">MYSQL_RES</code> result set for success.
          <code class="literal">NULL</code> if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-processes-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-list-tables"></a>7.46 mysql_list_tables()</h2></div></div></div><a class="indexterm" name="idm46079470705056"></a><pre class="programlisting">MYSQL_RES *
mysql_list_tables(MYSQL *mysql,
                  const char *wild)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-tables-description"></a>Description</h3></div></div></div><p>
          Returns a result set consisting of table names in the current
          database that match the simple regular expression specified by
          the <code class="literal">wild</code> parameter. <code class="literal">wild</code>
          may contain the wildcard characters <code class="literal">%</code> or
          <code class="literal">_</code>, or may be a <code class="literal">NULL</code>
          pointer to match all tables. Calling
          <a class="link" href="c-api-functions.html#mysql-list-tables" title="7.46 mysql_list_tables()"><code class="literal">mysql_list_tables()</code></a> is similar
          to executing the query <code class="literal">SHOW TABLES [LIKE
          <em class="replaceable"><code>wild</code></em>]</code>.
        </p><p>
          You must free the result set with
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-tables-return-values"></a>Return Values</h3></div></div></div><p>
          A <code class="literal">MYSQL_RES</code> result set for success.
          <code class="literal">NULL</code> if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-list-tables-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-more-results"></a>7.47 mysql_more_results()</h2></div></div></div><a class="indexterm" name="idm46079470677968"></a><pre class="programlisting">bool
mysql_more_results(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-more-results-description"></a>Description</h3></div></div></div><p>
          This function is used when you execute multiple statements
          specified as a single statement string, or when you execute
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a> statements, which can
          return multiple result sets.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-more-results" title="7.47 mysql_more_results()"><code class="literal">mysql_more_results()</code></a> true if
          more results exist from the currently executed statement, in
          which case the application must call
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to fetch
          the results.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-more-results-return-values"></a>Return Values</h3></div></div></div><p>
          <code class="literal">TRUE</code> (1) if more results exist.
          <code class="literal">FALSE</code> (0) if no more results exist.
        </p><p>
          In most cases, you can call
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> instead to
          test whether more results exist and initiate retrieval if so.
        </p><p>
          See <a class="xref" href="c-api-multiple-queries.html" title="Chapter 23 C API Multiple Statement Execution Support">Chapter 23, <i>C API Multiple Statement Execution Support</i></a>, and
          <a class="xref" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()">Section 7.48, “mysql_next_result()”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-more-results-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-next-result"></a>7.48 mysql_next_result()</h2></div></div></div><a class="indexterm" name="idm46079470660160"></a><pre class="programlisting">int
mysql_next_result(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-next-result-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> is a
            synchronous function. Its asynchronous counterpart is
            <a class="link" href="c-api-asynchronous-functions.html#mysql-next-result-nonblocking" title="15.3 mysql_next_result_nonblocking()"><code class="literal">mysql_next_result_nonblocking()</code></a>,
            for use by applications that require asynchronous
            communication with the server. See
            <a class="xref" href="c-api-asynchronous-interface.html" title="Chapter 12 C API Asynchronous Interface">Chapter 12, <i>C API Asynchronous Interface</i></a>.
          </p></div><p>
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> is used
          when you execute multiple statements specified as a single
          statement string, or when you use
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a> statements to execute
          stored procedures, which can return multiple result sets.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> reads the
          next statement result and returns a status to indicate whether
          more results exist. If
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> returns an
          error, there are no more results.
        </p><p>
          Before each call to
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a>, you must
          call <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a> for
          the current statement if it is a statement that returned a
          result set (rather than just a result status).
        </p><p>
          After calling
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> the state
          of the connection is as if you had called
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> for the next
          statement. This means that you can call
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-warning-count" title="7.84 mysql_warning_count()"><code class="literal">mysql_warning_count()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>, and so
          forth.
        </p><p>
          If your program uses <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a>
          statements to execute stored procedures, the
          <code class="literal">CLIENT_MULTI_RESULTS</code> flag must be enabled.
          This is because each <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a>
          returns a result to indicate the call status, in addition to
          any result sets that might be returned by statements executed
          within the procedure. Because
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a> can return multiple
          results, process them using a loop that calls
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
          determine whether there are more results.
        </p><p>
          <code class="literal">CLIENT_MULTI_RESULTS</code> can be enabled when
          you call <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>,
          either explicitly by passing the
          <code class="literal">CLIENT_MULTI_RESULTS</code> flag itself, or
          implicitly by passing
          <code class="literal">CLIENT_MULTI_STATEMENTS</code> (which also enables
          <code class="literal">CLIENT_MULTI_RESULTS</code>).
          <code class="literal">CLIENT_MULTI_RESULTS</code> is enabled by default.
        </p><p>
          It is also possible to test whether there are more results by
          calling <a class="link" href="c-api-functions.html#mysql-more-results" title="7.47 mysql_more_results()"><code class="literal">mysql_more_results()</code></a>.
          However, this function does not change the connection state,
          so if it returns true, you must still call
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to advance
          to the next result.
        </p><p>
          For an example that shows how to use
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a>, see
          <a class="xref" href="c-api-multiple-queries.html" title="Chapter 23 C API Multiple Statement Execution Support">Chapter 23, <i>C API Multiple Statement Execution Support</i></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-next-result-return-values"></a>Return Values</h3></div></div></div><div class="informaltable"><table summary="mysql_next_result() return values and a description of each value."><col width="35%"><col width="65%"><thead><tr>
              <th>Return Value</th>
              <th>Description</th>
            </tr></thead><tbody><tr>
              <td>0</td>
              <td>Successful and there are more results</td>
            </tr><tr>
              <td>-1</td>
              <td>Successful and there are no more results</td>
            </tr><tr>
              <td>&gt;0</td>
              <td>An error occurred</td>
            </tr></tbody></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-next-result-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order. For example,
              if you did not call
              <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for a
              previous result set.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-num-fields"></a>7.49 mysql_num_fields()</h2></div></div></div><a class="indexterm" name="idm46079470591760"></a><a class="indexterm" name="idm46079470590688"></a><pre class="programlisting">unsigned int
mysql_num_fields(MYSQL_RES *result)
</pre><p>
        To pass a <code class="literal">MYSQL*</code> argument instead, use
        <code class="literal">unsigned int mysql_field_count(MYSQL *mysql)</code>.
      </p><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-num-fields-description"></a>Description</h3></div></div></div><p>
          Returns the number of columns in a result set.
        </p><p>
          You can get the number of columns either from a pointer to a
          result set or to a connection handler. You would use the
          connection handler if
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> returned
          <code class="literal">NULL</code> (and thus you have no result set
          pointer). In this case, you can call
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to
          determine whether
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> should
          have produced a nonempty result. This enables the client
          program to take proper action without knowing whether the
          query was a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a> (or
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a>-like) statement. The
          example shown here illustrates how this may be done.
        </p><p>
          See <a class="xref" href="c-api-common-issues.html#null-mysql-store-result" title="29.1 Why mysql_store_result() Sometimes Returns NULL After mysql_query() Returns Success">Section 29.1, “Why mysql_store_result() Sometimes Returns NULL After mysql_query()
        Returns Success”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-num-fields-return-values"></a>Return Values</h3></div></div></div><p>
          An unsigned integer representing the number of columns in a
          result set.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-num-fields-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-num-fields-example"></a>Example</h3></div></div></div><pre class="programlisting">MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&amp;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&amp;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if (mysql_errno(&amp;mysql))
        {
           fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
        }
        else if (mysql_field_count(&amp;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&amp;mysql);
        }
    }
}
</pre><p>
          An alternative (if you know that your query should have
          returned a result set) is to replace the
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno(&amp;mysql)</code></a> call
          with a check whether
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count(&amp;mysql)</code></a>
          returns 0. This happens only if something went wrong.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-num-rows"></a>7.50 mysql_num_rows()</h2></div></div></div><a class="indexterm" name="idm46079470563776"></a><pre class="programlisting">uint64_t
mysql_num_rows(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-num-rows-description"></a>Description</h3></div></div></div><p>
          Returns the number of rows in the result set.
        </p><p>
          The use of <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>
          depends on whether you use
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> to return
          the result set. If you use
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> may be called
          immediately. If you use
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> does not
          return the correct value until all the rows in the result set
          have been retrieved.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> is intended
          for use with statements that return a result set, such as
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a>. For statements such as
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_top"><code class="literal">UPDATE</code></a>, or
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/delete.html" target="_top"><code class="literal">DELETE</code></a>, the number of affected
          rows can be obtained with
          <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-num-rows-return-values"></a>Return Values</h3></div></div></div><p>
          The number of rows in the result set.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-num-rows-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-options"></a>7.51 mysql_options()</h2></div></div></div><a class="indexterm" name="idm46079470538592"></a><pre class="programlisting">int
mysql_options(MYSQL *mysql,
              enum mysql_option option,
              const void *arg)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-options-description"></a>Description</h3></div></div></div><p>
          Can be used to set extra connect options and affect behavior
          for a connection. This function may be called multiple times
          to set several options. To retrieve option values, use
          <a class="link" href="c-api-functions.html#mysql-get-option" title="7.31 mysql_get_option()"><code class="literal">mysql_get_option()</code></a>.
        </p><p>
          Call <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> after
          <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a> and before
          <a class="link" href="c-api-functions.html#mysql-connect" title="7.8 mysql_connect()"><code class="literal">mysql_connect()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
        </p><p>
          The <code class="literal">option</code> argument is the option that you
          want to set; the <code class="literal">arg</code> argument is the value
          for the option. If the option is an integer, specify a pointer
          to the value of the integer as the <code class="literal">arg</code>
          argument.
        </p><p>
          Options for information such as SSL certificate and key files
          are used to establish an encrypted connection if such
          connections are available, but do not enforce any requirement
          that the connection obtained be encrypted. To require an
          encrypted connection, use the technique described in
          <a class="xref" href="c-api-encrypted-connections.html" title="Chapter 22 C API Support for Encrypted Connections">Chapter 22, <i>C API Support for Encrypted Connections</i></a>.
        </p><p>
          The following list describes the possible options, their
          effect, and how <code class="literal">arg</code> is used for each
          option. For option descriptions that indicate
          <code class="literal">arg</code> is unused, its value is irrelevant; it
          is conventional to pass 0.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">MYSQL_DEFAULT_AUTH</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The name of the authentication plugin to use.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_ENABLE_CLEARTEXT_PLUGIN</code> (argument
              type: <code class="literal">bool *</code>)
            </p><p>
              Enable the <code class="literal">mysql_clear_password</code>
              cleartext authentication plugin. See
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/cleartext-pluggable-authentication.html" target="_top">Client-Side Cleartext Pluggable Authentication</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_INIT_COMMAND</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              SQL statement to execute when connecting to the MySQL
              server. Automatically re-executed if reconnection occurs.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_BIND</code> (argument: <code class="literal">char
              *</code>)
            </p><p>
              The network interface from which to connect to the server.
              This is used when the client host has multiple network
              interfaces. The argument is a host name or IP address
              (specified as a string).
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS</code>
              (argument type: <code class="literal">bool *</code>)
            </p><p>
              Indicate whether the client can handle expired passwords.
              See <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/expired-password-handling.html" target="_top">Server Handling of Expired Passwords</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_COMPRESS</code> (argument: not used)
            </p><p>
              Compress all information sent between the client and the
              server if possible. See
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connection-compression-control.html" target="_top">Connection Compression Control</a>.
            </p><p>
              As of MySQL 8.0.18, <code class="literal">MYSQL_OPT_COMPRESS</code>
              becomes a legacy option, due to the introduction of the
              <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code> option
              for more control over connection compression (see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connection-compression-control.html#connection-compression-configuration" target="_top">Configuring Connection Compression</a>).
              The meaning of <code class="literal">MYSQL_OPT_COMPRESS</code>
              depends on whether
              <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code> is
              specified:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  When
                  <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code> is
                  not specified, enabling
                  <code class="literal">MYSQL_OPT_COMPRESS</code> is equivalent to
                  specifying a client-side algorithm set of
                  <code class="literal">zlib,uncompressed</code>.
                </p></li><li class="listitem"><p>
                  When
                  <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code> is
                  specified, enabling
                  <code class="literal">MYSQL_OPT_COMPRESS</code> is equivalent to
                  specifying an algorithm set of <code class="literal">zlib</code>
                  and the full client-side algorithm set is the union of
                  <code class="literal">zlib</code> plus the algorithms specified
                  by
                  <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code>.
                  For example, with
                  <code class="literal">MYSQL_OPT_COMPRESS</code> enabled and
                  <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code>
                  set to <code class="literal">zlib,zstd</code>, the
                  permitted-algorithm set is <code class="literal">zlib</code>
                  plus <code class="literal">zlib,zstd</code>; that is,
                  <code class="literal">zlib,zstd</code>. With
                  <code class="literal">MYSQL_OPT_COMPRESS</code> enabled and
                  <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code>
                  set to <code class="literal">zstd,uncompressed</code>, the
                  permitted-algorithm set is <code class="literal">zlib</code>
                  plus <code class="literal">zstd,uncompressed</code>; that is,
                  <code class="literal">zlib,zstd,uncompressed</code>.
                </p></li></ul></div><p>
              As of MySQL 8.0.18, <code class="literal">MYSQL_OPT_COMPRESS</code>
              is deprecated. It will be removed in a future MySQL
              version. See
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connection-compression-control.html#connection-compression-legacy-configuration" target="_top">Configuring Legacy Connection Compression</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_COMPRESSION_ALGORITHMS</code>
              (argument type: <code class="literal">const char *</code>)
            </p><p>
              The permitted compression algorithms for connections to
              the server. The available algorithms are the same as for
              the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_protocol_compression_algorithms" target="_top"><code class="literal">protocol_compression_algorithms</code></a>
              system variable. If this option is not specified, the
              default value is <code class="literal">uncompressed</code>.
            </p><p>
              For more information, see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connection-compression-control.html" target="_top">Connection Compression Control</a>.
            </p><p>
              This option was added in MySQL 8.0.18. For
              <a class="link" href="c-api-asynchronous-interface.html" title="Chapter 12 C API Asynchronous Interface">asynchronous
              operations</a>, the option has no effect until MySQL
              8.0.21.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_DELETE</code> (argument
              type: <code class="literal">char *</code>)
            </p><p>
              Given a key name, this option deletes a key-value pair
              from the current set of connection attributes to pass to
              the server at connect time. The argument is a pointer to a
              null-terminated string naming the key. Comparison of the
              key name with existing keys is case-sensitive.
            </p><p>
              See also the description for the
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_RESET</code> option, as
              well as the description for the
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_ADD</code> option in
              the description of the
              <a class="link" href="c-api-functions.html#mysql-options4" title="7.52 mysql_options4()"><code class="literal">mysql_options4()</code></a> function.
              That function description also includes a usage example.
            </p><p>
              The Performance Schema exposes connection attributes
              through the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-session-connect-attrs-table.html" target="_top"><code class="literal">session_connect_attrs</code></a> and
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-session-account-connect-attrs-table.html" target="_top"><code class="literal">session_account_connect_attrs</code></a>
              tables. See
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-connection-attribute-tables.html" target="_top">Performance Schema Connection Attribute Tables</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_RESET</code> (argument
              not used)
            </p><p>
              This option resets (clears) the current set of connection
              attributes to pass to the server at connect time.
            </p><p>
              See also the description for the
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_DELETE</code> option,
              as well as the description for the
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_ADD</code> option in
              the description of the
              <a class="link" href="c-api-functions.html#mysql-options4" title="7.52 mysql_options4()"><code class="literal">mysql_options4()</code></a> function.
              That function description also includes a usage example.
            </p><p>
              The Performance Schema exposes connection attributes
              through the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-session-connect-attrs-table.html" target="_top"><code class="literal">session_connect_attrs</code></a> and
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-session-account-connect-attrs-table.html" target="_top"><code class="literal">session_account_connect_attrs</code></a>
              tables. See
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-connection-attribute-tables.html" target="_top">Performance Schema Connection Attribute Tables</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_CONNECT_TIMEOUT</code> (argument
              type: <code class="literal">unsigned int *</code>)
            </p><p>
              The connect timeout in seconds.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_GET_SERVER_PUBLIC_KEY</code>
              (argument type: <code class="literal">bool *</code>)
            </p><p>
              Enables the client to request from the server the public
              key required for RSA key pair-based password exchange.
              This option applies to clients that authenticate with the
              <code class="literal">caching_sha2_password</code> authentication
              plugin. For that plugin, the server does not send the
              public key unless requested. This option is ignored for
              accounts that do not authenticate with that plugin. It is
              also ignored if RSA-based password exchange is not used,
              as is the case when the client connects to the server
              using a secure connection.
            </p><p>
              If <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code> is given and
              specifies a valid public key file, it takes precedence
              over <code class="literal">MYSQL_OPT_GET_SERVER_PUBLIC_KEY</code>.
            </p><p>
              For information about the
              <code class="literal">caching_sha2_password</code> plugin, see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html" target="_top">Caching SHA-2 Pluggable Authentication</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code> (argument
              type: <code class="literal">char *</code>)
            </p><p>
              This option affects the client-side
              <code class="literal">LOCAL</code> capability for
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA</code></a> operations. It
              specifies the directory in which files named in
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA
              LOCAL</code></a> statements must be located. The effect of
              <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code> depends
              on whether <code class="literal">LOCAL</code> data loading is
              enabled or disabled:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  If <code class="literal">LOCAL</code> data loading is enabled,
                  either by default in the MySQL client library or by
                  explicitly enabling
                  <code class="literal">MYSQL_OPT_LOCAL_INFILE</code>, the
                  <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code>
                  option has no effect.
                </p></li><li class="listitem"><p>
                  If <code class="literal">LOCAL</code> data loading is disabled,
                  either by default in the MySQL client library or by
                  explicitly disabling
                  <code class="literal">MYSQL_OPT_LOCAL_INFILE</code>, the
                  <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code>
                  option can be used to designate a permitted directory
                  for locally loaded files. In this case,
                  <code class="literal">LOCAL</code> data loading is permitted but
                  restricted to files located in the designated
                  directory. Interpretation of the
                  <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code> value
                  is as follows:
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      If the value is the null pointer (the default), it
                      names no directory, with the result that no files
                      are permitted for <code class="literal">LOCAL</code> data
                      loading.
                    </p></li><li class="listitem"><p>
                      If the value is a directory path name,
                      <code class="literal">LOCAL</code> data loading is permitted
                      but restricted to files located in the named
                      directory. Comparison of the directory path name
                      and the path name of files to be loaded is
                      case-sensitive regardless of the case-sensitivity
                      of the underlying file system.
                    </p></li></ul></div></li></ul></div><p>
              For example, to explicitly disable local data loading
              except for files located in the
              <code class="filename">/my/local/data</code> directory, invoke
              <code class="literal">mysql_options()</code> like this:
            </p><pre class="programlisting">unsigned int i = 0;
mysql_options(&amp;mysql,MYSQL_OPT_LOCAL_INFILE,&amp;i);
mysql_options(&amp;mysql,MYSQL_OPT_LOAD_DATA_LOCAL_DIR,"/my/local/data");
</pre><p>
              The <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code>
              option can be set any time during the life of the
              <code class="literal">mysql</code> connection handler. Once set, the
              value applies to all subsequent <code class="literal">LOCAL</code>
              load operations until such time as the value is changed.
            </p><p>
              The <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/source-configuration-options.html#option_cmake_enabled_local_infile" target="_top"><code class="option">ENABLED_LOCAL_INFILE</code></a>
              <span class="command"><strong>CMake</strong></span> option controls the client
              library default for local data loading (see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/source-configuration-options.html" target="_top">MySQL Source-Configuration Options</a>).
            </p><p>
              Successful use of <code class="literal">LOCAL</code> load operations
              by a client also requires that the server permits local
              loading; see <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data-local-security.html" target="_top">Security Considerations for LOAD DATA LOCAL</a>
            </p><p>
              The <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code>
              option was added in MySQL 8.0.21.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_LOCAL_INFILE</code> (argument type:
              optional pointer to <code class="literal">unsigned int</code>)
            </p><p>
              This option affects client-side <code class="literal">LOCAL</code>
              capability for <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA</code></a>
              operations. By default, <code class="literal">LOCAL</code>
              capability is determined by the default compiled into the
              MySQL client library. To control this capability
              explicitly, invoke
              <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> to enable
              or disable the <code class="literal">MYSQL_OPT_LOCAL_INFILE</code>
              option:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  To enable <code class="literal">LOCAL</code> data loading, set
                  the pointer to point to an <code class="literal">unsigned
                  int</code> that has a nonzero value, or omit the
                  pointer argument.
                </p></li><li class="listitem"><p>
                  To disable <code class="literal">LOCAL</code> data loading, set
                  the pointer to point to an <code class="literal">unsigned
                  int</code> that has a zero value.
                </p></li></ul></div><p>
              If <code class="literal">LOCAL</code> capability is disabled, the
              <code class="literal">MYSQL_OPT_LOAD_DATA_LOCAL_DIR</code> option
              can be used to permit restricted local loading of files
              located in a designated directory.
            </p><p>
              The <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/source-configuration-options.html#option_cmake_enabled_local_infile" target="_top"><code class="option">ENABLED_LOCAL_INFILE</code></a>
              <span class="command"><strong>CMake</strong></span> option controls the client
              library default for local data loading (see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/source-configuration-options.html" target="_top">MySQL Source-Configuration Options</a>).
            </p><p>
              Successful use of <code class="literal">LOCAL</code> load operations
              by a client also requires that the server permits local
              loading; see <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data-local-security.html" target="_top">Security Considerations for LOAD DATA LOCAL</a>
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_MAX_ALLOWED_PACKET</code> (argument:
              <code class="literal">unsigned long *</code>)
            </p><p>
              This option sets the client-side maximum size of the
              buffer for client/server communication. If the
              <code class="literal">mysql</code> argument is
              non-<code class="literal">NULL</code>, the call sets the option
              value for that session. If <code class="literal">mysql</code> is
              <code class="literal">NULL</code>, the call sets the option value
              globally for all subsequent sessions for which a
              session-specific value is not specified.
            </p><p>
              Because it is possible to set a session or global maximum
              buffer size, depending on whether the
              <code class="literal">mysql</code> argument is
              non-<code class="literal">NULL</code> or <code class="literal">NULL</code>,
              <a class="link" href="c-api-functions.html#mysql-get-option" title="7.31 mysql_get_option()"><code class="literal">mysql_get_option()</code></a>
              similarly returns the session or global value depending on
              its <code class="literal">mysql</code> argument.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_NAMED_PIPE</code> (argument: not
              used)
            </p><p>
              Use a named pipe to connect to the MySQL server on
              Windows, if the server permits named-pipe connections.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_NET_BUFFER_LENGTH</code> (argument:
              <code class="literal">unsigned long *</code>)
            </p><p>
              This option sets the client-side buffer size for TCP/IP
              and socket communication.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_OPTIONAL_RESULTSET_METADATA</code>
              (argument type: <code class="literal">bool *</code>)
            </p><p>
              This flag makes result set metadata optional. It is an
              alternative to setting the
              <code class="literal">CLIENT_OPTIONAL_RESULTSET_METADATA</code>
              connection flag for the
              <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
              function. For details about managing result set metadata
              transfer, see <a class="xref" href="c-api-optional-metadata.html" title="Chapter 27 C API Optional Result Set Metadata">Chapter 27, <i>C API Optional Result Set Metadata</i></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_PROTOCOL</code> (argument type:
              <code class="literal">unsigned int *</code>)
            </p><p>
              Transport protocol to use for connection. Specify one of
              the enum values of <code class="literal">mysql_protocol_type</code>
              defined in <code class="filename">mysql.h</code>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_READ_TIMEOUT</code> (argument type:
              <code class="literal">unsigned int *</code>)
            </p><p>
              The timeout in seconds for each attempt to read from the
              server. There are retries if necessary, so the total
              effective timeout value is three times the option value.
              You can set the value so that a lost connection can be
              detected earlier than the TCP/IP
              <code class="literal">Close_Wait_Timeout</code> value of 10 minutes.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_RECONNECT</code> (argument type:
              <code class="literal">bool *</code>)
            </p><p>
              Enable or disable automatic reconnection to the server if
              the connection is found to have been lost. Reconnect is
              off by default; this option provides a way to set
              reconnection behavior explicitly. See
              <a class="xref" href="c-api-auto-reconnect.html" title="Chapter 28 C API Automatic Reconnection Control">Chapter 28, <i>C API Automatic Reconnection Control</i></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_RETRY_COUNT</code> (argument type:
              <code class="literal">unsigned int *</code>)
            </p><p>
              The retry count for I/O-related system calls that are
              interrupted while connecting to the server or
              communicating with it. If this option is not specified,
              the default value is 1 (1 retry if the initial call is
              interrupted for 2 tries total).
            </p><p>
              This option can be used only by clients that link against
              a C client library compiled with NDB Cluster support.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_CA</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The path name of the Certificate Authority (CA)
              certificate file. This option, if used, must specify the
              same certificate used by the server.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_CAPATH</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The path name of the directory that contains trusted SSL
              CA certificate files.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_CERT</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The path name of the client public key certificate file.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_CIPHER</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The list of permissible ciphers for SSL encryption.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_CRL</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The path name of the file containing certificate
              revocation lists.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_CRLPATH</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The path name of the directory that contains files
              containing certificate revocation lists.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_FIPS_MODE</code> (argument type:
              <code class="literal">unsigned int *</code>)
            </p><p>
              Controls whether to enable FIPS mode on the client side.
              The <code class="literal">MYSQL_OPT_SSL_FIPS_MODE</code> option
              differs from other
              <code class="literal">MYSQL_OPT_SSL_<em class="replaceable"><code>xxx</code></em></code>
              options in that it is not used to establish encrypted
              connections, but rather to affect which cryptographic
              operations to permit. See <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/fips-mode.html" target="_top">FIPS Support</a>.
            </p><p>
              Permitted option values are
              <code class="literal">SSL_FIPS_MODE_OFF</code>,
              <code class="literal">SSL_FIPS_MODE_ON</code>, and
              <code class="literal">SSL_FIPS_MODE_STRICT</code>.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                If the OpenSSL FIPS Object Module is not available, the
                only permitted value for
                <code class="literal">MYSQL_OPT_SSL_FIPS_MODE</code> is
                <code class="literal">SSL_FIPS_MODE_OFF</code>. In this case,
                setting <code class="literal">MYSQL_OPT_SSL_FIPS_MODE</code> to
                <code class="literal">SSL_FIPS_MODE_ON</code> or
                <code class="literal">SSL_FIPS_MODE_STRICT</code> causes the
                client to produce a warning at startup and to operate in
                non-FIPS mode.
              </p></div></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_KEY</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The path name of the client private key file.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_SSL_MODE</code> (argument type:
              <code class="literal">unsigned int *</code>)
            </p><p>
              The security state to use for the connection to the
              server: <code class="literal">SSL_MODE_DISABLED</code>,
              <code class="literal">SSL_MODE_PREFERRED</code>,
              <code class="literal">SSL_MODE_REQUIRED</code>,
              <code class="literal">SSL_MODE_VERIFY_CA</code>,
              <code class="literal">SSL_MODE_VERIFY_IDENTITY</code>. If this
              option is not specified, the default is
              <code class="literal">SSL_MODE_PREFERRED</code>. These modes are the
              permitted values of the <code class="literal">mysql_ssl_mode</code>
              enumeration defined in <code class="filename">mysql.h</code>. For
              more information about the security states, see the
              description of <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode" target="_top"><code class="option">--ssl-mode</code></a>
              in <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#encrypted-connection-options" target="_top">Command Options for Encrypted Connections</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_TLS_CIPHERSUITES</code> (argument
              type: <code class="literal">char *</code>)
            </p><p>
              Which ciphersuites the client permits for encrypted
              connections that use TLSv1.3. The value is a list of one
              or more colon-separated ciphersuite names. The
              ciphersuites that can be named for this option depend on
              the SSL library used to compile MySQL. For details, see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/encrypted-connection-protocols-ciphers.html" target="_top">Encrypted Connection TLS Protocols and Ciphers</a>.
            </p><p>
              This option was added in MySQL 8.0.16.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_TLS_VERSION</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              Which protocols the client permits for encrypted
              connections. The value is a list of one or more
              comma-separated protocol versions. The protocols that can
              be named for this option depend on the SSL library used to
              compile MySQL. For details, see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/encrypted-connection-protocols-ciphers.html" target="_top">Encrypted Connection TLS Protocols and Ciphers</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_USE_RESULT</code> (argument: not
              used)
            </p><p>
              This option is unused.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_WRITE_TIMEOUT</code> (argument type:
              <code class="literal">unsigned int *</code>)
            </p><p>
              The timeout in seconds for each attempt to write to the
              server. There is a retry if necessary, so the total
              effective timeout value is two times the option value.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_ZSTD_COMPRESSION_LEVEL</code>
              (argument type: <code class="literal">unsigned int *</code>)
            </p><p>
              The compression level to use for connections to the server
              that use the <code class="literal">zstd</code> compression
              algorithm. The permitted levels are from 1 to 22, with
              larger values indicating increasing levels of compression.
              If this option is not specified, the default
              <code class="literal">zstd</code> compression level is 3. The
              compression level setting has no effect on connections
              that do not use <code class="literal">zstd</code> compression.
            </p><p>
              For more information, see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connection-compression-control.html" target="_top">Connection Compression Control</a>.
            </p><p>
              This option was added in MySQL 8.0.18. For
              <a class="link" href="c-api-asynchronous-interface.html" title="Chapter 12 C API Asynchronous Interface">asynchronous
              operations</a>, the option has no effect until MySQL
              8.0.21.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_PLUGIN_DIR</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The directory in which to look for client plugins.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_READ_DEFAULT_FILE</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              Read options from the named option file instead of from
              <code class="filename">my.cnf</code>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_READ_DEFAULT_GROUP</code> (argument
              type: <code class="literal">char *</code>)
            </p><p>
              Read options from the named group from
              <code class="filename">my.cnf</code> or the file specified with
              <code class="literal">MYSQL_READ_DEFAULT_FILE</code>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_REPORT_DATA_TRUNCATION</code> (argument
              type: <code class="literal">bool *</code>)
            </p><p>
              Enable or disable reporting of data truncation errors for
              prepared statements using the <code class="literal">error</code>
              member of <code class="literal">MYSQL_BIND</code> structures.
              (Default: enabled.)
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The path name to a file in PEM format containing a
              client-side copy of the public key required by the server
              for RSA key pair-based password exchange. This option
              applies to clients that authenticate with the
              <code class="literal">sha256_password</code> or
              <code class="literal">caching_sha2_password</code> authentication
              plugin. This option is ignored for accounts that do not
              authenticate with one of those plugins. It is also ignored
              if RSA-based password exchange is not used, as is the case
              when the client connects to the server using a secure
              connection.
            </p><p>
              If <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code> is given and
              specifies a valid public key file, it takes precedence
              over <code class="literal">MYSQL_OPT_GET_SERVER_PUBLIC_KEY</code>.
            </p><p>
              For information about the
              <code class="literal">sha256_password</code> and
              <code class="literal">caching_sha2_password</code> plugins, see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/sha256-pluggable-authentication.html" target="_top">SHA-256 Pluggable Authentication</a>, and
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html" target="_top">Caching SHA-2 Pluggable Authentication</a>.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_SET_CHARSET_DIR</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The path name of the directory that contains character set
              definition files.
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_SET_CHARSET_NAME</code> (argument type:
              <code class="literal">char *</code>)
            </p><p>
              The name of the character set to use as the default
              character set. The argument can be
              <code class="literal">MYSQL_AUTODETECT_CHARSET_NAME</code> to cause
              the character set to be autodetected based on the
              operating system setting (see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/charset-connection.html" target="_top">Connection Character Sets and Collations</a>).
            </p></li><li class="listitem"><p>
              <code class="literal">MYSQL_SHARED_MEMORY_BASE_NAME</code> (argument
              type: <code class="literal">char *</code>)
            </p><p>
              The name of the shared-memory object for communication to
              the server on Windows, if the server supports
              shared-memory connections. Specify the same value as used
              for the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_shared_memory_base_name" target="_top"><code class="literal">shared_memory_base_name</code></a>
              system variable. of the <span class="command"><strong>mysqld</strong></span> server
              you want to connect to.
            </p></li></ul></div><p>
          The <code class="literal">client</code> group is always read if you use
          <code class="literal">MYSQL_READ_DEFAULT_FILE</code> or
          <code class="literal">MYSQL_READ_DEFAULT_GROUP</code>.
        </p><p>
          The specified group in the option file may contain the
          following options.
        </p><div class="informaltable"><table summary="Options that may appear in the option file and a description of each option."><col width="35%"><col width="65%"><thead><tr>
              <th>Option</th>
              <th>Description</th>
            </tr></thead><tbody><tr>
              <td><code class="literal">character-sets-dir=<em class="replaceable"><code>dir_name</code></em></code></td>
              <td>The directory where character sets are installed.</td>
            </tr><tr>
              <td><code class="literal">compress</code></td>
              <td>Use the compressed client/server protocol.</td>
            </tr><tr>
              <td><code class="literal">connect-timeout=<em class="replaceable"><code>seconds</code></em></code></td>
              <td>The connect timeout in seconds. On Linux this timeout is also used for
                waiting for the first answer from the server.</td>
            </tr><tr>
              <td><code class="literal">database=<em class="replaceable"><code>db_name</code></em></code></td>
              <td>Connect to this database if no database was specified in the connect
                command.</td>
            </tr><tr>
              <td><code class="literal">debug</code></td>
              <td>Debug options.</td>
            </tr><tr>
              <td><code class="literal">default-character-set=<em class="replaceable"><code>charset_name</code></em></code></td>
              <td>The default character set to use.</td>
            </tr><tr>
              <td><code class="literal">disable-local-infile</code></td>
              <td>Disable use of <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA
                LOCAL</code></a>.</td>
            </tr><tr>
              <td><code class="literal">enable-cleartext-plugin</code></td>
              <td>Enable the <code class="literal">mysql_clear_password</code> cleartext
                authentication plugin.</td>
            </tr><tr>
              <td><code class="literal">host=<em class="replaceable"><code>host_name</code></em></code></td>
              <td>Default host name.</td>
            </tr><tr>
              <td><code class="literal">init-command=<em class="replaceable"><code>stmt</code></em></code></td>
              <td>Statement to execute when connecting to MySQL server. Automatically
                re-executed if reconnection occurs.</td>
            </tr><tr>
              <td><code class="literal">interactive-timeout=<em class="replaceable"><code>seconds</code></em></code></td>
              <td>Same as specifying <code class="literal">CLIENT_INTERACTIVE</code> to
                <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
                See <a class="xref" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()">Section 7.55, “mysql_real_connect()”</a>.</td>
            </tr><tr>
              <td><code class="literal">local-infile[={0|1}]</code></td>
              <td>If no argument or nonzero argument, enable use of
                <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA
                LOCAL</code></a>; otherwise disable.</td>
            </tr><tr>
              <td><code class="literal">max_allowed_packet=<em class="replaceable"><code>bytes</code></em></code></td>
              <td>Maximum size of packet that client can read from server.</td>
            </tr><tr>
              <td><code class="literal">multi-queries</code>, <code class="literal">multi-results</code></td>
              <td>Enable multiple result sets from multiple-statement executions or stored
                procedures.</td>
            </tr><tr>
              <td><code class="literal">multi-statements</code></td>
              <td>Enable the client to send multiple statements in a single string
                (separated by <code class="literal">;</code> characters).</td>
            </tr><tr>
              <td><code class="literal">password=<em class="replaceable"><code>password</code></em></code></td>
              <td>Default password.</td>
            </tr><tr>
              <td><code class="literal">pipe</code></td>
              <td>Use named pipes to connect to a MySQL server on Windows.</td>
            </tr><tr>
              <td><code class="literal">port=<em class="replaceable"><code>port_num</code></em></code></td>
              <td>Default port number.</td>
            </tr><tr>
              <td><code class="literal">protocol={TCP|SOCKET|PIPE|MEMORY}</code></td>
              <td>The protocol to use when connecting to the server.</td>
            </tr><tr>
              <td><code class="literal">return-found-rows</code></td>
              <td>Tell <a class="link" href="c-api-functions.html#mysql-info" title="7.37 mysql_info()"><code class="literal">mysql_info()</code></a> to return found rows
                instead of updated rows when using
                <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_top"><code class="literal">UPDATE</code></a>.</td>
            </tr><tr>
              <td><code class="literal">shared-memory-base-name=<em class="replaceable"><code>name</code></em></code></td>
              <td>Shared-memory name to use to connect to server.</td>
            </tr><tr>
              <td><code class="literal">socket={<em class="replaceable"><code>file_name</code></em>|<em class="replaceable"><code>pipe_name</code></em>}</code></td>
              <td>Default socket file.</td>
            </tr><tr>
              <td><code class="literal">ssl-ca=<em class="replaceable"><code>file_name</code></em></code></td>
              <td>Certificate Authority file.</td>
            </tr><tr>
              <td><code class="literal">ssl-capath=<em class="replaceable"><code>dir_name</code></em></code></td>
              <td>Certificate Authority directory.</td>
            </tr><tr>
              <td><code class="literal">ssl-cert=<em class="replaceable"><code>file_name</code></em></code></td>
              <td>Certificate file.</td>
            </tr><tr>
              <td><code class="literal">ssl-cipher=<em class="replaceable"><code>cipher_list</code></em></code></td>
              <td>Permissible SSL ciphers.</td>
            </tr><tr>
              <td><code class="literal">ssl-key=<em class="replaceable"><code>file_name</code></em></code></td>
              <td>Key file.</td>
            </tr><tr>
              <td><code class="literal">timeout=<em class="replaceable"><code>seconds</code></em></code></td>
              <td>Like <code class="literal">connect-timeout</code>.</td>
            </tr><tr>
              <td><code class="literal">user</code></td>
              <td>Default user.</td>
            </tr></tbody></table></div><p>
          <code class="literal">timeout</code> has been replaced by
          <code class="literal">connect-timeout</code>, but
          <code class="literal">timeout</code> is still supported for backward
          compatibility.
        </p><p>
          For more information about option files used by MySQL
          programs, see <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/option-files.html" target="_top">Using Option Files</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-options-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if you specify an unknown option.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-options-example"></a>Example</h3></div></div></div><p>
          The following <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a>
          calls request the use of compression in the client/server
          protocol, cause options to be read from the
          <code class="literal">[odbc]</code> group in option files, and disable
          transaction autocommit mode:
        </p><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
mysql_options(&amp;mysql,MYSQL_OPT_COMPRESS,0);
mysql_options(&amp;mysql,MYSQL_READ_DEFAULT_GROUP,"odbc");
mysql_options(&amp;mysql,MYSQL_INIT_COMMAND,"SET autocommit=0");
if (!mysql_real_connect(&amp;mysql,"host","user","<em class="replaceable"><code>passwd</code></em>","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-options4"></a>7.52 mysql_options4()</h2></div></div></div><a class="indexterm" name="idm46079470142944"></a><pre class="programlisting">int
mysql_options4(MYSQL *mysql,
               enum mysql_option option,
               const void *arg1,
               const void *arg2)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-options4-description"></a>Description</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-options4" title="7.52 mysql_options4()"><code class="literal">mysql_options4()</code></a> is similar to
          <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> but has an
          extra fourth argument so that two values can be passed for the
          option specified in the second argument.
        </p><p>
          The following list describes the permitted options, their
          effect, and how <code class="literal">arg1</code> and
          <code class="literal">arg2</code> are used.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_ADD</code> (argument
              types: <code class="literal">char *, char *</code>)
            </p><p>
              This option adds an attribute key-value pair to the
              current set of connection attributes to pass to the server
              at connect time. Both arguments are pointers to
              null-terminated strings. The first and second strings
              indicate the key and value, respectively. If the key is
              empty or already exists in the current set of connection
              attributes, an error occurs. Comparison of the key name
              with existing keys is case-sensitive.
            </p><p>
              Key names that begin with an underscore
              (<code class="literal">_</code>) are reserved for internal use and
              should not be created by application programs. This
              convention permits new attributes to be introduced by
              MySQL without colliding with application attributes.
            </p><p>
              <a class="link" href="c-api-functions.html#mysql-options4" title="7.52 mysql_options4()"><code class="literal">mysql_options4()</code></a> imposes a
              limit of 64KB on the aggregate size of connection
              attribute data it will accept. For calls that cause this
              limit to be exceeded, a
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_invalid_parameter_no" target="_top"><code class="literal">CR_INVALID_PARAMETER_NO</code></a>
              error occurs. Attribute size-limit checks also occur on
              the server side. For details, see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-connection-attribute-tables.html" target="_top">Performance Schema Connection Attribute Tables</a>,
              which also describes how the Performance Schema exposes
              connection attributes through the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-session-connect-attrs-table.html" target="_top"><code class="literal">session_connect_attrs</code></a> and
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-session-account-connect-attrs-table.html" target="_top"><code class="literal">session_account_connect_attrs</code></a>
              tables.
            </p><p>
              See also the descriptions for the
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_RESET</code> and
              <code class="literal">MYSQL_OPT_CONNECT_ATTR_DELETE</code> options
              in the description of the
              <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> function.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-options4-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if you specify an unknown option.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-options4-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_duplicate_connection_attr" target="_top"><code class="literal">CR_DUPLICATE_CONNECTION_ATTR</code></a>
            </p><p>
              A duplicate attribute name was specified.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_invalid_parameter_no" target="_top"><code class="literal">CR_INVALID_PARAMETER_NO</code></a>
            </p><p>
              A key name was empty or the amount of key-value connection
              attribute data exceeds 64KB limit.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_out_of_memory" target="_top"><code class="literal">CR_OUT_OF_MEMORY</code></a>
            </p><p>
              Out of memory.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-options4-example"></a>Example</h3></div></div></div><p>
          This example demonstrates the calls that specify connection
          attributes:
        </p><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
mysql_options(&amp;mysql,MYSQL_OPT_CONNECT_ATTR_RESET, 0);
mysql_options4(&amp;mysql,MYSQL_OPT_CONNECT_ATTR_ADD, "key1", "value1");
mysql_options4(&amp;mysql,MYSQL_OPT_CONNECT_ATTR_ADD, "key2", "value2");
mysql_options4(&amp;mysql,MYSQL_OPT_CONNECT_ATTR_ADD, "key3", "value3");
mysql_options(&amp;mysql,MYSQL_OPT_CONNECT_ATTR_DELETE, "key1");
if (!mysql_real_connect(&amp;mysql,"host","user","<em class="replaceable"><code>passwd</code></em>","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
        mysql_error(&amp;mysql));
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-ping"></a>7.53 mysql_ping()</h2></div></div></div><a class="indexterm" name="idm46079470104208"></a><pre class="programlisting">int
mysql_ping(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-ping-description"></a>Description</h3></div></div></div><p>
          Checks whether the connection to the server is working. If the
          connection has gone down and auto-reconnect is enabled an
          attempt to reconnect is made. If the connection is down and
          auto-reconnect is disabled,
          <a class="link" href="c-api-functions.html#mysql-ping" title="7.53 mysql_ping()"><code class="literal">mysql_ping()</code></a> returns an error.
        </p><p>
          Auto-reconnect is disabled by default. To enable it, call
          <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> with the
          <code class="literal">MYSQL_OPT_RECONNECT</code> option. For details,
          see <a class="xref" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()">Section 7.51, “mysql_options()”</a>.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-ping" title="7.53 mysql_ping()"><code class="literal">mysql_ping()</code></a> can be used by
          clients that remain idle for a long while, to check whether
          the server has closed the connection and reconnect if
          necessary.
        </p><p>
          If <a class="link" href="c-api-functions.html#mysql-ping" title="7.53 mysql_ping()"><code class="literal">mysql_ping()</code></a>) does cause a
          reconnect, there is no explicit indication of it. To determine
          whether a reconnect occurs, call
          <a class="link" href="c-api-functions.html#mysql-thread-id" title="7.82 mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a> to get the
          original connection identifier before calling
          <a class="link" href="c-api-functions.html#mysql-ping" title="7.53 mysql_ping()"><code class="literal">mysql_ping()</code></a>, then call
          <a class="link" href="c-api-functions.html#mysql-thread-id" title="7.82 mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a> again to see
          whether the identifier has changed.
        </p><p>
          If reconnect occurs, some characteristics of the connection
          will have been reset. For details about these characteristics,
          see <a class="xref" href="c-api-auto-reconnect.html" title="Chapter 28 C API Automatic Reconnection Control">Chapter 28, <i>C API Automatic Reconnection Control</i></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-ping-return-values"></a>Return Values</h3></div></div></div><p>
          Zero if the connection to the server is active. Nonzero if an
          error occurred. A nonzero return does not indicate whether the
          MySQL server itself is down; the connection might be broken
          for other reasons such as network problems.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-ping-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-query"></a>7.54 mysql_query()</h2></div></div></div><a class="indexterm" name="idm46079470075344"></a><pre class="programlisting">int
mysql_query(MYSQL *mysql,
            const char *stmt_str)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-query-description"></a>Description</h3></div></div></div><p>
          Executes the SQL statement pointed to by the null-terminated
          string <code class="literal">stmt_str</code>. Normally, the string must
          consist of a single SQL statement without a terminating
          semicolon (<code class="literal">;</code>) or <code class="literal">\g</code>. If
          multiple-statement execution has been enabled, the string can
          contain several statements separated by semicolons. See
          <a class="xref" href="c-api-multiple-queries.html" title="Chapter 23 C API Multiple Statement Execution Support">Chapter 23, <i>C API Multiple Statement Execution Support</i></a>.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> cannot be used
          for statements that contain binary data; you must use
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> instead.
          (Binary data may contain the <code class="literal">\0</code> character,
          which <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> interprets
          as the end of the statement string.)
        </p><p>
          To determine whether a statement returns a result set, call
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count()</code></a>. See
          <a class="xref" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()">Section 7.23, “mysql_field_count()”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-query-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-query-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-real-connect"></a>7.55 mysql_real_connect()</h2></div></div></div><a class="indexterm" name="idm46079470047120"></a><pre class="programlisting">MYSQL *
mysql_real_connect(MYSQL *mysql,
                   const char *host,
                   const char *user,
                   const char *passwd,
                   const char *db,
                   unsigned int port,
                   const char *unix_socket,
                   unsigned long client_flag)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-connect-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> is a
            synchronous function. Its asynchronous counterpart is
            <a class="link" href="c-api-asynchronous-functions.html#mysql-real-connect-nonblocking" title="15.4 mysql_real_connect_nonblocking()"><code class="literal">mysql_real_connect_nonblocking()</code></a>,
            for use by applications that require asynchronous
            communication with the server. See
            <a class="xref" href="c-api-asynchronous-interface.html" title="Chapter 12 C API Asynchronous Interface">Chapter 12, <i>C API Asynchronous Interface</i></a>.
          </p><p>
            To connect using a DNS SRV record, use
            <a class="link" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()"><code class="literal">mysql_real_connect_dns_srv()</code></a>.
            See <a class="xref" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()">Section 7.56, “mysql_real_connect_dns_srv()”</a>.
          </p></div><p>
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> attempts
          to establish a connection to a MySQL server running on
          <code class="literal">host</code>. Client programs must successfully
          connect to a server before executing any other API functions
          that require a valid <code class="literal">MYSQL</code> connection
          handler structure.
        </p><p>
          Specify the arguments as follows:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              For the first argument, specify the address of an existing
              <code class="literal">MYSQL</code> structure. Before calling
              <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, call
              <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a> to initialize
              the <code class="literal">MYSQL</code> structure. You can change a
              lot of connect options with the
              <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> call. See
              <a class="xref" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()">Section 7.51, “mysql_options()”</a>.
            </p></li><li class="listitem"><p>
              The value of <code class="literal">host</code> may be either a host
              name or an IP address. The client attempts to connect as
              follows:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  If <code class="literal">host</code> is <code class="literal">NULL</code>
                  or the string <code class="literal">"localhost"</code>, a
                  connection to the local host is assumed:
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      On Windows, the client connects using a
                      shared-memory connection, if the server has
                      shared-memory connections enabled.
                    </p></li><li class="listitem"><p>
                      On Unix, the client connects using a Unix socket
                      file. The <code class="literal">unix_socket</code> argument
                      or the <code class="literal">MYSQL_UNIX_PORT</code>
                      environment variable may be used to specify the
                      socket name.
                    </p></li></ul></div></li><li class="listitem"><p>
                  On Windows, if <code class="literal">host</code> is
                  <code class="literal">"."</code>, or TCP/IP is not enabled and
                  no <code class="literal">unix_socket</code> is specified or the
                  host is empty, the client connects using a named pipe,
                  if the server has named-pipe connections enabled. If
                  named-pipe connections are not enabled, an error
                  occurs.
                </p></li><li class="listitem"><p>
                  Otherwise, TCP/IP is used.
                </p></li></ul></div><p>
              You can also influence the type of connection to use with
              the <code class="literal">MYSQL_OPT_PROTOCOL</code> or
              <code class="literal">MYSQL_OPT_NAMED_PIPE</code> options to
              <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a>. The type
              of connection must be supported by the server.
            </p></li><li class="listitem"><p>
              The <code class="literal">user</code> argument contains the user's
              MySQL login ID. If <code class="literal">user</code> is
              <code class="literal">NULL</code> or the empty string
              <code class="literal">""</code>, the current user is assumed. Under
              Unix, this is the current login name. Under Windows ODBC,
              the current user name must be specified explicitly. See
              the Connector/ODBC section of
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connectors-apis.html" target="_top">Connectors and APIs</a>.
            </p></li><li class="listitem"><p>
              The <code class="literal">passwd</code> argument contains the
              password for <code class="literal">user</code>. If
              <code class="literal">passwd</code> is <code class="literal">NULL</code>, only
              entries in the <code class="literal">user</code> table for the user
              that have a blank (empty) password field are checked for a
              match. This enables the database administrator to set up
              the MySQL privilege system in such a way that users get
              different privileges depending on whether they have
              specified a password.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                Do not attempt to encrypt the password before calling
                <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>;
                password encryption is handled automatically by the
                client API.
              </p></div></li><li class="listitem"><p>
              The <code class="literal">user</code> and <code class="literal">passwd</code>
              arguments use whatever character set has been configured
              for the <code class="literal">MYSQL</code> object. By default, this
              is <code class="literal">utf8mb4</code>, but can be changed by
              calling <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options(mysql,
              MYSQL_SET_CHARSET_NAME,
              "<em class="replaceable"><code>charset_name</code></em>")</code></a> prior
              to connecting.
            </p></li><li class="listitem"><p>
              <code class="literal">db</code> is the database name. If
              <code class="literal">db</code> is not <code class="literal">NULL</code>, the
              connection sets the default database to this value.
            </p></li><li class="listitem"><p>
              If <code class="literal">port</code> is not 0, the value is used as
              the port number for the TCP/IP connection. Note that the
              <code class="literal">host</code> argument determines the type of
              the connection.
            </p></li><li class="listitem"><p>
              If <code class="literal">unix_socket</code> is not
              <code class="literal">NULL</code>, the string specifies the socket
              or named pipe to use. Note that the
              <code class="literal">host</code> argument determines the type of
              the connection.
            </p></li><li class="listitem"><p>
              The value of <code class="literal">client_flag</code> is usually 0,
              but can be set to a combination of the following flags to
              enable certain features:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">CAN_HANDLE_EXPIRED_PASSWORDS</code>: The
                  client can handle expired passwords. For more
                  information, see
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/expired-password-handling.html" target="_top">Server Handling of Expired Passwords</a>.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_COMPRESS</code>: Use compression in
                  the client/server protocol.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_FOUND_ROWS</code>: Return the
                  number of found (matched) rows, not the number of
                  changed rows.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_IGNORE_SIGPIPE</code>: Prevents the
                  client library from installing a
                  <code class="literal">SIGPIPE</code> signal handler. This can be
                  used to avoid conflicts with a handler that the
                  application has already installed.
                </p><a class="indexterm" name="idm46079469974704"></a></li><li class="listitem"><p>
                  <code class="literal">CLIENT_IGNORE_SPACE</code>: Permit spaces
                  after function names. Makes all functions names
                  reserved words.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_INTERACTIVE</code>: Permit
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_interactive_timeout" target="_top"><code class="literal">interactive_timeout</code></a>
                  seconds of inactivity (rather than
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_wait_timeout" target="_top"><code class="literal">wait_timeout</code></a> seconds)
                  before closing the connection. The client's session
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_wait_timeout" target="_top"><code class="literal">wait_timeout</code></a> variable
                  is set to the value of the session
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_interactive_timeout" target="_top"><code class="literal">interactive_timeout</code></a>
                  variable.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_LOCAL_FILES</code>: Enable
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA
                  LOCAL</code></a> handling.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_MULTI_RESULTS</code>: Tell the
                  server that the client can handle multiple result sets
                  from multiple-statement executions or stored
                  procedures. This flag is automatically enabled if
                  <code class="literal">CLIENT_MULTI_STATEMENTS</code> is enabled.
                  See the note following this table for more information
                  about this flag.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_MULTI_STATEMENTS</code>: Tell the
                  server that the client may send multiple statements in
                  a single string (separated by <code class="literal">;</code>
                  characters). If this flag is not set,
                  multiple-statement execution is disabled. See the note
                  following this table for more information about this
                  flag.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_NO_SCHEMA</code> Do not permit
                  <em class="replaceable"><code>db_name.tbl_name.col_name</code></em>
                  syntax. This is for ODBC. It causes the parser to
                  generate an error if you use that syntax, which is
                  useful for trapping bugs in some ODBC programs.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_ODBC</code>: Unused.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_OPTIONAL_RESULTSET_METADATA</code>:
                  This flag makes result set metadata optional.
                  Suppression of metadata transfer can improve
                  performance, particularly for sessions that execute
                  many queries that return few rows each. For details
                  about managing result set metadata transfer, see
                  <a class="xref" href="c-api-optional-metadata.html" title="Chapter 27 C API Optional Result Set Metadata">Chapter 27, <i>C API Optional Result Set Metadata</i></a>.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_SSL</code>: Use SSL (encrypted
                  protocol). Do not set this option within an
                  application program; it is set internally in the
                  client library. Instead, use
                  <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> or
                  <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> before
                  calling
                  <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
                </p></li><li class="listitem"><p>
                  <code class="literal">CLIENT_REMEMBER_OPTIONS</code> Remember
                  options specified by calls to
                  <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a>.
                  Without this option, if
                  <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
                  fails, you must repeat the
                  <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> calls
                  before trying to connect again. With this option, the
                  <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> calls
                  need not be repeated.
                </p></li></ul></div></li></ul></div><p>
          If your program uses <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a>
          statements to execute stored procedures, the
          <code class="literal">CLIENT_MULTI_RESULTS</code> flag must be enabled.
          This is because each <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a>
          returns a result to indicate the call status, in addition to
          any result sets that might be returned by statements executed
          within the procedure. Because
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a> can return multiple
          results, process them using a loop that calls
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
          determine whether there are more results.
        </p><p>
          <code class="literal">CLIENT_MULTI_RESULTS</code> can be enabled when
          you call <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>,
          either explicitly by passing the
          <code class="literal">CLIENT_MULTI_RESULTS</code> flag itself, or
          implicitly by passing
          <code class="literal">CLIENT_MULTI_STATEMENTS</code> (which also enables
          <code class="literal">CLIENT_MULTI_RESULTS</code>).
          <code class="literal">CLIENT_MULTI_RESULTS</code> is enabled by default.
        </p><p>
          If you enable <code class="literal">CLIENT_MULTI_STATEMENTS</code> or
          <code class="literal">CLIENT_MULTI_RESULTS</code>, process the result
          for every call to
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
          loop that calls
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
          determine whether there are more results. For an example, see
          <a class="xref" href="c-api-multiple-queries.html" title="Chapter 23 C API Multiple Statement Execution Support">Chapter 23, <i>C API Multiple Statement Execution Support</i></a>.
        </p><p>
          For some arguments, it is possible to have the value taken
          from an option file rather than from an explicit value in the
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call. To
          do this, call <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a>
          with the <code class="literal">MYSQL_READ_DEFAULT_FILE</code> or
          <code class="literal">MYSQL_READ_DEFAULT_GROUP</code> option before
          calling <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
          Then, in the
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call,
          specify the <span class="quote">“<span class="quote">no-value</span>”</span> value for each argument to
          be read from an option file:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              For <code class="literal">host</code>, specify a value of
              <code class="literal">NULL</code> or the empty string
              (<code class="literal">""</code>).
            </p></li><li class="listitem"><p>
              For <code class="literal">user</code>, specify a value of
              <code class="literal">NULL</code> or the empty string.
            </p></li><li class="listitem"><p>
              For <code class="literal">passwd</code>, specify a value of
              <code class="literal">NULL</code>. (For the password, a value of the
              empty string in the
              <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call
              cannot be overridden in an option file, because the empty
              string indicates explicitly that the MySQL account must
              have an empty password.)
            </p></li><li class="listitem"><p>
              For <code class="literal">db</code>, specify a value of
              <code class="literal">NULL</code> or the empty string.
            </p></li><li class="listitem"><p>
              For <code class="literal">port</code>, specify a value of 0.
            </p></li><li class="listitem"><p>
              For <code class="literal">unix_socket</code>, specify a value of
              <code class="literal">NULL</code>.
            </p></li></ul></div><p>
          If no value is found in an option file for an argument, its
          default value is used as indicated in the descriptions given
          earlier in this section.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-connect-return-values"></a>Return Values</h3></div></div></div><p>
          A <code class="literal">MYSQL*</code> connection handler if the
          connection was successful, <code class="literal">NULL</code> if the
          connection was unsuccessful. For a successful connection, the
          return value is the same as the value of the first argument.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-connect-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_conn_host_error" target="_top"><code class="literal">CR_CONN_HOST_ERROR</code></a>
            </p><p>
              Failed to connect to the MySQL server.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_connection_error" target="_top"><code class="literal">CR_CONNECTION_ERROR</code></a>
            </p><p>
              Failed to connect to the local MySQL server.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_ipsock_error" target="_top"><code class="literal">CR_IPSOCK_ERROR</code></a>
            </p><p>
              Failed to create an IP socket.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_out_of_memory" target="_top"><code class="literal">CR_OUT_OF_MEMORY</code></a>
            </p><p>
              Out of memory.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_socket_create_error" target="_top"><code class="literal">CR_SOCKET_CREATE_ERROR</code></a>
            </p><p>
              Failed to create a Unix socket.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_host" target="_top"><code class="literal">CR_UNKNOWN_HOST</code></a>
            </p><p>
              Failed to find the IP address for the host name.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_version_error" target="_top"><code class="literal">CR_VERSION_ERROR</code></a>
            </p><p>
              A protocol mismatch resulted from attempting to connect to
              a server with a client library that uses a different
              protocol version.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_namedpipeopen_error" target="_top"><code class="literal">CR_NAMEDPIPEOPEN_ERROR</code></a>
            </p><p>
              Failed to create a named pipe on Windows.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_namedpipewait_error" target="_top"><code class="literal">CR_NAMEDPIPEWAIT_ERROR</code></a>
            </p><p>
              Failed to wait for a named pipe on Windows.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_namedpipesetstate_error" target="_top"><code class="literal">CR_NAMEDPIPESETSTATE_ERROR</code></a>
            </p><p>
              Failed to get a pipe handler on Windows.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              If <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_connect_timeout" target="_top"><code class="literal">connect_timeout</code></a> &gt; 0
              and it took longer than
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_connect_timeout" target="_top"><code class="literal">connect_timeout</code></a> seconds
              to connect to the server or if the server died while
              executing the <code class="literal">init-command</code>.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_already_connected" target="_top"><code class="literal">CR_ALREADY_CONNECTED</code></a>
            </p><p>
              The <code class="literal">MYSQL</code> connection handler is already
              connected.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-connect-example"></a>Example</h3></div></div></div><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
mysql_options(&amp;mysql,MYSQL_READ_DEFAULT_GROUP,"your_prog_name");
if (!mysql_real_connect(&amp;mysql,"host","user","<em class="replaceable"><code>passwd</code></em>","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}
</pre><p>
          By using <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> the
          MySQL client library reads the <code class="literal">[client]</code> and
          <code class="literal">[your_prog_name]</code> sections in the
          <code class="filename">my.cnf</code> file. This enables you to add
          options to the <code class="literal">[your_prog_name]</code> section to
          ensure that your program works, even if someone has set up
          MySQL in some nonstandard way.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-real-connect-dns-srv"></a>7.56 mysql_real_connect_dns_srv()</h2></div></div></div><a class="indexterm" name="idm46079469849984"></a><a class="indexterm" name="idm46079469848896"></a><pre class="programlisting">MYSQL *
mysql_real_connect_dns_srv(MYSQL *mysql,
                           const char *dns_srv_name,
                           const char *user,
                           const char *passwd,
                           const char *db,
                           unsigned long client_flag)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-connect-dns-srv-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <a class="link" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()"><code class="literal">mysql_real_connect_dns_srv()</code></a>
            is a synchronous function. Unlike
            <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, it has
            no asynchronous counterpart.
          </p></div><p>
          <a class="link" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()"><code class="literal">mysql_real_connect_dns_srv()</code></a>
          is similar to
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, except
          that the argument list does not specify the particular host of
          the MySQL server to connect to. Instead, it names a DNS SRV
          record that specifies a group of servers. For information
          about DNS SRV support in MySQL, see
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/connecting-using-dns-srv.html" target="_top">Connecting to the Server Using DNS SRV Records</a>.
        </p><p>
          The <code class="literal">dns_srv_name</code> argument for
          <a class="link" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()"><code class="literal">mysql_real_connect_dns_srv()</code></a>
          takes the place of the <code class="literal">host</code>,
          <code class="literal">port</code>, and <code class="literal">unix_socket</code>
          arguments for
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. The
          <code class="literal">dns_srv_name</code> argument names a DNS SRV
          record that determines the candidate hosts to use for
          establishing a connection to a MySQL server.
        </p><p>
          The <code class="literal">mysql</code>, <code class="literal">user</code>,
          <code class="literal">passwd</code>, <code class="literal">db</code>, and
          <code class="literal">client_flag</code> arguments to
          <a class="link" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()"><code class="literal">mysql_real_connect_dns_srv()</code></a>
          have the same meanings as for
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. For
          descriptions of their meanings, see
          <a class="xref" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()">Section 7.55, “mysql_real_connect()”</a>.
        </p><p>
          Suppose that DNS is configured with this SRV information for
          the <code class="literal">example.com</code> domain:
        </p><pre class="programlisting">Name                     TTL   Class   Priority Weight Port Target
_mysql._tcp.example.com. 86400 IN SRV  0        5      3306 host1.example.com
_mysql._tcp.example.com. 86400 IN SRV  0        10     3306 host2.example.com
_mysql._tcp.example.com. 86400 IN SRV  10       5      3306 host3.example.com
_mysql._tcp.example.com. 86400 IN SRV  20       5      3306 host4.example.com
</pre><p>
          To use that DNS SRV record, pass
          <code class="literal">"_mysql._tcp.example.com"</code> as the
          <code class="literal">dns_srv_name</code> argument to
          <a class="link" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()"><code class="literal">mysql_real_connect_dns_srv()</code></a>,
          which then attempts a connection to each server in the group
          until a successful connection is established. A failure to
          connect occurs only if a connection cannot be established to
          any of the servers. The priority and weight values in the DNS
          SRV record determine the order in which servers should be
          tried.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()"><code class="literal">mysql_real_connect_dns_srv()</code></a>
          attempts to establish TCP connections only.
        </p><p>
          The client library performs a DNS SRV lookup for each call to
          <a class="link" href="c-api-functions.html#mysql-real-connect-dns-srv" title="7.56 mysql_real_connect_dns_srv()"><code class="literal">mysql_real_connect_dns_srv()</code></a>.
          The client library does no caching of lookup results.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-connect-dns-srv-return-values"></a>Return Values</h3></div></div></div><p>
          A <code class="literal">MYSQL*</code> connection handler if the
          connection was successful, <code class="literal">NULL</code> if the
          connection was unsuccessful. For a successful connection, the
          return value is the same as the value of the first argument.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-connect-dns-srv-errors"></a>Errors</h3></div></div></div><p>
          The same that you can get from
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, plus:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_dns_srv_lookup_failed" target="_top"><code class="literal">CR_DNS_SRV_LOOKUP_FAILED</code></a>
            </p><p>
              DNS SRV lookup failed.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-connect-dns-srv-example"></a>Example</h3></div></div></div><p>
          The following example uses the name of the DNS SRV record
          shown previously as the source of candidate servers for
          establishing a connection.
        </p><pre class="programlisting">MYSQL mysql;
const char *dns_srv_name = "_mysql._tcp.example.com";

mysql_init(&amp;mysql);
if (!mysql_real_connect_dns_srv(&amp;mysql,dns_srv_name,"user","<em class="replaceable"><code>passwd</code></em>","database",0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-real-escape-string"></a>7.57 mysql_real_escape_string()</h2></div></div></div><a class="indexterm" name="idm46079469801600"></a><pre class="programlisting">unsigned long
mysql_real_escape_string(MYSQL *mysql,
                         char *to,
                         const char *from,
                         unsigned long length)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-escape-string-description"></a>Description</h3></div></div></div><p>
          This function creates a legal SQL string for use in an SQL
          statement. See <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-literals.html" target="_top">String Literals</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <a class="link" href="c-api-functions.html#mysql-real-escape-string" title="7.57 mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
            fails and produces an
            <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_insecure_api_err" target="_top"><code class="literal">CR_INSECURE_API_ERR</code></a> error if
            the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html#sqlmode_no_backslash_escapes" target="_top"><code class="literal">NO_BACKSLASH_ESCAPES</code></a>
            SQL mode is enabled. In this case, the function cannot
            escape quote characters except by doubling them, and to do
            this properly, it must know more information about the
            quoting context than is available. Instead, use
            <a class="link" href="c-api-functions.html#mysql-real-escape-string-quote" title="7.58 mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>,
            which takes an extra argument for specifying the quoting
            context.
          </p></div><p>
          The <code class="literal">mysql</code> argument must be a valid, open
          connection because character escaping depends on the character
          set in use by the server.
        </p><a class="indexterm" name="idm46079469789616"></a><p>
          The string in the <code class="literal">from</code> argument is encoded
          to produce an escaped SQL string, taking into account the
          current character set of the connection. The result is placed
          in the <code class="literal">to</code> argument, followed by a
          terminating null byte.
        </p><p>
          Characters encoded are <code class="literal">\</code>,
          <code class="literal">'</code>, <code class="literal">"</code>,
          <code class="literal">NUL</code> (ASCII 0), <code class="literal">\n</code>,
          <code class="literal">\r</code>, and Control+Z. Strictly speaking, MySQL
          requires only that backslash and the quote character used to
          quote the string in the query be escaped.
          <a class="link" href="c-api-functions.html#mysql-real-escape-string" title="7.57 mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
          quotes the other characters to make them easier to read in log
          files. For comparison, see the quoting rules for literal
          strings and the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_quote" target="_top"><code class="literal">QUOTE()</code></a> SQL
          function in <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-literals.html" target="_top">String Literals</a>, and
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html" target="_top">String Functions and Operators</a>.
        </p><p>
          The string pointed to by <code class="literal">from</code> must be
          <code class="literal">length</code> bytes long. You must allocate the
          <code class="literal">to</code> buffer to be at least
          <code class="literal">length*2+1</code> bytes long. (In the worst case,
          each character may need to be encoded as using two bytes, and
          there must be room for the terminating null byte.) When
          <a class="link" href="c-api-functions.html#mysql-real-escape-string" title="7.57 mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
          returns, the contents of <code class="literal">to</code> is a
          null-terminated string. The return value is the length of the
          encoded string, not including the terminating null byte.
        </p><p>
          If you must change the character set of the connection, use
          the <a class="link" href="c-api-functions.html#mysql-set-character-set" title="7.73 mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
          function rather than executing a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-names.html" target="_top"><code class="literal">SET
          NAMES</code></a> (or <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-character-set.html" target="_top"><code class="literal">SET CHARACTER
          SET</code></a>) statement.
          <a class="link" href="c-api-functions.html#mysql-set-character-set" title="7.73 mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
          works like <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-names.html" target="_top"><code class="literal">SET NAMES</code></a> but also
          affects the character set used by
          <a class="link" href="c-api-functions.html#mysql-real-escape-string" title="7.57 mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>,
          which <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-names.html" target="_top"><code class="literal">SET NAMES</code></a> does not.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-escape-string-example"></a>Example</h3></div></div></div><p>
          The following example inserts two escaped strings into an
          <code class="literal">INSERT</code> statement, each within single quote
          characters:
        </p><pre class="programlisting">char query[1000],*end;

end = my_stpcpy(query,"INSERT INTO test_table VALUES('");
end += mysql_real_escape_string(&amp;mysql,end,"What is this",12);
end = my_stpcpy(end,"','");
end += mysql_real_escape_string(&amp;mysql,end,"binary data: \0\r\n",16);
end = my_stpcpy(end,"')");

if (mysql_real_query(&amp;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre><p>
          The <code class="literal">my_stpcpy()</code> function used in the
          example is included in the <code class="literal">libmysqlclient</code>
          library and works like <code class="literal">strcpy()</code> but returns
          a pointer to the terminating null of the first parameter.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-escape-string-return-values"></a>Return Values</h3></div></div></div><p>
          The length of the encoded string that is placed into the
          <code class="literal">to</code> argument, not including the terminating
          null byte, or -1 if an error occurs.
        </p><p>
          Because
          <a class="link" href="c-api-functions.html#mysql-real-escape-string" title="7.57 mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
          returns an unsigned value, you can check for -1 by comparing
          the return value to <code class="literal">(unsigned long)-1</code> (or
          to <code class="literal">(unsigned long)~0</code>, which is equivalent).
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-escape-string-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_insecure_api_err" target="_top"><code class="literal">CR_INSECURE_API_ERR</code></a>
            </p><p>
              This error occurs if the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html#sqlmode_no_backslash_escapes" target="_top"><code class="literal">NO_BACKSLASH_ESCAPES</code></a> SQL
              mode is enabled because, in that case,
              <a class="link" href="c-api-functions.html#mysql-real-escape-string" title="7.57 mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
              cannot be guaranteed to produce a properly encoded result.
              To avoid this error, use
              <a class="link" href="c-api-functions.html#mysql-real-escape-string-quote" title="7.58 mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
              instead.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-real-escape-string-quote"></a>7.58 mysql_real_escape_string_quote()</h2></div></div></div><a class="indexterm" name="idm46079469740944"></a><pre class="programlisting">unsigned long
mysql_real_escape_string_quote(MYSQL *mysql,
                               char *to,
                               const char *from,
                               unsigned long length,
                               char quote)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-escape-string-quote-description"></a>Description</h3></div></div></div><p>
          This function creates a legal SQL string for use in an SQL
          statement. See <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-literals.html" target="_top">String Literals</a>.
        </p><p>
          The <code class="literal">mysql</code> argument must be a valid, open
          connection because character escaping depends on the character
          set in use by the server.
        </p><a class="indexterm" name="idm46079469734896"></a><p>
          The string in the <code class="literal">from</code> argument is encoded
          to produce an escaped SQL string, taking into account the
          current character set of the connection. The result is placed
          in the <code class="literal">to</code> argument, followed by a
          terminating null byte.
        </p><p>
          Characters encoded are <code class="literal">\</code>,
          <code class="literal">'</code>, <code class="literal">"</code>,
          <code class="literal">NUL</code> (ASCII 0), <code class="literal">\n</code>,
          <code class="literal">\r</code>, Control+Z, and <code class="literal">`</code>.
          Strictly speaking, MySQL requires only that backslash and the
          quote character used to quote the string in the query be
          escaped.
          <a class="link" href="c-api-functions.html#mysql-real-escape-string-quote" title="7.58 mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
          quotes the other characters to make them easier to read in log
          files. For comparison, see the quoting rules for literal
          strings and the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_quote" target="_top"><code class="literal">QUOTE()</code></a> SQL
          function in <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-literals.html" target="_top">String Literals</a>, and
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html" target="_top">String Functions and Operators</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            If the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html#sqlmode_ansi_quotes" target="_top"><code class="literal">ANSI_QUOTES</code></a> SQL
            mode is enabled,
            <a class="link" href="c-api-functions.html#mysql-real-escape-string-quote" title="7.58 mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
            cannot be used to escape double quote characters for use
            within double-quoted identifiers. (The function cannot tell
            whether the mode is enabled to determine the proper escaping
            character.)
          </p></div><p>
          The string pointed to by <code class="literal">from</code> must be
          <code class="literal">length</code> bytes long. You must allocate the
          <code class="literal">to</code> buffer to be at least
          <code class="literal">length*2+1</code> bytes long. (In the worst case,
          each character may need to be encoded as using two bytes, and
          there must be room for the terminating null byte.) When
          <a class="link" href="c-api-functions.html#mysql-real-escape-string-quote" title="7.58 mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
          returns, the contents of <code class="literal">to</code> is a
          null-terminated string. The return value is the length of the
          encoded string, not including the terminating null byte.
        </p><p>
          The <code class="literal">quote</code> argument indicates the context in
          which the escaped string is to be placed. Suppose that you
          intend to escape the <code class="literal">from</code> argument and
          insert the escaped string (designated here by
          <em class="replaceable"><code>str</code></em>) into one of the following
          statements:
        </p><pre class="programlisting">1) SELECT * FROM table WHERE name = '<em class="replaceable"><code>str</code></em>'
2) SELECT * FROM table WHERE name = "<em class="replaceable"><code>str</code></em>"
3) SELECT * FROM `<em class="replaceable"><code>str</code></em>` WHERE id = 103
</pre><p>
          To perform escaping properly for each statement, call
          <a class="link" href="c-api-functions.html#mysql-real-escape-string-quote" title="7.58 mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
          as follows, where the final argument indicates the quoting
          context:
        </p><pre class="programlisting">1) len = mysql_real_escape_string_quote(&amp;mysql,to,from,from_len,'\'');
2) len = mysql_real_escape_string_quote(&amp;mysql,to,from,from_len,'"');
3) len = mysql_real_escape_string_quote(&amp;mysql,to,from,from_len,'`');
</pre><p>
          If you must change the character set of the connection, use
          the <a class="link" href="c-api-functions.html#mysql-set-character-set" title="7.73 mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
          function rather than executing a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-names.html" target="_top"><code class="literal">SET
          NAMES</code></a> (or <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-character-set.html" target="_top"><code class="literal">SET CHARACTER
          SET</code></a>) statement.
          <a class="link" href="c-api-functions.html#mysql-set-character-set" title="7.73 mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
          works like <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-names.html" target="_top"><code class="literal">SET NAMES</code></a> but also
          affects the character set used by
          <a class="link" href="c-api-functions.html#mysql-real-escape-string-quote" title="7.58 mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>,
          which <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-names.html" target="_top"><code class="literal">SET NAMES</code></a> does not.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-escape-string-quote-example"></a>Example</h3></div></div></div><p>
          The following example inserts two escaped strings into an
          <code class="literal">INSERT</code> statement, each within single quote
          characters:
        </p><pre class="programlisting">char query[1000],*end;

end = my_stpcpy(query,"INSERT INTO test_table VALUES('");
end += mysql_real_escape_string_quote(&amp;mysql,end,"What is this",12,'\'');
end = my_stpcpy(end,"','");
end += mysql_real_escape_string_quote(&amp;mysql,end,"binary data: \0\r\n",16,'\'');
end = my_stpcpy(end,"')");

if (mysql_real_query(&amp;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre><p>
          The <code class="literal">my_stpcpy()</code> function used in the
          example is included in the <code class="literal">libmysqlclient</code>
          library and works like <code class="literal">strcpy()</code> but returns
          a pointer to the terminating null of the first parameter.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-escape-string-quote-return-values"></a>Return Values</h3></div></div></div><p>
          The length of the encoded string that is placed into the
          <code class="literal">to</code> argument, not including the terminating
          null byte.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-escape-string-quote-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-real-query"></a>7.59 mysql_real_query()</h2></div></div></div><a class="indexterm" name="idm46079469684032"></a><pre class="programlisting">int
mysql_real_query(MYSQL *mysql,
                 const char *stmt_str,
                 unsigned long length)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-query-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> is a
            synchronous function. Its asynchronous counterpart is
            <a class="link" href="c-api-asynchronous-functions.html#mysql-real-query-nonblocking" title="15.5 mysql_real_query_nonblocking()"><code class="literal">mysql_real_query_nonblocking()</code></a>,
            for use by applications that require asynchronous
            communication with the server. See
            <a class="xref" href="c-api-asynchronous-interface.html" title="Chapter 12 C API Asynchronous Interface">Chapter 12, <i>C API Asynchronous Interface</i></a>.
          </p></div><p>
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> executes
          the SQL statement pointed to by <code class="literal">stmt_str</code>, a
          string <code class="literal">length</code> bytes long. Normally, the
          string must consist of a single SQL statement without a
          terminating semicolon (<code class="literal">;</code>) or
          <code class="literal">\g</code>. If multiple-statement execution has
          been enabled, the string can contain several statements
          separated by semicolons. See
          <a class="xref" href="c-api-multiple-queries.html" title="Chapter 23 C API Multiple Statement Execution Support">Chapter 23, <i>C API Multiple Statement Execution Support</i></a>.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> cannot be used
          for statements that contain binary data; you must use
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> instead.
          (Binary data may contain the <code class="literal">\0</code> character,
          which <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> interprets
          as the end of the statement string.) In addition,
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> is faster
          than <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> because it
          does not call <code class="literal">strlen()</code> on the statement
          string.
        </p><p>
          To determine whether a statement returns a result set, call
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count()</code></a>. See
          <a class="xref" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()">Section 7.23, “mysql_field_count()”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-query-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-real-query-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-refresh"></a>7.60 mysql_refresh()</h2></div></div></div><a class="indexterm" name="idm46079469646544"></a><pre class="programlisting">int
mysql_refresh(MYSQL *mysql,
              unsigned int options)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-refresh-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <code class="literal">mysql_refresh()</code> is deprecated and will be
            removed in a future version of MySQL. Instead, use
            <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to execute a
            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/flush.html" target="_top"><code class="literal">FLUSH</code></a> statement.
          </p></div><p>
          This function flushes tables or caches, or resets replication
          server information. The connected user must have the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_reload" target="_top"><code class="literal">RELOAD</code></a> privilege.
        </p><p>
          The <code class="literal">options</code> argument is a bitmask composed
          from any combination of the following values. Multiple values
          can be OR'ed together to perform multiple operations with a
          single call.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">REFRESH_GRANT</code>
            </p><p>
              Refresh the grant tables, like <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/flush.html#flush-privileges" target="_top"><code class="literal">FLUSH
              PRIVILEGES</code></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">REFRESH_LOG</code>
            </p><p>
              Flush the logs, like <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/flush.html#flush-logs" target="_top"><code class="literal">FLUSH
              LOGS</code></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">REFRESH_TABLES</code>
            </p><p>
              Flush the table cache, like <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/flush.html#flush-tables" target="_top"><code class="literal">FLUSH
              TABLES</code></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">REFRESH_HOSTS</code>
            </p><p>
              Flush the host cache, like <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/flush.html#flush-hosts" target="_top"><code class="literal">FLUSH
              HOSTS</code></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">REFRESH_STATUS</code>
            </p><p>
              Reset status variables, like <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/flush.html#flush-status" target="_top"><code class="literal">FLUSH
              STATUS</code></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">REFRESH_THREADS</code>
            </p><p>
              Flush the thread cache.
            </p></li><li class="listitem"><p>
              <code class="literal">REFRESH_SLAVE</code>
            </p><p>
              On a replica server, reset the source server information
              and restart the replica, like <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/reset-slave.html" target="_top"><code class="literal">RESET
              SLAVE</code></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">REFRESH_MASTER</code>
            </p><p>
              On a source server, remove the binary log files listed in
              the binary log index and truncate the index file, like
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/reset-master.html" target="_top"><code class="literal">RESET MASTER</code></a>.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-refresh-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-refresh-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-reload"></a>7.61 mysql_reload()</h2></div></div></div><a class="indexterm" name="idm46079469597952"></a><pre class="programlisting">int
mysql_reload(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-reload-description"></a>Description</h3></div></div></div><p>
          Asks the MySQL server to reload the grant tables. The
          connected user must have the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_reload" target="_top"><code class="literal">RELOAD</code></a> privilege.
        </p><p>
          This function is deprecated. Use
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/flush.html#flush-privileges" target="_top"><code class="literal">FLUSH PRIVILEGES</code></a> statement
          instead.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-reload-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-reload-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-reset-connection"></a>7.62 mysql_reset_connection()</h2></div></div></div><a class="indexterm" name="idm46079469575040"></a><pre class="programlisting">int
mysql_reset_connection(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-reset-connection-description"></a>Description</h3></div></div></div><p>
          Resets the connection to clear the session state.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-reset-connection" title="7.62 mysql_reset_connection()"><code class="literal">mysql_reset_connection()</code></a> has
          effects similar to
          <a class="link" href="c-api-functions.html#mysql-change-user" title="7.4 mysql_change_user()"><code class="literal">mysql_change_user()</code></a> or an
          auto-reconnect except that the connection is not closed and
          reopened, and reauthentication is not done. The write set
          session history is reset. See
          <a class="xref" href="c-api-functions.html#mysql-change-user" title="7.4 mysql_change_user()">Section 7.4, “mysql_change_user()”</a>, and
          <a class="xref" href="c-api-auto-reconnect.html" title="Chapter 28 C API Automatic Reconnection Control">Chapter 28, <i>C API Automatic Reconnection Control</i></a>.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-reset-connection" title="7.62 mysql_reset_connection()"><code class="literal">mysql_reset_connection()</code></a>
          affects the connection-related state as follows:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Rolls back any active transactions and resets autocommit
              mode.
            </p></li><li class="listitem"><p>
              Releases all table locks.
            </p></li><li class="listitem"><p>
              Closes (and drops) all <code class="literal">TEMPORARY</code>
              tables.
            </p></li><li class="listitem"><p>
              Reinitializes session system variables to the values of
              the corresponding global system variables, including
              system variables that are set implicitly by statements
              such as <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-names.html" target="_top"><code class="literal">SET NAMES</code></a>.
            </p></li><li class="listitem"><p>
              Loses user-defined variable settings.
            </p></li><li class="listitem"><p>
              Releases prepared statements.
            </p></li><li class="listitem"><p>
              Closes <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/handler.html" target="_top"><code class="literal">HANDLER</code></a> variables.
            </p></li><li class="listitem"><p>
              Resets the value of
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_top"><code class="literal">LAST_INSERT_ID()</code></a> to 0.
            </p></li><li class="listitem"><p>
              Releases locks acquired with
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/locking-functions.html#function_get-lock" target="_top"><code class="literal">GET_LOCK()</code></a>.
            </p></li><li class="listitem"><p>
              Clears any current query attributes defined as a result of
              calling
              <a class="link" href="c-api-functions.html#mysql-bind-param" title="7.3 mysql_bind_param()"><code class="literal">mysql_bind_param()</code></a>.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-reset-connection-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-reset-server-public-key"></a>7.63 mysql_reset_server_public_key()</h2></div></div></div><a class="indexterm" name="idm46079469545648"></a><pre class="programlisting">void
mysql_reset_server_public_key(void)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-reset-server-public-key-description"></a>Description</h3></div></div></div><p>
          Clears from the client library any cached copy of the public
          key required by the server for RSA key pair-based password
          exchange. This might be necessary when the server has been
          restarted with a different RSA key pair after the client
          program had called
          <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> with the
          <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code> option to specify
          the RSA public key. In such cases, connection failure can
          occur due to key mismatch. To fix this problem, the client can
          use either of the following approaches:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The client can call
              <a class="link" href="c-api-functions.html#mysql-reset-server-public-key" title="7.63 mysql_reset_server_public_key()"><code class="literal">mysql_reset_server_public_key()</code></a>
              to clear the cached key and try again, after the public
              key file on the client side has been replaced with a file
              containing the new public key.
            </p></li><li class="listitem"><p>
              The client can call
              <a class="link" href="c-api-functions.html#mysql-reset-server-public-key" title="7.63 mysql_reset_server_public_key()"><code class="literal">mysql_reset_server_public_key()</code></a>
              to clear the cached key, then call
              <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> with the
              <code class="literal">MYSQL_OPT_GET_SERVER_PUBLIC_KEY</code> option
              (instead of <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code>) to
              request the required public key from the server Do not use
              both <code class="literal">MYSQL_OPT_GET_SERVER_PUBLIC_KEY</code>
              and <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code> because in
              that case, <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code>
              takes precedence.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-reset-server-public-key-return-values"></a>Return Values</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-reset-server-public-key-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-result-metadata"></a>7.64 mysql_result_metadata()</h2></div></div></div><a class="indexterm" name="idm46079469524912"></a><pre class="programlisting">enum enum_resultset_metadata
mysql_result_metadata(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-result-metadata-description"></a>Description</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-result-metadata" title="7.64 mysql_result_metadata()"><code class="literal">mysql_result_metadata()</code></a>
          returns a value that indicates whether a result set has
          metadata. It can be useful for metadata-optional connections
          when the client does not know in advance whether particular
          result sets have metadata. For example, if a client executes a
          stored procedure that returns multiple result sets and might
          change the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_resultset_metadata" target="_top"><code class="literal">resultset_metadata</code></a>
          system variable, the client can invoke
          <a class="link" href="c-api-functions.html#mysql-result-metadata" title="7.64 mysql_result_metadata()"><code class="literal">mysql_result_metadata()</code></a> for
          each result set to determine whether it has metadata.
        </p><p>
          For details about managing result set metadata transfer, see
          <a class="xref" href="c-api-optional-metadata.html" title="Chapter 27 C API Optional Result Set Metadata">Chapter 27, <i>C API Optional Result Set Metadata</i></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-result-metadata-return-values"></a>Return Values</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-result-metadata" title="7.64 mysql_result_metadata()"><code class="literal">mysql_result_metadata()</code></a>
          returns one of these values:
        </p><pre class="programlisting">enum enum_resultset_metadata {
 RESULTSET_METADATA_NONE= 0,
 RESULTSET_METADATA_FULL= 1
};
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-rollback"></a>7.65 mysql_rollback()</h2></div></div></div><a class="indexterm" name="idm46079469510800"></a><pre class="programlisting">bool
mysql_rollback(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-rollback-description"></a>Description</h3></div></div></div><p>
          Rolls back the current transaction.
        </p><p>
          The action of this function is subject to the value of the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_completion_type" target="_top"><code class="literal">completion_type</code></a> system
          variable. In particular, if the value of
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_completion_type" target="_top"><code class="literal">completion_type</code></a> is
          <code class="literal">RELEASE</code> (or 2), the server performs a
          release after terminating a transaction and closes the client
          connection. Call <a class="link" href="c-api-functions.html#mysql-close" title="7.6 mysql_close()"><code class="literal">mysql_close()</code></a>
          from the client program to close the connection from the
          client side.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-rollback-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-rollback-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-row-seek"></a>7.66 mysql_row_seek()</h2></div></div></div><a class="indexterm" name="idm46079469497344"></a><pre class="programlisting">MYSQL_ROW_OFFSET
mysql_row_seek(MYSQL_RES *result,
               MYSQL_ROW_OFFSET offset)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-row-seek-description"></a>Description</h3></div></div></div><p>
          Sets the row cursor to an arbitrary row in a query result set.
          The <code class="literal">offset</code> value is a row offset, typically
          a value returned from
          <a class="link" href="c-api-functions.html#mysql-row-tell" title="7.67 mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a> or from
          <a class="link" href="c-api-functions.html#mysql-row-seek" title="7.66 mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>. This value
          is not a row number; to seek to a row within a result set by
          number, use <a class="link" href="c-api-functions.html#mysql-data-seek" title="7.10 mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a>
          instead.
        </p><p>
          This function requires that the result set structure contains
          the entire result of the query, so
          <a class="link" href="c-api-functions.html#mysql-row-seek" title="7.66 mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a> may be used
          only in conjunction with
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, not with
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-row-seek-return-values"></a>Return Values</h3></div></div></div><p>
          The previous value of the row cursor. This value may be passed
          to a subsequent call to
          <a class="link" href="c-api-functions.html#mysql-row-seek" title="7.66 mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-row-seek-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-row-tell"></a>7.67 mysql_row_tell()</h2></div></div></div><a class="indexterm" name="idm46079469478656"></a><pre class="programlisting">MYSQL_ROW_OFFSET
mysql_row_tell(MYSQL_RES *result)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-row-tell-description"></a>Description</h3></div></div></div><p>
          Returns the current position of the row cursor for the last
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>. This value
          can be used as an argument to
          <a class="link" href="c-api-functions.html#mysql-row-seek" title="7.66 mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>.
        </p><p>
          Use <a class="link" href="c-api-functions.html#mysql-row-tell" title="7.67 mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a> only
          after <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
          not after <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-row-tell-return-values"></a>Return Values</h3></div></div></div><p>
          The current offset of the row cursor.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-row-tell-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-select-db"></a>7.68 mysql_select_db()</h2></div></div></div><a class="indexterm" name="idm46079469463488"></a><pre class="programlisting">int
mysql_select_db(MYSQL *mysql,
                const char *db)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-select-db-description"></a>Description</h3></div></div></div><p>
          Causes the database specified by <code class="literal">db</code> to
          become the default (current) database on the connection
          specified by <code class="literal">mysql</code>. In subsequent queries,
          this database is the default for table references that include
          no explicit database specifier.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-select-db" title="7.68 mysql_select_db()"><code class="literal">mysql_select_db()</code></a> fails unless
          the connected user can be authenticated as having permission
          to use the database or some object within it.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-select-db-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-select-db-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-server-end"></a>7.69 mysql_server_end()</h2></div></div></div><a class="indexterm" name="idm46079469442080"></a><pre class="programlisting">void
mysql_server_end(void)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-server-end-description"></a>Description</h3></div></div></div><p>
          This function finalizes the MySQL client library, which should
          be done when you are done using the library. However,
          <a class="link" href="c-api-functions.html#mysql-server-end" title="7.69 mysql_server_end()"><code class="literal">mysql_server_end()</code></a> is
          deprecated and
          <a class="link" href="c-api-functions.html#mysql-library-end" title="7.41 mysql_library_end()"><code class="literal">mysql_library_end()</code></a> should be
          used instead. See <a class="xref" href="c-api-functions.html#mysql-library-end" title="7.41 mysql_library_end()">Section 7.41, “mysql_library_end()”</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            To avoid memory leaks after the application is done using
            the library (for example, after closing the connection to
            the server), be sure to call
            <a class="link" href="c-api-functions.html#mysql-server-end" title="7.69 mysql_server_end()"><code class="literal">mysql_server_end()</code></a> (or
            <a class="link" href="c-api-functions.html#mysql-library-end" title="7.41 mysql_library_end()"><code class="literal">mysql_library_end()</code></a>)
            explicitly. This enables memory managment to be performed to
            clean up and free resources used by the library.
          </p></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-server-end-return-values"></a>Return Values</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-server-init"></a>7.70 mysql_server_init()</h2></div></div></div><a class="indexterm" name="idm46079469428672"></a><pre class="programlisting">int
mysql_server_init(int argc,
                  char **argv,
                  char **groups)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-server-init-description"></a>Description</h3></div></div></div><p>
          This function initializes the MySQL client library, which must
          be done before you call any other MySQL function. However,
          <a class="link" href="c-api-functions.html#mysql-server-init" title="7.70 mysql_server_init()"><code class="literal">mysql_server_init()</code></a> is
          deprecated and you should call
          <a class="link" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()"><code class="literal">mysql_library_init()</code></a> instead.
          See <a class="xref" href="c-api-functions.html#mysql-library-init" title="7.42 mysql_library_init()">Section 7.42, “mysql_library_init()”</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            To avoid memory leaks after the application is done using
            the library (for example, after closing the connection to
            the server), be sure to call
            <a class="link" href="c-api-functions.html#mysql-server-end" title="7.69 mysql_server_end()"><code class="literal">mysql_server_end()</code></a> (or
            <a class="link" href="c-api-functions.html#mysql-library-end" title="7.41 mysql_library_end()"><code class="literal">mysql_library_end()</code></a>)
            explicitly. This enables memory managment to be performed to
            clean up and free resources used by the library. See
            <a class="xref" href="c-api-functions.html#mysql-library-end" title="7.41 mysql_library_end()">Section 7.41, “mysql_library_end()”</a>.
          </p></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-server-init-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-session-track-get-first"></a>7.71 mysql_session_track_get_first()</h2></div></div></div><a class="indexterm" name="idm46079469414224"></a><a class="indexterm" name="idm46079469413136"></a><pre class="programlisting">int
mysql_session_track_get_first(MYSQL *mysql,
                              enum enum_session_state_type type,
                              const char **data,
                              size_t *length)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-session-track-get-first-description"></a>Description</h3></div></div></div><p>
          MySQL implements a session tracker mechanism whereby the
          server returns information about session state changes to
          clients. To control which notifications the server provides
          about state changes, client applications set system variables
          having names of the form
          <code class="literal">session_track_<em class="replaceable"><code>xxx</code></em></code>,
          such as
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_state_change" target="_top"><code class="literal">session_track_state_change</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_schema" target="_top"><code class="literal">session_track_schema</code></a>, and
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_system_variables" target="_top"><code class="literal">session_track_system_variables</code></a>.
          See <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/session-state-tracking.html" target="_top">Server Tracking of Client Session State Changes</a>.
        </p><p>
          Change notification occurs in the MySQL client/server
          protocol, which includes tracker information in OK packets so
          that session state changes can be detected. To enable client
          applications to extract state-change information from OK
          packets, the MySQL C API provides a pair of functions:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()"><code class="literal">mysql_session_track_get_first()</code></a>
              fetches the first part of the state-change information
              received from the server.
            </p></li><li class="listitem"><p>
              <a class="link" href="c-api-functions.html#mysql-session-track-get-next" title="7.72 mysql_session_track_get_next()"><code class="literal">mysql_session_track_get_next()</code></a>
              fetches any remaining state-change information received
              from the server. Following a successful call to
              <a class="link" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()"><code class="literal">mysql_session_track_get_first()</code></a>,
              call this function repeatedly as long as it returns
              success.
            </p></li></ul></div><p>
          The
          <a class="link" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()"><code class="literal">mysql_session_track_get_first()</code></a>
          parameters are used as follows. These descriptions also apply
          to
          <a class="link" href="c-api-functions.html#mysql-session-track-get-next" title="7.72 mysql_session_track_get_next()"><code class="literal">mysql_session_track_get_next()</code></a>,
          which takes the same parameters.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">mysql</code>: The connection handler.
            </p></li><li class="listitem"><p>
              <code class="literal">type</code>: The tracker type indicating what
              kind of information to retrieve. Permitted tracker values
              are the members of the
              <code class="literal">enum_session_state_type</code> enumeration
              defined in <code class="filename">mysql_com.h</code>:
            </p><pre class="programlisting">enum enum_session_state_type
{
  SESSION_TRACK_SYSTEM_VARIABLES,            /* Session system variables */
  SESSION_TRACK_SCHEMA,                      /* Current schema */
  SESSION_TRACK_STATE_CHANGE,                /* Session state changes */
  SESSION_TRACK_GTIDS,                       /* GTIDs */
  SESSION_TRACK_TRANSACTION_CHARACTERISTICS, /* Transaction characteristics */
  SESSION_TRACK_TRANSACTION_STATE            /* Transaction state */
};
</pre><p>
              The members of that enumeration may change over time as
              MySQL implements additional session-information trackers.
              To make it easy for applications to loop over all possible
              tracker types regardless of the number of members, the
              <code class="literal">SESSION_TRACK_BEGIN</code> and
              <code class="literal">SESSION_TRACK_END</code> symbols are defined
              to be equal to the first and last members of the
              <code class="literal">enum_session_state_type</code> enumeration.
              The example code shown later in this section demonstrates
              this technique. (Of course, if the enumeration members
              change, you must recompile your application to enable it
              to take account of new trackers.)
            </p></li><li class="listitem"><p>
              <code class="literal">data</code>: The address of a <code class="literal">const
              char *</code> variable. Following a successful call,
              this variable points to the returned data, which should be
              considered read only.
            </p></li><li class="listitem"><p>
              <code class="literal">length</code>: The address of a
              <code class="literal">size_t</code> variable. Following a successful
              call, this variable contains the length of the data
              pointed to by the <code class="literal">data</code> parameter.
            </p></li></ul></div><p>
          The following discussion describes how to interpret the
          <code class="literal">data</code> and <code class="literal">length</code> values
          according to the <code class="literal">type</code> value. It also
          indicates which system variable enables notifications for each
          tracker type.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">SESSION_TRACK_SCHEMA</code>: This tracker type
              indicates that the default schema has been set.
              <code class="literal">data</code> is a string containing the new
              default schema name. <code class="literal">length</code> is the
              string length.
            </p><p>
              To enable notifications for this tracker type, enable the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_schema" target="_top"><code class="literal">session_track_schema</code></a>
              system variable.
            </p></li><li class="listitem"><p>
              <code class="literal">SESSION_TRACK_SYSTEM_VARIABLES</code>: This
              tracker type indicates that one or more tracked session
              system variables have been assigned a value. When a
              session system variable is assigned, two values per
              variable are returned (in separate calls). For the first
              call, <code class="literal">data</code> is a string containing the
              variable name and <code class="literal">length</code> is the string
              length. For the second call, <code class="literal">data</code> is a
              string containing the variable value and
              <code class="literal">length</code> is the string length.
            </p><p>
              By default, notification is enabled for these session
              system variables:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_autocommit" target="_top"><code class="literal">autocommit</code></a>
                </p></li><li class="listitem"><p>
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_character_set_client" target="_top"><code class="literal">character_set_client</code></a>
                </p></li><li class="listitem"><p>
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_character_set_connection" target="_top"><code class="literal">character_set_connection</code></a>
                </p></li><li class="listitem"><p>
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_character_set_results" target="_top"><code class="literal">character_set_results</code></a>
                </p></li><li class="listitem"><p>
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_time_zone" target="_top"><code class="literal">time_zone</code></a>
                </p></li></ul></div><p>
              To change the default notification for this tracker type,
              set the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_schema" target="_top"><code class="literal">session_track_schema</code></a>
              system variable to a list of comma-separated variables for
              which to track changes, or <code class="literal">*</code> to track
              changes for all variables. To disable notification of
              session variable assignments, set
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_system_variables" target="_top"><code class="literal">session_track_system_variables</code></a>
              to the empty string.
            </p></li><li class="listitem"><p>
              <code class="literal">SESSION_TRACK_STATE_CHANGE</code>: This
              tracker type indicates a change to some tracked attribute
              of session state. <code class="literal">data</code> is a byte
              containing a boolean flag that indicates whether session
              state changes occurred. <code class="literal">length</code> should
              be 1. The flag is represented as an ASCII value, not a
              binary (for example, <code class="literal">'1'</code>, not
              <code class="literal">0x01</code>).
            </p><p>
              To enable notifications for this tracker type, enable the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_state_change" target="_top"><code class="literal">session_track_state_change</code></a>
              system variable.
            </p><p>
              This tracker reports changes for these attributes of
              session state:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  The default schema (database).
                </p></li><li class="listitem"><p>
                  Session-specific values for system variables.
                </p></li><li class="listitem"><p>
                  User-defined variables.
                </p></li><li class="listitem"><p>
                  Temporary tables.
                </p></li><li class="listitem"><p>
                  Prepared statements.
                </p></li></ul></div></li><li class="listitem"><p>
              <code class="literal">SESSION_TRACK_GTIDS</code>: This tracker type
              indicates that GTIDs are available.
              <code class="literal">data</code> contains the GTID string.
              <code class="literal">length</code> is the string length. The GTID
              string is in the standard format for specifying a set of
              GTID values; see
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/replication-gtids-concepts.html#replication-gtids-concepts-gtid-sets" target="_top">GTID Sets</a>.
            </p><p>
              To enable notifications for this tracker type, set the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_gtids" target="_top"><code class="literal">session_track_gtids</code></a>
              system variable.
            </p></li><li class="listitem"><p>
              <code class="literal">SESSION_TRACK_TRANSACTION_CHARACTERISTICS</code>:
              This tracker type indicates that transaction
              characteristics are available. <code class="literal">data</code> is
              a string containing the characteristics data.
              <code class="literal">length</code> is the string length. The
              characteristics tracker data string may be empty, or it
              may contain one or more SQL statements, each terminated by
              a semicolon:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  If no characteristics apply, the string is empty. The
                  session defaults apply. (For isolation level and
                  access mode, these defaults are given by the session
                  values of the
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_transaction_isolation" target="_top"><code class="literal">transaction_isolation</code></a>
                  and
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_transaction_read_only" target="_top"><code class="literal">transaction_read_only</code></a>
                  system variables.)
                </p></li><li class="listitem"><p>
                  If a transaction was explicitly started, the string
                  contains the statement or statements required to
                  restart the transaction with the same characteristics.
                  As a general rule, this is a
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/commit.html" target="_top"><code class="literal">START
                  TRANSACTION</code></a> statement (possibly with one or
                  more of <code class="literal">READ ONLY</code>, <code class="literal">READ
                  WRITE</code>, and <code class="literal">WITH CONSISTENT
                  SNAPSHOT</code>). If any characteristics apply that
                  cannot be passed to
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/commit.html" target="_top"><code class="literal">START
                  TRANSACTION</code></a>, such as <code class="literal">ISOLATION
                  LEVEL</code>, a suitable <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-transaction.html" target="_top"><code class="literal">SET
                  TRANSACTION</code></a> statement is prepended (for
                  example, <code class="literal">SET TRANSACTION ISOLATION LEVEL
                  SERIALIZABLE; START TRANSACTION READ
                  WRITE;</code>).
                </p></li><li class="listitem"><p>
                  If a transaction was not explicitly started, but
                  one-shot characteristics that apply only to the next
                  transaction were set up, a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-transaction.html" target="_top"><code class="literal">SET
                  TRANSACTION</code></a> statement suitable for
                  replicating that setup is generated (for example,
                  <code class="literal">SET TRANSACTION READ ONLY;</code>).
                </p><p>
                  Next-transaction characteristics can be set using
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-transaction.html" target="_top"><code class="literal">SET TRANSACTION</code></a> without
                  any <code class="literal">GLOBAL</code> or
                  <code class="literal">SESSION</code> keyword, or by setting the
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_transaction_isolation" target="_top"><code class="literal">transaction_isolation</code></a>
                  and
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_transaction_read_only" target="_top"><code class="literal">transaction_read_only</code></a>
                  system variables using the syntax that applies only to
                  the next transaction:
                </p><pre class="programlisting">SET @@transaction_isolation = <em class="replaceable"><code>value</code></em>;
SET @@transaction_read_only = <em class="replaceable"><code>value</code></em>;
</pre><p>
                  For more information about transaction characteristic
                  scope levels and how they are set, see
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-transaction.html#set-transaction-scope" target="_top">Transaction Characteristic Scope</a>.
                </p></li></ul></div><p>
              To enable notifications for this tracker type, set the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_transaction_info" target="_top"><code class="literal">session_track_transaction_info</code></a>
              system variable to <code class="literal">CHARACTERISTICS</code>
              (which also enables the
              <code class="literal">SESSION_TRACK_TRANSACTION_STATE</code> tracker
              type).
            </p><p>
              Transaction characteristics tracking enables the client to
              determine how to restart a transaction in another session
              so it has the same characteristics as in the original
              session.
            </p><p>
              Because characteristics may be set using
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-transaction.html" target="_top"><code class="literal">SET TRANSACTION</code></a> before a
              transaction is started, it is not safe for the client to
              assume that there are no transaction characteristics if no
              transaction is active. It is therefore unsafe not to track
              transaction characteristics and just switch the connection
              when no transaction is active (whether this is detected by
              the transaction state tracker or the traditional
              <code class="literal">SERVER_STATUS_IN_TRANS</code> flag). A client
              <span class="emphasis"><em>must</em></span> subscribe to the transaction
              characteristics tracker if it may wish to switch its
              session to another connection at some point and
              transactions may be used.
            </p><p>
              The characteristics tracker tracks changes to the one-shot
              characteristics that apply only to the next transaction.
              It does not track changes to the session variables.
              Therefore, the client additionally must track the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_transaction_isolation" target="_top"><code class="literal">transaction_isolation</code></a> and
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_transaction_read_only" target="_top"><code class="literal">transaction_read_only</code></a>
              system variables to correctly determine the session
              defaults that apply when next-transaction characteristic
              values are empty. (To track these variables, list them in
              the value of the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_system_variables" target="_top"><code class="literal">session_track_system_variables</code></a>
              system variable.)
            </p></li><li class="listitem"><p>
              <code class="literal">SESSION_TRACK_TRANSACTION_STATE</code>: This
              tracker type indicates that transaction state information
              is available. <code class="literal">data</code> is a string
              containing ASCII characters, each of which indicates some
              aspect of the transaction state. <code class="literal">length</code>
              is the string length (always 8).
            </p><p>
              To enable notifications for this tracker type, set the
              <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_session_track_transaction_info" target="_top"><code class="literal">session_track_transaction_info</code></a>
              system variable to <code class="literal">STATE</code>.
            </p><p>
              Transaction state tracking enables the client to determine
              whether a transaction is in progress and whether it could
              be moved to a different session without being rolled back.
            </p><p>
              The scope of the tracker item is the transaction. All
              state-indicating flags persist until the transaction is
              committed or rolled back. As statements are added to the
              transaction, additional flags may be set in successive
              tracker data values. However, no flags are cleared until
              the transaction ends.
            </p><p>
              Transaction state is reported as a string containing a
              sequence of ASCII characters. Each active state has a
              unique character assigned to it as well as a fixed
              position in the sequence. The following list describes the
              permitted values for positions 1 through 8 of the
              sequence:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Position 1: Whether an active transaction is ongoing.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">T</code>: An explicitly started
                      transaction is ongoing.
                    </p></li><li class="listitem"><p>
                      <code class="literal">I</code>: An implicitly started
                      transaction
                      (<a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_autocommit" target="_top"><code class="literal">autocommit=0</code></a>) is
                      ongoing.
                    </p></li><li class="listitem"><p>
                      <code class="literal">_</code>: There is no active
                      transaction.
                    </p></li></ul></div></li><li class="listitem"><p>
                  Position 2: Whether nontransactional tables were read
                  in the context of the current transaction.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">r</code>: One or more nontransactional
                      tables were read.
                    </p></li><li class="listitem"><p>
                      <code class="literal">_</code>: No nontransactional tables
                      were read so far.
                    </p></li></ul></div></li><li class="listitem"><p>
                  Position 3: Whether transactional tables were read in
                  the context of the current transaction.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">R</code>: One or more transactional
                      tables were read.
                    </p></li><li class="listitem"><p>
                      <code class="literal">_</code>: No transactional tables were
                      read so far.
                    </p></li></ul></div></li><li class="listitem"><p>
                  Position 4: Whether unsafe writes (writes to
                  nontransactional tables) were performed in the context
                  of the current transaction.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">w</code>: One or more nontransactional
                      tables were written.
                    </p></li><li class="listitem"><p>
                      <code class="literal">_</code>: No nontransactional tables
                      were written so far.
                    </p></li></ul></div></li><li class="listitem"><p>
                  Position 5: Whether any transactional tables were
                  written in the context of the current transaction.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">W</code>: One or more transactional
                      tables were written.
                    </p></li><li class="listitem"><p>
                      <code class="literal">_</code>: No transactional tables were
                      written so far.
                    </p></li></ul></div></li><li class="listitem"><p>
                  Position 6: Whether any unsafe statements were
                  executed in the context of the current transaction.
                  Statements containing nondeterministic constructs such
                  as <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_rand" target="_top"><code class="literal">RAND()</code></a> or
                  <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/miscellaneous-functions.html#function_uuid" target="_top"><code class="literal">UUID()</code></a> are unsafe for
                  statement-based replication.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">s</code>: One or more unsafe
                      statements were executed.
                    </p></li><li class="listitem"><p>
                      <code class="literal">_</code>: No unsafe statements were
                      executed so far.
                    </p></li></ul></div></li><li class="listitem"><p>
                  Position 7: Whether a result set was sent to the
                  client during the current transaction.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">S</code>: A result set was sent.
                    </p></li><li class="listitem"><p>
                      <code class="literal">_</code>: No result sets were sent so
                      far.
                    </p></li></ul></div></li><li class="listitem"><p>
                  Position 8: Whether a <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/lock-tables.html" target="_top"><code class="literal">LOCK
                  TABLES</code></a> statement is in effect.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">L</code>: Tables are explicitly locked
                      with <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/lock-tables.html" target="_top"><code class="literal">LOCK TABLES</code></a>.
                    </p></li><li class="listitem"><p>
                      <code class="literal">_</code>: <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/lock-tables.html" target="_top"><code class="literal">LOCK
                      TABLES</code></a> is not active in the session.
                    </p></li></ul></div></li></ul></div><p>
              Consider a session consisting of the following statements,
              including one to enable the transaction state tracker:
            </p><pre class="programlisting">1. SET @@SESSION.session_track_transaction_info='STATE';
2. START TRANSACTION;
3. SELECT 1;
4. INSERT INTO t1 () VALUES();
5. INSERT INTO t1 () VALUES(1, RAND());
6. COMMIT;
</pre><p>
              With transaction state tracking enabled, the following
              <code class="literal">data</code> values result from those
              statements:
            </p><pre class="programlisting">1. ________
2. T_______
3. T_____S_
4. T___W_S_
5. T___WsS_
6. ________
</pre></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-session-track-get-first-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-session-track-get-first-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-session-track-get-first-example"></a>Example</h3></div></div></div><p>
          The following example shows how to call
          <a class="link" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()"><code class="literal">mysql_session_track_get_first()</code></a>
          and
          <a class="link" href="c-api-functions.html#mysql-session-track-get-next" title="7.72 mysql_session_track_get_next()"><code class="literal">mysql_session_track_get_next()</code></a>
          to retrieve and display all available session state-change
          information following successful execution of an SQL statement
          string (represented by <code class="literal">stmt_str</code>). It is
          assumed that the application has set the
          <code class="literal">session_track_<em class="replaceable"><code>xxx</code></em></code>
          system variables that enable the notifications it wishes to
          receive.
        </p><pre class="programlisting">printf("Execute: %s\n", stmt_str);

if (mysql_query(mysql, stmt_str) != 0)
{
  fprintf(stderr, "Error %u: %s\n",
           mysql_errno(mysql), mysql_error(mysql));
  return;
}

MYSQL_RES *result = mysql_store_result(mysql);
if (result) /* there is a result set to fetch */
{
  /* ... process rows here ... */
  printf("Number of rows returned: %lu\n",
          (unsigned long) mysql_num_rows(result));
  mysql_free_result(result);
}
else        /* there is no result set */
{
  if (mysql_field_count(mysql) == 0)
  {
    printf("Number of rows affected: %lu\n",
            (unsigned long) mysql_affected_rows(mysql));
  }
  else      /* an error occurred */
  {
    fprintf(stderr, "Error %u: %s\n",
             mysql_errno(mysql), mysql_error(mysql));
  }
}

/* extract any available session state-change information */
enum enum_session_state_type type;
for (type = SESSION_TRACK_BEGIN; type &lt;= SESSION_TRACK_END; type++)
{
  const char *data;
  size_t length;

  if (mysql_session_track_get_first(mysql, type, &amp;data, &amp;length) == 0)
  {
    /* print info type and initial data */
    printf("Type=%d:\n", type);
    printf("mysql_session_track_get_first(): length=%d; data=%*.*s\n",
           (int) length, (int) length, (int) length, data);

    /* check for more data */
    while (mysql_session_track_get_next(mysql, type, &amp;data, &amp;length) == 0)
    {
      printf("mysql_session_track_get_next(): length=%d; data=%*.*s\n",
             (int) length, (int) length, (int) length, data);
    }
  }
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-session-track-get-next"></a>7.72 mysql_session_track_get_next()</h2></div></div></div><a class="indexterm" name="idm46079469224992"></a><a class="indexterm" name="idm46079469223904"></a><pre class="programlisting">int
mysql_session_track_get_next(MYSQL *mysql,
                             enum enum_session_state_type type,
                             const char **data,
                             size_t *length)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-session-track-get-next-description"></a>Description</h3></div></div></div><p>
          This function fetches additional session state-change
          information received from the server, following that retrieved
          by
          <a class="link" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()"><code class="literal">mysql_session_track_get_first()</code></a>.
          The parameters for
          <a class="link" href="c-api-functions.html#mysql-session-track-get-next" title="7.72 mysql_session_track_get_next()"><code class="literal">mysql_session_track_get_next()</code></a>
          are the same as for
          <a class="link" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()"><code class="literal">mysql_session_track_get_first()</code></a>.
        </p><p>
          Following a successful call to
          <a class="link" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()"><code class="literal">mysql_session_track_get_first()</code></a>,
          call
          <a class="link" href="c-api-functions.html#mysql-session-track-get-next" title="7.72 mysql_session_track_get_next()"><code class="literal">mysql_session_track_get_next()</code></a>
          repeatedly until it returns nonzero to indicate no more
          information is available. The calling sequence for
          <a class="link" href="c-api-functions.html#mysql-session-track-get-next" title="7.72 mysql_session_track_get_next()"><code class="literal">mysql_session_track_get_next()</code></a>
          is similar to that for
          <a class="link" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()"><code class="literal">mysql_session_track_get_first()</code></a>.
          For more information and an example that demonstrates both
          functions, see
          <a class="xref" href="c-api-functions.html#mysql-session-track-get-first" title="7.71 mysql_session_track_get_first()">Section 7.71, “mysql_session_track_get_first()”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-session-track-get-next-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-session-track-get-next-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-set-character-set"></a>7.73 mysql_set_character_set()</h2></div></div></div><a class="indexterm" name="idm46079469204624"></a><pre class="programlisting">int
mysql_set_character_set(MYSQL *mysql,
                        const char *csname)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-character-set-description"></a>Description</h3></div></div></div><p>
          This function is used to set the default character set for the
          current connection. The string <code class="literal">csname</code>
          specifies a valid character set name. The connection collation
          becomes the default collation of the character set. This
          function works like the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/set-names.html" target="_top"><code class="literal">SET
          NAMES</code></a> statement, but also sets the value of
          <code class="literal">mysql-&gt;charset</code>, and thus affects the
          character set used by
          <a class="link" href="c-api-functions.html#mysql-real-escape-string" title="7.57 mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-character-set-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-character-set-example"></a>Example</h3></div></div></div><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
if (!mysql_real_connect(&amp;mysql,"host","user","<em class="replaceable"><code>passwd</code></em>","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}

if (!mysql_set_character_set(&amp;mysql, "utf8"))
{
    printf("New client character set: %s\n",
           mysql_character_set_name(&amp;mysql));
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-set-local-infile-default"></a>7.74 mysql_set_local_infile_default()</h2></div></div></div><a class="indexterm" name="idm46079469190304"></a><a class="indexterm" name="idm46079469189216"></a><pre class="programlisting">void
mysql_set_local_infile_default(MYSQL *mysql);
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-local-infile-default-description"></a>Description</h3></div></div></div><p>
          Sets the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA
          LOCAL</code></a> callback functions to the defaults used
          internally by the C client library. The library calls this
          function automatically if
          <a class="link" href="c-api-functions.html#mysql-set-local-infile-handler" title="7.75 mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>
          has not been called or does not supply valid functions for
          each of its callbacks.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-local-infile-default-return-values"></a>Return Values</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-local-infile-default-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-set-local-infile-handler"></a>7.75 mysql_set_local_infile_handler()</h2></div></div></div><pre class="programlisting">void
mysql_set_local_infile_handler(MYSQL *mysql,
  int (*local_infile_init)(void **, const char *, void *),
  int (*local_infile_read)(void *, char *, unsigned int),
  void (*local_infile_end)(void *),
  int (*local_infile_error)(void *, char*, unsigned int),
  void *userdata);
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-local-infile-handler-description"></a>Description</h3></div></div></div><p>
          This function installs callbacks to be used during the
          execution of <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD
          DATA LOCAL</code></a> statements. It enables application
          programs to exert control over local (client-side) data file
          reading. The arguments are the connection handler, a set of
          pointers to callback functions, and a pointer to a data area
          that the callbacks can use to share information.
        </p><p>
          To use
          <a class="link" href="c-api-functions.html#mysql-set-local-infile-handler" title="7.75 mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>,
          you must write the following callback functions:
        </p><pre class="programlisting">int
local_infile_init(void **ptr, const char *filename, void *userdata);
</pre><p>
          The initialization function. This is called once to do any
          setup necessary, open the data file, allocate data structures,
          and so forth. The first <code class="literal">void**</code> argument is
          a pointer to a pointer. You can set the pointer (that is,
          <code class="literal">*ptr</code>) to a value that will be passed to
          each of the other callbacks (as a <code class="literal">void*</code>).
          The callbacks can use this pointed-to value to maintain state
          information. The <code class="literal">userdata</code> argument is the
          same value that is passed to
          <a class="link" href="c-api-functions.html#mysql-set-local-infile-handler" title="7.75 mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>.
        </p><p>
          Make the initialization function return zero for success,
          nonzero for an error.
        </p><pre class="programlisting">int
local_infile_read(void *ptr, char *buf, unsigned int buf_len);
</pre><p>
          The data-reading function. This is called repeatedly to read
          the data file. <code class="literal">buf</code> points to the buffer
          where the read data is stored, and <code class="literal">buf_len</code>
          is the maximum number of bytes that the callback can read and
          store in the buffer. (It can read fewer bytes, but should not
          read more.)
        </p><p>
          The return value is the number of bytes read, or zero when no
          more data could be read (this indicates EOF). Return a value
          less than zero if an error occurs.
        </p><pre class="programlisting">void
local_infile_end(void *ptr)
</pre><p>
          The termination function. This is called once after
          <code class="literal">local_infile_read()</code> has returned zero (EOF)
          or an error. Within this function, deallocate any memory
          allocated by <code class="literal">local_infile_init()</code> and
          perform any other cleanup necessary. It is invoked even if the
          initialization function returns an error.
        </p><pre class="programlisting">int
local_infile_error(void *ptr,
                   char *error_msg,
                   unsigned int error_msg_len);
</pre><p>
          The error-handling function. This is called to get a textual
          error message to return to the user in case any of your other
          functions returns an error. <code class="literal">error_msg</code>
          points to the buffer into which the message is written, and
          <code class="literal">error_msg_len</code> is the length of the buffer.
          Write the message as a null-terminated string, at most
          <code class="literal">error_msg_len</code>−1 bytes long.
        </p><p>
          The return value is the error number.
        </p><p>
          Typically, the other callbacks store the error message in the
          data structure pointed to by <code class="literal">ptr</code>, so that
          <code class="literal">local_infile_error()</code> can copy the message
          from there into <code class="literal">error_msg</code>.
        </p><p>
          After calling
          <a class="link" href="c-api-functions.html#mysql-set-local-infile-handler" title="7.75 mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>
          in your C code and passing pointers to your callback
          functions, you can then issue a
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD DATA
          LOCAL</code></a> statement (for example, by using
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a>). The client
          library automatically invokes your callbacks. The file name
          specified in <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_top"><code class="literal">LOAD
          DATA LOCAL</code></a> will be passed as the second parameter to
          the <code class="literal">local_infile_init()</code> callback.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-local-infile-handler-return-values"></a>Return Values</h3></div></div></div><p>
          None.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-local-infile-handler-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-set-server-option"></a>7.76 mysql_set_server_option()</h2></div></div></div><a class="indexterm" name="idm46079469140352"></a><pre class="programlisting">int
mysql_set_server_option(MYSQL *mysql, enum
                        enum_mysql_set_option option)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-server-option-description"></a>Description</h3></div></div></div><p>
          Enables or disables an option for the connection.
          <code class="literal">option</code> can have one of the following
          values.
        </p><div class="informaltable"><table summary="Options for mysql_set_server_option() and a description of each option."><col width="50%"><col width="50%"><thead><tr>
              <th>Option</th>
              <th>Description</th>
            </tr></thead><tbody><tr>
              <td><code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code></td>
              <td>Enable multiple-statement support</td>
            </tr><tr>
              <td><code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_OFF</code></td>
              <td>Disable multiple-statement support</td>
            </tr></tbody></table></div><p>
          If you enable multiple-statement support, you should retrieve
          results from calls to
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
          loop that calls
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
          determine whether there are more results. For an example, see
          <a class="xref" href="c-api-multiple-queries.html" title="Chapter 23 C API Multiple Statement Execution Support">Chapter 23, <i>C API Multiple Statement Execution Support</i></a>.
        </p><p>
          Enabling multiple-statement support with
          <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code> does not
          have quite the same effect as enabling it by passing the
          <code class="literal">CLIENT_MULTI_STATEMENTS</code> flag to
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>:
          <code class="literal">CLIENT_MULTI_STATEMENTS</code> also enables
          <code class="literal">CLIENT_MULTI_RESULTS</code>. If you are using the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a> SQL statement in your
          programs, multiple-result support must be enabled; this means
          that <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code> by
          itself is insufficient to permit the use of
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/call.html" target="_top"><code class="literal">CALL</code></a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-server-option-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-set-server-option-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_unknown_com_error" target="_top"><code class="literal">ER_UNKNOWN_COM_ERROR</code></a>
            </p><p>
              The server did not support
              <a class="link" href="c-api-functions.html#mysql-set-server-option" title="7.76 mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a>
              (which is the case that the server is older than 4.1.1) or
              the server did not support the option one tried to set.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-shutdown"></a>7.77 mysql_shutdown()</h2></div></div></div><a class="indexterm" name="idm46079469096992"></a><pre class="programlisting">int
mysql_shutdown(MYSQL *mysql,
               enum mysql_enum_shutdown_level shutdown_level)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-shutdown-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <code class="literal">mysql_shutdown()</code> is deprecated and will
            be removed in a future version of MySQL. Instead, use
            <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> to execute a
            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/shutdown.html" target="_top"><code class="literal">SHUTDOWN</code></a> statement.
          </p></div><p>
          Asks the database server to shut down. The connected user must
          have the <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_shutdown" target="_top"><code class="literal">SHUTDOWN</code></a> privilege.
          MySQL servers support only one type of shutdown;
          <code class="literal">shutdown_level</code> must be equal to
          <code class="literal">SHUTDOWN_DEFAULT</code>. Dynamically linked
          executables that have been compiled with older versions of the
          <code class="literal">libmysqlclient</code> headers and call
          <a class="link" href="c-api-functions.html#mysql-shutdown" title="7.77 mysql_shutdown()"><code class="literal">mysql_shutdown()</code></a> must be used
          with the old <code class="literal">libmysqlclient</code> dynamic
          library.
        </p><p>
          An alternative to
          <a class="link" href="c-api-functions.html#mysql-shutdown" title="7.77 mysql_shutdown()"><code class="literal">mysql_shutdown()</code></a> is to use the
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/shutdown.html" target="_top"><code class="literal">SHUTDOWN</code></a> SQL statement.
        </p><p>
          The shutdown process is described in
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-shutdown.html" target="_top">The Server Shutdown Process</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-shutdown-return-values"></a>Return Values</h3></div></div></div><p>
          Zero for success. Nonzero if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-shutdown-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-sqlstate"></a>7.78 mysql_sqlstate()</h2></div></div></div><a class="indexterm" name="idm46079469065296"></a><pre class="programlisting">const char *
mysql_sqlstate(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-sqlstate-description"></a>Description</h3></div></div></div><p>
          Returns a null-terminated string containing the SQLSTATE error
          code for the most recently executed SQL statement. The error
          code consists of five characters. <code class="literal">'00000'</code>
          means <span class="quote">“<span class="quote">no error.</span>”</span> The values are specified by
          ANSI SQL and ODBC. For a list of possible values, see
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/error-handling.html" target="_top">Error Messages and Common Problems</a>.
        </p><p>
          SQLSTATE values returned by
          <a class="link" href="c-api-functions.html#mysql-sqlstate" title="7.78 mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> differ from
          MySQL-specific error numbers returned by
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a>. For example,
          the <span class="command"><strong>mysql</strong></span> client program displays errors
          using the following format, where <code class="literal">1146</code> is
          the <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> value and
          <code class="literal">'42S02'</code> is the corresponding
          <a class="link" href="c-api-functions.html#mysql-sqlstate" title="7.78 mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> value:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>SELECT * FROM no_such_table;</code></strong>
ERROR 1146 (42S02): Table 'test.no_such_table' doesn't exist
</pre><p>
          Not all MySQL error numbers are mapped to SQLSTATE error
          codes. The value <code class="literal">'HY000'</code> (general error) is
          used for unmapped error numbers.
        </p><p>
          If you call <a class="link" href="c-api-functions.html#mysql-sqlstate" title="7.78 mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a>
          after <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
          fails, <a class="link" href="c-api-functions.html#mysql-sqlstate" title="7.78 mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> might
          not return a useful value. For example, this happens if a host
          is blocked by the server and the connection is closed without
          any SQLSTATE value being sent to the client.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-sqlstate-return-values"></a>Return Values</h3></div></div></div><p>
          A null-terminated character string containing the SQLSTATE
          error code.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-sqlstate-see-also"></a>See Also</h3></div></div></div><p>
          See <a class="xref" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()">Section 7.15, “mysql_errno()”</a>,
          <a class="xref" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()">Section 7.16, “mysql_error()”</a>, and
          <a class="xref" href="c-api-prepared-statement-functions.html#mysql-stmt-sqlstate" title="11.27 mysql_stmt_sqlstate()">Section 11.27, “mysql_stmt_sqlstate()”</a>.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-ssl-set"></a>7.79 mysql_ssl_set()</h2></div></div></div><a class="indexterm" name="idm46079469037744"></a><pre class="programlisting">bool
mysql_ssl_set(MYSQL *mysql,
              const char *key,
              const char *cert,
              const char *ca,
              const char *capath,
              const char *cipher)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-ssl-set-description"></a>Description</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> is used for
          establishing encrypted connections using SSL. The
          <code class="literal">mysql</code> argument must be a valid connection
          handler. Any unused SSL arguments may be given as
          <code class="literal">NULL</code>.
        </p><p>
          If used, <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> must
          be called before
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
          <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> does nothing
          unless SSL support is enabled in the client library.
        </p><p>
          It is optional to call
          <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> to obtain an
          encrypted connection because by default, MySQL programs
          attempt to connect using encryption if the server supports
          encrypted connections, falling back to an unencrypted
          connection if an encrypted connection cannot be established
          (see <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/using-encrypted-connections.html" target="_top">Configuring MySQL to Use Encrypted Connections</a>).
          <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> may be useful
          to applications that must specify particular certificate and
          key files, encryption ciphers, and so forth.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> specifies SSL
          information such as certificate and key files for establishing
          an encrypted connection if such connections are available, but
          does not enforce any requirement that the connection obtained
          be encrypted. To require an encrypted connection, use the
          technique described in
          <a class="xref" href="c-api-encrypted-connections.html" title="Chapter 22 C API Support for Encrypted Connections">Chapter 22, <i>C API Support for Encrypted Connections</i></a>.
        </p><p>
          For additional security relative to that provided by the
          default encryption, clients can supply a CA certificate
          matching the one used by the server and enable host name
          identity verification. In this way, the server and client
          place their trust in the same CA certificate and the client
          verifies that the host to which it connected is the one
          intended. For details, see
          <a class="xref" href="c-api-encrypted-connections.html" title="Chapter 22 C API Support for Encrypted Connections">Chapter 22, <i>C API Support for Encrypted Connections</i></a>.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> is a
          convenience function that is essentially equivalent to this
          set of <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> calls:
        </p><pre class="programlisting">mysql_options(mysql, MYSQL_OPT_SSL_KEY,    key);
mysql_options(mysql, MYSQL_OPT_SSL_CERT,   cert);
mysql_options(mysql, MYSQL_OPT_SSL_CA,     ca);
mysql_options(mysql, MYSQL_OPT_SSL_CAPATH, capath);
mysql_options(mysql, MYSQL_OPT_SSL_CIPHER, cipher);
</pre><p>
          Because of that equivalence, applications can, instead of
          calling <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a>, call
          <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> directly,
          omitting calls for those options for which the option value is
          <code class="literal">NULL</code>. Moreover,
          <a class="link" href="c-api-functions.html#mysql-options" title="7.51 mysql_options()"><code class="literal">mysql_options()</code></a> offers
          encrypted-connection options not available using
          <a class="link" href="c-api-functions.html#mysql-ssl-set" title="7.79 mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a>, such as
          <code class="literal">MYSQL_OPT_SSL_MODE</code> to specify the security
          state of the connection, and
          <code class="literal">MYSQL_OPT_TLS_VERSION</code> to specify the
          protocols the client permits for encrypted connections.
        </p><p>
          Arguments:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">mysql</code>: The connection handler returned
              from <a class="link" href="c-api-functions.html#mysql-init" title="7.38 mysql_init()"><code class="literal">mysql_init()</code></a>.
            </p></li><li class="listitem"><p>
              <code class="literal">key</code>: The path name of the client
              private key file.
            </p></li><li class="listitem"><p>
              <code class="literal">cert</code>: The path name of the client
              public key certificate file.
            </p></li><li class="listitem"><p>
              <code class="literal">ca</code>: The path name of the Certificate
              Authority (CA) certificate file. This option, if used,
              must specify the same certificate used by the server.
            </p></li><li class="listitem"><p>
              <code class="literal">capath</code>: The path name of the directory
              that contains trusted SSL CA certificate files.
            </p></li><li class="listitem"><p>
              <code class="literal">cipher</code>: The list of permissible ciphers
              for SSL encryption.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-ssl-set-return-values"></a>Return Values</h3></div></div></div><p>
          This function always returns <code class="literal">0</code>. If SSL
          setup is incorrect, a subsequent
          <a class="link" href="c-api-functions.html#mysql-real-connect" title="7.55 mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call
          returns an error when you attempt to connect.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-stat"></a>7.80 mysql_stat()</h2></div></div></div><a class="indexterm" name="idm46079468990240"></a><pre class="programlisting">const char *
mysql_stat(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-stat-description"></a>Description</h3></div></div></div><p>
          Returns a character string containing information similar to
          that provided by the <span class="command"><strong>mysqladmin status</strong></span>
          command. This includes uptime in seconds and the number of
          running threads, questions, reloads, and open tables.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-stat-return-values"></a>Return Values</h3></div></div></div><p>
          A character string describing the server status.
          <code class="literal">NULL</code> if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-stat-errors"></a>Errors</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-store-result"></a>7.81 mysql_store_result()</h2></div></div></div><a class="indexterm" name="idm46079468970736"></a><pre class="programlisting">MYSQL_RES *
mysql_store_result(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-store-result-description"></a>Description</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> is a
            synchronous function. Its asynchronous counterpart is
            <a class="link" href="c-api-asynchronous-functions.html#mysql-store-result-nonblocking" title="15.6 mysql_store_result_nonblocking()"><code class="literal">mysql_store_result_nonblocking()</code></a>,
            for use by applications that require asynchronous
            communication with the server. See
            <a class="xref" href="c-api-asynchronous-interface.html" title="Chapter 12 C API Asynchronous Interface">Chapter 12, <i>C API Asynchronous Interface</i></a>.
          </p></div><p>
          After invoking <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a>
          or <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, you
          must call <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>
          or <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for
          every statement that successfully produces a result set
          (<a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/show.html" target="_top"><code class="literal">SHOW</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/describe.html" target="_top"><code class="literal">DESCRIBE</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/explain.html" target="_top"><code class="literal">EXPLAIN</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/check-table.html" target="_top"><code class="literal">CHECK TABLE</code></a>, and so forth). You
          must also call
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a> after you
          are done with the result set.
        </p><p>
          You need not call
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for other
          statements, but it does not do any harm or cause any notable
          performance degradation if you call
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> in all
          cases. You can detect whether the statement has a result set
          by checking whether
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returns a
          nonzero value (more about this later).
        </p><p>
          If you enable multiple-statement support, you should retrieve
          results from calls to
          <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a> or
          <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
          loop that calls
          <a class="link" href="c-api-functions.html#mysql-next-result" title="7.48 mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
          determine whether there are more results. For an example, see
          <a class="xref" href="c-api-multiple-queries.html" title="Chapter 23 C API Multiple Statement Execution Support">Chapter 23, <i>C API Multiple Statement Execution Support</i></a>.
        </p><p>
          To determine whether a statement returns a result set, call
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count()</code></a>. See
          <a class="xref" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()">Section 7.23, “mysql_field_count()”</a>.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> reads the
          entire result of a query to the client, allocates a
          <code class="literal">MYSQL_RES</code> structure, and places the result
          into this structure.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returns
          <code class="literal">NULL</code> if the statement did not return a
          result set (for example, if it was an
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_top"><code class="literal">INSERT</code></a> statement), or an error
          occurred and reading of the result set failed.
        </p><p>
          An empty result set is returned if there are no rows returned.
          (An empty result set differs from a null pointer as a return
          value.)
        </p><p>
          After you have called
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> and
          gotten back a result that is not a null pointer, you can call
          <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> to find out
          how many rows are in the result set.
        </p><p>
          You can call <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>
          to fetch rows from the result set, or
          <a class="link" href="c-api-functions.html#mysql-row-seek" title="7.66 mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a> and
          <a class="link" href="c-api-functions.html#mysql-row-tell" title="7.67 mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a> to obtain or
          set the current row position within the result set.
        </p><p>
          See <a class="xref" href="c-api-common-issues.html#null-mysql-store-result" title="29.1 Why mysql_store_result() Sometimes Returns NULL After mysql_query() Returns Success">Section 29.1, “Why mysql_store_result() Sometimes Returns NULL After mysql_query()
        Returns Success”</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-store-result-return-values"></a>Return Values</h3></div></div></div><p>
          A pointer to a <code class="literal">MYSQL_RES</code> result structure
          with the results. <code class="literal">NULL</code> if the statement did
          not return a result set or an error occurred. To determine
          whether an error occurred, check whether
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a> returns a
          nonempty string, <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a>
          returns nonzero, or
          <a class="link" href="c-api-functions.html#mysql-field-count" title="7.23 mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns
          zero.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-store-result-errors"></a>Errors</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> resets
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a> and
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> if it succeeds.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_out_of_memory" target="_top"><code class="literal">CR_OUT_OF_MEMORY</code></a>
            </p><p>
              Out of memory.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-thread-id"></a>7.82 mysql_thread_id()</h2></div></div></div><a class="indexterm" name="idm46079468896560"></a><pre class="programlisting">unsigned long
mysql_thread_id(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-thread-id-description"></a>Description</h3></div></div></div><p>
          Returns the thread ID of the current connection. This value
          can be used as an argument to
          <a class="link" href="c-api-functions.html#mysql-kill" title="7.40 mysql_kill()"><code class="literal">mysql_kill()</code></a> to kill the
          thread.
        </p><p>
          If the connection is lost and you reconnect with
          <a class="link" href="c-api-functions.html#mysql-ping" title="7.53 mysql_ping()"><code class="literal">mysql_ping()</code></a>, the thread ID
          changes. This means you should not get the thread ID and store
          it for later. You should get it when you need it.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            This function does not work correctly if thread IDs become
            larger than 32 bits, which can occur on some systems. To
            avoid problems with
            <a class="link" href="c-api-functions.html#mysql-thread-id" title="7.82 mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a>, do not
            use it. To get the connection ID, execute a <code class="literal">SELECT
            CONNECTION_ID()</code> query and retrieve the result.
          </p></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-thread-id-return-values"></a>Return Values</h3></div></div></div><p>
          The thread ID of the current connection.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-thread-id-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-use-result"></a>7.83 mysql_use_result()</h2></div></div></div><a class="indexterm" name="idm46079468881904"></a><pre class="programlisting">MYSQL_RES *
mysql_use_result(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-use-result-description"></a>Description</h3></div></div></div><p>
          After invoking <a class="link" href="c-api-functions.html#mysql-query" title="7.54 mysql_query()"><code class="literal">mysql_query()</code></a>
          or <a class="link" href="c-api-functions.html#mysql-real-query" title="7.59 mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, you
          must call <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>
          or <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for
          every statement that successfully produces a result set
          (<a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_top"><code class="literal">SELECT</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/show.html" target="_top"><code class="literal">SHOW</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/describe.html" target="_top"><code class="literal">DESCRIBE</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/explain.html" target="_top"><code class="literal">EXPLAIN</code></a>,
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/check-table.html" target="_top"><code class="literal">CHECK TABLE</code></a>, and so forth). You
          must also call
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a> after you
          are done with the result set.
        </p><p>
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> initiates a
          result set retrieval but does not actually read the result set
          into the client like
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a> does.
          Instead, each row must be retrieved individually by making
          calls to <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>.
          This reads the result of a query directly from the server
          without storing it in a temporary table or local buffer, which
          is somewhat faster and uses much less memory than
          <a class="link" href="c-api-functions.html#mysql-store-result" title="7.81 mysql_store_result()"><code class="literal">mysql_store_result()</code></a>. The
          client allocates memory only for the current row and a
          communication buffer that may grow up to
          <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_max_allowed_packet" target="_top"><code class="literal">max_allowed_packet</code></a> bytes.
        </p><p>
          On the other hand, you should not use
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for locking
          reads if you are doing a lot of processing for each row on the
          client side, or if the output is sent to a screen on which the
          user may type a <code class="literal">^S</code> (stop scroll). This ties
          up the server and prevent other threads from updating any
          tables from which the data is being fetched.
        </p><p>
          When using <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
          you must execute
          <a class="link" href="c-api-functions.html#mysql-fetch-row" title="7.22 mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> until a
          <code class="literal">NULL</code> value is returned, otherwise, the
          unfetched rows are returned as part of the result set for your
          next query. The C API gives the error <code class="literal">Commands out of
          sync; you can't run this command now</code> if you forget
          to do this!
        </p><p>
          You may not use
          <a class="link" href="c-api-functions.html#mysql-data-seek" title="7.10 mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-row-seek" title="7.66 mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-row-tell" title="7.67 mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a>,
          <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>, or
          <a class="link" href="c-api-functions.html#mysql-affected-rows" title="7.1 mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> with a
          result returned from
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a>, nor may
          you issue other queries until
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> has
          finished. (However, after you have fetched all the rows,
          <a class="link" href="c-api-functions.html#mysql-num-rows" title="7.50 mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> accurately
          returns the number of rows fetched.)
        </p><p>
          You must call
          <a class="link" href="c-api-functions.html#mysql-free-result" title="7.26 mysql_free_result()"><code class="literal">mysql_free_result()</code></a> once you
          are done with the result set.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-use-result-return-values"></a>Return Values</h3></div></div></div><p>
          A <code class="literal">MYSQL_RES</code> result structure.
          <code class="literal">NULL</code> if an error occurred.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-use-result-errors"></a>Errors</h3></div></div></div><p>
          <a class="link" href="c-api-functions.html#mysql-use-result" title="7.83 mysql_use_result()"><code class="literal">mysql_use_result()</code></a> resets
          <a class="link" href="c-api-functions.html#mysql-error" title="7.16 mysql_error()"><code class="literal">mysql_error()</code></a> and
          <a class="link" href="c-api-functions.html#mysql-errno" title="7.15 mysql_errno()"><code class="literal">mysql_errno()</code></a> if it succeeds.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_commands_out_of_sync" target="_top"><code class="literal">CR_COMMANDS_OUT_OF_SYNC</code></a>
            </p><p>
              Commands were executed in an improper order.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_out_of_memory" target="_top"><code class="literal">CR_OUT_OF_MEMORY</code></a>
            </p><p>
              Out of memory.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_gone_error" target="_top"><code class="literal">CR_SERVER_GONE_ERROR</code></a>
            </p><p>
              The MySQL server has gone away.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_server_lost" target="_top"><code class="literal">CR_SERVER_LOST</code></a>
            </p><p>
              The connection to the server was lost during the query.
            </p></li><li class="listitem"><p>
              <a class="ulink" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/client-error-reference.html#error_cr_unknown_error" target="_top"><code class="literal">CR_UNKNOWN_ERROR</code></a>
            </p><p>
              An unknown error occurred.
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-warning-count"></a>7.84 mysql_warning_count()</h2></div></div></div><a class="indexterm" name="idm46079468817376"></a><pre class="programlisting">unsigned int
mysql_warning_count(MYSQL *mysql)
</pre><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-warning-count-description"></a>Description</h3></div></div></div><p>
          Returns the number of errors, warnings, and notes generated
          during execution of the previous SQL statement.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-warning-count-return-values"></a>Return Values</h3></div></div></div><p>
          The warning count.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-warning-count-errors"></a>Errors</h3></div></div></div><p>
          None.
        </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="c-api-function-overview.html">Previous</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="c-api-prepared-statements.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 6 C API Function Overview </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 8 C API Prepared Statements</td></tr></table></div><div class="copyright-footer"></div></body></html>
